import t from"stream";import e from"http";import n from"https";import r from"zlib";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var i,s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}!function(t){t.Parse="parse",t.Stringify="stringify"}(i||(i={}));var c=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t.toString():"";default:return""}},l=function(t,e){void 0===e&&(e={separator:"&",equals:"=",includeQuestion:!1});try{if(!t||Object.keys(t).length<=0)throw new Error("object_is_empty");if("object"!=typeof t)throw new Error("input_not_object");e.separator||(e.separator="&"),e.equals||(e.equals="="),e.includeQuestion||(e.includeQuestion=!1);var n=Object.keys(t).sort().map(function(n){var r=encodeURIComponent(c(n))+e.equals;return void 0===t[n]?"":null===t[n]?encodeURIComponent(n):Array.isArray(t[n])?t[n].map(function(t){return r+encodeURIComponent(c(t))}).join(e.separator):r+encodeURIComponent(c(t[n]))}).filter(Boolean);return e.includeQuestion&&(n[0]="?"+n[0]),n.join(e.separator)}catch(n){return/object_is_empty/i.test(n.toString())?(e.includeQuestion?"?":"")+encodeURIComponent(c(t)):/input_not_object/i.test(n.toString())?function(t,e){switch(e){case i.Parse:return{err:t};case i.Stringify:default:return t}}("@Favware/Querystring: Your input was not an object. Please supply an object when using Stringify",i.Stringify):n}},f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function h(t,e){return t(e={exports:{}},e.exports),e.exports}function p(t){return t&&t.default||t}var d=h(function(t,e){(function(){var n=this,r=n._,o={},i=Array.prototype,s=Object.prototype,a=Function.prototype,u=i.push,c=i.slice,l=i.concat,f=s.toString,h=s.hasOwnProperty,p=i.forEach,d=i.map,m=i.reduce,g=i.reduceRight,y=i.filter,v=i.every,b=i.some,w=i.indexOf,A=i.lastIndexOf,S=Array.isArray,x=Object.keys,O=a.bind,E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};t.exports&&(e=t.exports=E),e._=E,E.VERSION="1.6.0";var C=E.each=E.forEach=function(t,e,n){if(null==t)return t;if(p&&t.forEach===p)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t)===o)return}else{var s=E.keys(t);for(r=0,i=s.length;r<i;r++)if(e.call(n,t[s[r]],s[r],t)===o)return}return t};E.map=E.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(C(t,function(t,o,i){r.push(e.call(n,t,o,i))}),r)};var N="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,e,n,r){var o=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return r&&(e=E.bind(e,r)),o?t.reduce(e,n):t.reduce(e);if(C(t,function(t,i,s){o?n=e.call(r,n,t,i,s):(n=t,o=!0)}),!o)throw new TypeError(N);return n},E.reduceRight=E.foldr=function(t,e,n,r){var o=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return r&&(e=E.bind(e,r)),o?t.reduceRight(e,n):t.reduceRight(e);var i=t.length;if(i!==+i){var s=E.keys(t);i=s.length}if(C(t,function(a,u,c){u=s?s[--i]:--i,o?n=e.call(r,n,t[u],u,c):(n=t[u],o=!0)}),!o)throw new TypeError(N);return n},E.find=E.detect=function(t,e,n){var r;return T(t,function(t,o,i){if(e.call(n,t,o,i))return r=t,!0}),r},E.filter=E.select=function(t,e,n){var r=[];return null==t?r:y&&t.filter===y?t.filter(e,n):(C(t,function(t,o,i){e.call(n,t,o,i)&&r.push(t)}),r)},E.reject=function(t,e,n){return E.filter(t,function(t,r,o){return!e.call(n,t,r,o)},n)},E.every=E.all=function(t,e,n){e||(e=E.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,n):(C(t,function(t,i,s){if(!(r=r&&e.call(n,t,i,s)))return o}),!!r)};var T=E.some=E.any=function(t,e,n){e||(e=E.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(e,n):(C(t,function(t,i,s){if(r||(r=e.call(n,t,i,s)))return o}),!!r)};E.contains=E.include=function(t,e){return null!=t&&(w&&t.indexOf===w?-1!=t.indexOf(e):T(t,function(t){return t===e}))},E.invoke=function(t,e){var n=c.call(arguments,2),r=E.isFunction(e);return E.map(t,function(t){return(r?e:t[e]).apply(t,n)})},E.pluck=function(t,e){return E.map(t,E.property(e))},E.where=function(t,e){return E.filter(t,E.matches(e))},E.findWhere=function(t,e){return E.find(t,E.matches(e))},E.max=function(t,e,n){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,o=-1/0;return C(t,function(t,i,s){var a=e?e.call(n,t,i,s):t;a>o&&(r=t,o=a)}),r},E.min=function(t,e,n){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,o=1/0;return C(t,function(t,i,s){var a=e?e.call(n,t,i,s):t;a<o&&(r=t,o=a)}),r},E.shuffle=function(t){var e,n=0,r=[];return C(t,function(t){e=E.random(n++),r[n-1]=r[e],r[e]=t}),r},E.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=E.values(t)),t[E.random(t.length-1)]):E.shuffle(t).slice(0,Math.max(0,e))};var j=function(t){return null==t?E.identity:E.isFunction(t)?t:E.property(t)};E.sortBy=function(t,e,n){return e=j(e),E.pluck(E.map(t,function(t,r,o){return{value:t,index:r,criteria:e.call(n,t,r,o)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,r){var o={};return n=j(n),C(e,function(i,s){var a=n.call(r,i,s,e);t(o,a,i)}),o}};E.groupBy=P(function(t,e,n){E.has(t,e)?t[e].push(n):t[e]=[n]}),E.indexBy=P(function(t,e,n){t[e]=n}),E.countBy=P(function(t,e){E.has(t,e)?t[e]++:t[e]=1}),E.sortedIndex=function(t,e,n,r){for(var o=(n=j(n)).call(r,e),i=0,s=t.length;i<s;){var a=i+s>>>1;n.call(r,t[a])<o?i=a+1:s=a}return i},E.toArray=function(t){return t?E.isArray(t)?c.call(t):t.length===+t.length?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:t.length===+t.length?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:e<0?[]:c.call(t,0,e)},E.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},E.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},E.rest=E.tail=E.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},E.compact=function(t){return E.filter(t,E.identity)};var _=function(t,e,n){return e&&E.every(t,E.isArray)?l.apply(n,t):(C(t,function(t){E.isArray(t)||E.isArguments(t)?e?u.apply(n,t):_(t,e,n):n.push(t)}),n)};E.flatten=function(t,e){return _(t,e,[])},E.without=function(t){return E.difference(t,c.call(arguments,1))},E.partition=function(t,e){var n=[],r=[];return C(t,function(t){(e(t)?n:r).push(t)}),[n,r]},E.uniq=E.unique=function(t,e,n,r){E.isFunction(e)&&(r=n,n=e,e=!1);var o=n?E.map(t,n,r):t,i=[],s=[];return C(o,function(n,r){(e?r&&s[s.length-1]===n:E.contains(s,n))||(s.push(n),i.push(t[r]))}),i},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(t){var e=c.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(e,function(e){return E.contains(e,t)})})},E.difference=function(t){var e=l.apply(i,c.call(arguments,1));return E.filter(t,function(t){return!E.contains(e,t)})},E.zip=function(){for(var t=E.max(E.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=E.pluck(arguments,""+n);return e},E.object=function(t,e){if(null==t)return{};for(var n={},r=0,o=t.length;r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},E.indexOf=function(t,e,n){if(null==t)return-1;var r=0,o=t.length;if(n){if("number"!=typeof n)return t[r=E.sortedIndex(t,e)]===e?r:-1;r=n<0?Math.max(0,o+n):n}if(w&&t.indexOf===w)return t.indexOf(e,n);for(;r<o;r++)if(t[r]===e)return r;return-1},E.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(A&&t.lastIndexOf===A)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=r?n:t.length;o--;)if(t[o]===e)return o;return-1},E.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),o=0,i=new Array(r);o<r;)i[o++]=t,t+=n;return i};var R=function(){};E.bind=function(t,e){var n,r;if(O&&t.bind===O)return O.apply(t,c.call(arguments,1));if(!E.isFunction(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));R.prototype=t.prototype;var o=new R;R.prototype=null;var i=t.apply(o,n.concat(c.call(arguments)));return Object(i)===i?i:o}},E.partial=function(t){var e=c.call(arguments,1);return function(){for(var n=0,r=e.slice(),o=0,i=r.length;o<i;o++)r[o]===E&&(r[o]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},E.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=E.bind(t[e],t)}),t},E.memoize=function(t,e){var n={};return e||(e=E.identity),function(){var r=e.apply(this,arguments);return E.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},E.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(c.call(arguments,1)))},E.throttle=function(t,e,n){var r,o,i,s=null,a=0;n||(n={});var u=function(){a=!1===n.leading?0:E.now(),s=null,i=t.apply(r,o),r=o=null};return function(){var c=E.now();a||!1!==n.leading||(a=c);var l=e-(c-a);return r=this,o=arguments,l<=0?(clearTimeout(s),s=null,a=c,i=t.apply(r,o),r=o=null):s||!1===n.trailing||(s=setTimeout(u,l)),i}},E.debounce=function(t,e,n){var r,o,i,s,a,u=function(){var c=E.now()-s;c<e?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(i,o),i=o=null))};return function(){i=this,o=arguments,s=E.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(i,o),i=o=null),a}},E.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},E.wrap=function(t,e){return E.partial(e,t)},E.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},E.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},E.keys=function(t){if(!E.isObject(t))return[];if(x)return x(t);var e=[];for(var n in t)E.has(t,n)&&e.push(n);return e},E.values=function(t){for(var e=E.keys(t),n=e.length,r=new Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},E.pairs=function(t){for(var e=E.keys(t),n=e.length,r=new Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},E.invert=function(t){for(var e={},n=E.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},E.functions=E.methods=function(t){var e=[];for(var n in t)E.isFunction(t[n])&&e.push(n);return e.sort()},E.extend=function(t){return C(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},E.pick=function(t){var e={},n=l.apply(i,c.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},E.omit=function(t){var e={},n=l.apply(i,c.call(arguments,1));for(var r in t)E.contains(n,r)||(e[r]=t[r]);return e},E.defaults=function(t){return C(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,e){return e(t),t};var I=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof E&&(t=t._wrapped),e instanceof E&&(e=e._wrapped);var o=f.call(t);if(o!=f.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var i=n.length;i--;)if(n[i]==t)return r[i]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"==o){if(c=(u=t.length)==e.length)for(;u--&&(c=I(t[u],e[u],n,r)););}else{for(var l in t)if(E.has(t,l)&&(u++,!(c=E.has(e,l)&&I(t[l],e[l],n,r))))break;if(c){for(l in e)if(E.has(e,l)&&!u--)break;c=!u}}return n.pop(),r.pop(),c};E.isEqual=function(t,e){return I(t,e,[],[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var e in t)if(E.has(t,e))return!1;return!0},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=S||function(t){return"[object Array]"==f.call(t)},E.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(t){return"function"==typeof t}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!=+t},E.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==f.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,e){return h.call(t,e)},E.noConflict=function(){return n._=r,this},E.identity=function(t){return t},E.constant=function(t){return function(){return t}},E.property=function(t){return function(e){return e[t]}},E.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},E.times=function(t,e,n){for(var r=Array(Math.max(0,t)),o=0;o<t;o++)r[o]=e.call(n,o);return r},E.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},E.now=Date.now||function(){return(new Date).getTime()};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};B.unescape=E.invert(B.escape);var M={escape:new RegExp("["+E.keys(B.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(B.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(e){return null==e?"":(""+e).replace(M[t],function(e){return B[t][e]})}}),E.result=function(t,e){if(null!=t){var n=t[e];return E.isFunction(n)?n.call(t):n}},E.mixin=function(t){C(E.functions(t),function(e){var n=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),D.call(this,n.apply(E,t))}})};var U=0;E.uniqueId=function(t){var e=++U+"";return t?t+e:e},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,e,n){var r;n=E.defaults({},n,E.templateSettings);var o=new RegExp([(n.escape||k).source,(n.interpolate||k).source,(n.evaluate||k).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(o,function(e,n,r,o,a){return s+=t.slice(i,a).replace($,function(t){return"\\"+L[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(t){throw t.source=s,t}if(e)return r(e,E);var a=function(t){return r.call(this,t,E)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},E.chain=function(t){return E(t).chain()};var D=function(t){return this._chain?E(t).chain():t};E.mixin(E),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];E.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],D.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];E.prototype[t]=function(){return D.call(this,e.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(f)}),m=(d._,{centralAsia:{name:"Central Asia",countries:["KZ","KG","TJ","TM","UZ"]},southernAsia:{name:"Southern Asia",countries:["AF","BD","BT","IO","IN","IR","MV","NP","PK","LK"]},southeastAsia:{name:"Southeast Asia",countries:["BN","KH","CX","CC","TL","ID","LA","MY","MM","PH","SG","TH","VN"]},eastAsia:{name:"East Asia",countries:["CN","HK","JP","KP","KR","MO","MN","TW"]},westernAsia:{name:"Western Asia",countries:["AM","AZ","BH","IQ","IL","JO","KW","LB","OM","PS","QA","SA","SY","TR","AE","YE"]},centralAfrica:{name:"Central Aftrica",countries:["AO","CM","CF","TD","CG","CD","GQ","GA","ST"]},northAfrica:{name:"North Africa",countries:["DZ","EG","LY","MA","SD","TN","EH"]},southernAfrica:{name:"Southern Africa",countries:["BW","LS","NA","ZA","SZ"]},eastAfrica:{name:"East Africa",countries:["BI","KM","DJ","ER","ET","KE","MG","MW","MU","YT","MZ","RE","RW","SC","SO","SS","TZ","UG","ZM","ZW"]},westAfrica:{name:"West Africa",countries:["BJ","BF","CV","CI","GM","GH","GN","GW","LR","ML","MR","NE","NG","SH","SN","SL","TG"]},centralAmerica:{name:"Central America",countries:["BZ","CR","SV","GT","HN","NI","PA"]},northernAmerica:{name:"Northern America",countries:["BM","CA","GL","MX","PM","US"]},caribbean:{name:"Caribbean",countries:["AI","AG","AW","BS","BB","BQ","VG","KY","CU","CW","DM","DO","GD","GP","HT","JM","MQ","MS","PR","BL","KN","LC","MF","VC","SX","TT","TC","VI"]},southAmerica:{name:"South America",countries:["AR","BO","BR","CL","CO","EC","FK","GF","GY","PY","PE","SR","UY","VE"]},antartica:{name:"Antartica",countries:["AQ","BV","TF","HM","GS"]},northernEurope:{name:"Northern Europe",countries:["AX","DK","EE","FO","FI","GG","IS","IE","JE","IM","LV","LT","NO","SJ","SE","GB"]},southernEurope:{name:"Southern Europe",countries:["AL","AD","BA","HR","CY","GI","GR","IT","MK","VA","MT","ME","PT","SM","RS","SI","ES"]},easternEurope:{name:"Eastern Europe",countries:["BY","BG","CZ","GE","HU","MD","PL","RO","RU","SK","UA"]},westernEurope:{name:"Western Europe",countries:["AT","BE","FR","DE","LI","LU","MC","NL","CH"]},australia:{name:"Australia",countries:["AU","NF","NZ"]},melanesia:{name:"Melanesia",countries:["FJ","NC","PG","SB","VU"]},micronesia:{name:"Micronesia",countries:["GU","KI","MH","FM","NR","MP","PW","UM"]},polynesia:{name:"Polynesia",countries:["AS","CK","PF","NU","PN","WS","TK","TO","TV","WF"]}}),g=m,y={};y.asia={name:"Asia",regions:["centralAsia","southernAsia","southeastAsia","eastAsia","westernAsia"],countries:d.flatten([g.centralAsia.countries,g.southernAsia.countries,g.southeastAsia.countries,g.eastAsia.countries,g.westernAsia.countries]).sort()},y.africa={name:"Africa",regions:["centralAfrica","northAfrica","southernAfrica","eastAfrica","westAfrica"],countries:d.flatten([g.centralAfrica.countries,g.northAfrica.countries,g.southernAfrica.countries,g.eastAfrica.countries,g.westAfrica.countries]).sort()},y.northAmerica={name:"North America",regions:["centralAmerica","northernAmerica","caribbean"],countries:d.flatten([g.centralAmerica.countries,g.northernAmerica.countries,g.caribbean.countries]).sort()},y.southAmerica={name:"South America",regions:["southAmerica"],countries:d.flatten([g.southAmerica.countries]).sort()},y.antartica={name:"Antartica",regions:["antartica"],countries:d.flatten([g.antartica.countries]).sort()},y.europe={name:"Europe",regions:["northernEurope","southernEurope","easternEurope","westernEurope"],countries:d.flatten([g.northernEurope.countries,g.southernEurope.countries,g.easternEurope.countries,g.westernEurope.countries]).sort()},y.oceania={name:"Oceania",regions:["australia","melanesia","micronesia","polynesia"],countries:d.flatten([g.australia.countries,g.melanesia.countries,g.micronesia.countries,g.polynesia.countries]).sort()};var v=y,b=Object.freeze({}),w=Object.freeze({}),A=Object.freeze({}),S=function(t){return{countries:x.bind(null,t.countries),currencies:x.bind(null,t.currencies),languages:x.bind(null,t.languages)}};function x(t,e){var n=d.pairs(e);return t.filter(function(t){return n.filter(function(e){var n=t[e[0]];return d.isArray(n)?n.indexOf(e[1])>=0:n==e[1]}).length==n.length})}var O={ALL:"L",AFN:"؋",ARS:"$",AWG:"ƒ",AUD:"$",AZN:"₼",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"Bs.",BAM:"KM",BWP:"P",BGN:"лв",BRL:"R$",BND:"$",KHR:"៛",CAD:"$",KYD:"$",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",HRK:"kn",CUP:"₱",CZK:"Kč",DKK:"kr",DOP:"RD$",XCD:"$",EGP:"£",SVC:"$",EEK:"kr",EUR:"€",FKP:"£",FJD:"$",GHC:"¢",GIP:"£",GTQ:"Q",GGP:"£",GYD:"$",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",INR:"₹",IDR:"Rp",IRR:"﷼",IMP:"£",ILS:"₪",JMD:"J$",JPY:"¥",JEP:"£",KES:"KSh",KZT:"лв",KPW:"₩",KRW:"₩",KGS:"лв",LAK:"₭",LVL:"Ls",LBP:"£",LRD:"$",LTL:"Lt",MKD:"ден",MYR:"RM",MUR:"₨",MXN:"$",MNT:"₮",MZN:"MT",NAD:"$",NPR:"₨",ANG:"ƒ",NZD:"$",NIO:"C$",NGN:"₦",NOK:"kr",OMR:"﷼",PKR:"₨",PAB:"B/.",PYG:"Gs",PEN:"S/.",PHP:"₱",PLN:"zł",QAR:"﷼",RON:"lei",RUB:"₽",SHP:"£",SAR:"﷼",RSD:"Дин.",SCR:"₨",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",LKR:"₨",SEK:"kr",CHF:"CHF",SRD:"$",SYP:"£",TZS:"TSh",TWD:"NT$",THB:"฿",TTD:"TT$",TRY:"",TRL:"₤",TVD:"$",UGX:"USh",UAH:"₴",GBP:"£",USD:"$",UYU:"$U",UZS:"лв",VEF:"Bs",VND:"₫",YER:"﷼",ZWD:"Z$"},E=function(t){return O.hasOwnProperty(t)?O[t]:"?"};var C=p(b),N=p(w),T=p(A),j=h(function(t,e){e.continents=v,e.regions=g,e.countries={all:C},d.each(C,function(t){var n=e.countries[t.alpha2];n&&"deleted"!==n.status||(e.countries[t.alpha2]=t);var r=e.countries[t.alpha3];r&&"deleted"!==r.status||(e.countries[t.alpha3]=t)}),e.currencies={all:N},d.each(N,function(t){var n=E(t.code);"?"==n&&(n=t.code),t.symbol=n,e.currencies[t.code]=t}),e.languages={all:T},d.each(T,function(t){e.languages[t.alpha2]=t,e.languages[t.bibliographic]=t,e.languages[t.alpha3]=t}),e.lookup=S({countries:C,currencies:N,languages:T});var n={all:[]},r=d.reduce(C,function(t,e){return e.countryCallingCodes&&e.countryCallingCodes.length&&(n.all.push(e),n[e.alpha2]=e,n[e.alpha3]=e,d.each(e.countryCallingCodes,function(e){-1==t.indexOf(e)&&t.push(e)})),t},[]);delete n[""],e.callingCountries=n,r.sort(function(t,e){var n=function(t){return parseInt(t)},r=d.map(t.split(" "),n),o=d.map(e.split(" "),n);return r[0]<o[0]?-1:r[0]>o[0]?1:void 0===r[1]&&void 0!==o[1]?-1:void 0!==r[1]&&void 0===o[1]?1:r[1]<o[1]?-1:r[1]>o[1]?1:0}),e.callingCodes={all:r}}),P=(j.continents,j.regions),_=j.countries,R=(j.currencies,j.languages,j.lookup,j.callingCountries,j.callingCodes,h(function(t,e){const n=function(t,e){const n=e.exec(t);return!(null==n)};e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e){if(e){const n=Object.keys(e),r=n.length;for(let o=0;o<r;o++)t[n[o]]=e[n[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,n){var r={};if(!t)return e;for(let o=0;o<n.length;o++)void 0!==t[n[o]]?r[n[o]]=t[n[o]]:r[n[o]]=e[n[o]];return r},e.doesMatch=n,e.doesNotMatch=function(t,e){return!n(t,e)},e.getAllMatches=function(t,e){const n=[];let r=e.exec(t);for(;r;){const o=[],i=r.length;for(let t=0;t<i;t++)o.push(r[t]);n.push(o),r=e.exec(t)}return n}}));R.isExist,R.isEmptyObject,R.merge,R.getValue,R.buildOptions,R.doesMatch,R.doesNotMatch,R.getAllMatches;const I=function(t,e){const n={};if(!(t.child&&!R.isEmptyObject(t.child)||t.attrsMap&&!R.isEmptyObject(t.attrsMap)))return R.isExist(t.val)?t.val:"";R.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(n[e.textNodeName]=t.val),R.merge(n,t.attrsMap);const r=Object.keys(t.child);for(let s=0;s<r.length;s++){var o=r[s];if(t.child[o]&&t.child[o].length>1)for(var i in n[o]=[],t.child[o])n[o].push(I(t.child[o][i],e));else n[o]=I(t.child[o][0],e)}return n};var B={convertToJson:I},M=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=n,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}};const U=R.buildOptions,k={OPENING:1,CLOSING:2,SELF:3,CDATA:4};let L="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|(([\\w:\\-._]*:)?([\\w:\\-._]+))((\\s*[\\w\\-._:]+(=(('([^']*)')|(\"([^\"]*)\")))?)*)\\s*(\\/)?>|((\\/)(([\\w:\\-._]*:)?([\\w:\\-._]+))\\s*>))([^<]*)";!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const $={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",localeRange:"",tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t},stopNodes:[]};var D=$;const F=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","localeRange","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var G=F;function V(t,e){return t&&(e.trimValues&&(t=t.trim()),t=H(t=e.tagValueProcessor(t),e.parseNodeValue,e.parseTrueNumberOnly)),t}function q(t,e){if(e.ignoreNameSpace){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}function H(t,e,n){if(e&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(e=-1!==t.indexOf("0x")?Number.parseInt(t,16):-1!==t.indexOf(".")?Number.parseFloat(t):Number.parseInt(t,10),n&&(e=String(e)===t?e:t)),e}return R.isExist(t)?t:""}const K=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function J(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const n=R.getAllMatches(t,K),r=n.length,o={};for(let t=0;t<r;t++){const r=q(n[t][1],e);r.length&&(void 0!==n[t][4]?(e.trimValues&&(n[t][4]=n[t][4].trim()),n[t][4]=e.attrValueProcessor(n[t][4]),o[e.attributeNamePrefix+r]=H(n[t][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+r]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=o,t}return o}}var z={defaultOptions:D,props:G,getTraversalObj:function(t,e){e=U(e,$,F),t=t.replace(/<!--[\s\S]*?-->/g,"");const n=new M("!xml");let r=n;L=L.replace(/\[\\w/g,"["+e.localeRange+"\\w");const o=new RegExp(L,"g");let i=o.exec(t),s=o.exec(t);for(;i;){const n="]]>"===(a=i)[4]?k.CDATA:"/"===a[18]?k.CLOSING:"/"===a[16]?k.SELF:k.OPENING;if(n===k.CLOSING)r.parent&&i[22]&&(r.parent.val=R.getValue(r.parent.val)+""+V(i[22],e)),e.stopNodes.length&&e.stopNodes.includes(r.tagname)&&(r.child=[],null==r.attrsMap&&(r.attrsMap={}),r.val=t.substr(r.startIndex+1,i.index-r.startIndex-1)),r=r.parent;else if(n===k.CDATA)if(e.cdataTagName){const t=new M(e.cdataTagName,r,i[3]);t.attrsMap=J(i[8],e),r.addChild(t),r.val=R.getValue(r.val)+e.cdataPositionChar,i[22]&&(r.val+=V(i[22],e))}else r.val=(r.val||"")+(i[3]||"")+V(i[22],e);else if(n===k.SELF){r&&i[22]&&(r.val=R.getValue(r.val)+""+V(i[22],e));const t=new M(e.ignoreNameSpace?i[7]:i[5],r,"");t.attrsMap=J(i[8],e),r.addChild(t)}else{const t=new M(e.ignoreNameSpace?i[7]:i[5],r,V(i[22],e));e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=i.index+i[1].length),t.attrsMap=J(i[8],e),r.addChild(t),r=t}i=s,s=o.exec(t)}var a;return n}};const Z=function(t){return String.fromCharCode(t)},Y={nilChar:Z(176),missingChar:Z(201),nilPremitive:Z(175),missingPremitive:Z(200),emptyChar:Z(178),emptyValue:Z(177),boundryChar:Z(179),objStart:Z(198),arrStart:Z(204),arrayEnd:Z(185)},W=[Y.nilChar,Y.nilPremitive,Y.missingChar,Y.missingPremitive,Y.boundryChar,Y.emptyChar,Y.emptyValue,Y.arrayEnd,Y.objStart,Y.arrStart],Q=function(t,e,n){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?X(t[0].val):X(t);{const o=void 0===(r=t)?Y.missingChar:null===r?Y.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||Y.emptyChar;if(!0===o){let r="";if(Array.isArray(e)){r+=Y.arrStart;const o=e[0],i=t.length;if("string"==typeof o)for(let e=0;e<i;e++){const n=X(t[e].val);r=tt(r,n)}else for(let e=0;e<i;e++){const i=Q(t[e],o,n);r=tt(r,i)}r+=Y.arrayEnd}else{r+=Y.objStart;const o=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let i in o){const s=o[i];let a;a=!n.ignoreAttributes&&t.attrsMap&&t.attrsMap[s]?Q(t.attrsMap[s],e[s],n):s===n.textNodeName?Q(t.val,e[s],n):Q(t.child[s],e[s],n),r=tt(r,a)}}return r}return o}var r},X=function(t){switch(t){case void 0:return Y.missingPremitive;case null:return Y.nilPremitive;case"":return Y.emptyValue;default:return t}},tt=function(t,e){return et(e[0])||et(t[t.length-1])||(t+=Y.boundryChar),t+e},et=function(t){return-1!==W.indexOf(t)};const nt=R.buildOptions;var rt={convert2nimn:function(t,e,n){return n=nt(n,z.defaultOptions,z.props),Q(t,e,n)}};const ot=R.buildOptions,it=function(t,e,n){let r="{";const o=Object.keys(t.child);for(let n=0;n<o.length;n++){var i=o[n];if(t.child[i]&&t.child[i].length>1){for(var s in r+='"'+i+'" : [ ',t.child[i])r+=it(t.child[i][s],e)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+i+'" : '+it(t.child[i][0],e)+" ,"}return R.merge(r,t.attrsMap),R.isEmptyObject(r)?R.isExist(t.val)?t.val:"":(R.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(r+='"'+e.textNodeName+'" : '+(!0!==(a=t.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}");var a};var st={convertToJsonString:function(t,e){return(e=ot(e,z.defaultOptions,z.props)).indentBy=e.indentBy||"",it(t,e)}};const at={allowBooleanAttributes:!1,localeRange:"a-zA-Z"},ut=["allowBooleanAttributes","localeRange"];function ct(t,e){for(var n=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var r=t.substr(n,e-n);if(e>5&&"xml"===r)return{err:{code:"InvalidXml",msg:"XML declaration allowed only at the start of the document."}};if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function lt(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&0===--n)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}var ft='"',ht="'";function pt(t,e){let n="",r="";for(;e<t.length;e++){if(t[e]===ft||t[e]===ht)if(""===r)r=t[e];else{if(r!==t[e])continue;r=""}else if(">"===t[e]&&""===r)break;n+=t[e]}return""===r&&{value:n,index:e}}const dt=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function mt(t,e,n){const r=R.getAllMatches(t,dt),o={};for(let t=0;t<r.length;t++){if(0===r[t][1].length)return{err:{code:"InvalidAttr",msg:"attribute "+r[t][2]+" has no space in starting."}};if(void 0===r[t][3]&&!e.allowBooleanAttributes)return{err:{code:"InvalidAttr",msg:"boolean attribute "+r[t][2]+" is not allowed."}};const i=r[t][2];if(!gt(i,n))return{err:{code:"InvalidAttr",msg:"attribute "+i+" is an invalid name."}};if(o.hasOwnProperty(i))return{err:{code:"InvalidAttr",msg:"attribute "+i+" is repeated."}};o[i]=1}return!0}function gt(t,e){return R.doesMatch(t,e)}function yt(t,e){return!R.doesNotMatch(t,e)}var vt=function(t,e){e=R.buildOptions(e,at,ut);const n=[];let r=!1;"\ufeff"===t[0]&&(t=t.substr(1));const o=new RegExp("^[_w][\\w\\-.:]*$".replace("_w","_"+e.localeRange)),i=new RegExp("^([w]|_)[\\w.\\-_:]*".replace("([w","(["+e.localeRange));for(let s=0;s<t.length;s++){if("<"!==t[s]){if(" "===t[s]||"\t"===t[s]||"\n"===t[s]||"\r"===t[s])continue;return{err:{code:"InvalidChar",msg:"char "+t[s]+" is not expected ."}}}if("?"===t[++s]){if((s=ct(t,++s)).err)return s}else{if("!"===t[s]){s=lt(t,s);continue}{let a=!1;"/"===t[s]&&(a=!0,s++);let u="";for(;s<t.length&&">"!==t[s]&&" "!==t[s]&&"\t"!==t[s]&&"\n"!==t[s]&&"\r"!==t[s];s++)u+=t[s];if("/"===(u=u.trim())[u.length-1]){u=u.substring(0,u.length-1);continue}if(!yt(u,i))return{err:{code:"InvalidTag",msg:"Tag "+u+" is an invalid name."}};const c=pt(t,s);if(!1===c)return{err:{code:"InvalidAttr",msg:"Attributes for "+u+" have open quote"}};let l=c.value;if(s=c.index,"/"===l[l.length-1]){const t=mt(l=l.substring(0,l.length-1),e,o);if(!0!==t)return t;r=!0}else if(a){if(l.trim().length>0)return{err:{code:"InvalidTag",msg:"closing tag "+u+" can't have attributes or invalid starting."}};{const t=n.pop();if(u!==t)return{err:{code:"InvalidTag",msg:"closing tag "+t+" is expected inplace of "+u+"."}}}}else{const t=mt(l,e,o);if(!0!==t)return t;n.push(u),r=!0}for(s++;s<t.length;s++)if("<"===t[s]){if("!"===t[s+1]){s=lt(t,++s);continue}break}"<"===t[s]&&s--}}}return r?!(n.length>0)||{err:{code:"InvalidXml",msg:"Invalid "+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+" found."}}:{err:{code:"InvalidXml",msg:"Start tag expected."}}};const bt=R.buildOptions,wt={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},At=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function St(t){this.options=bt(t,wt,At),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Pt),this.options.cdataTagName?this.isCDATA=_t:this.isCDATA=function(){return!1},this.replaceCDATAstr=xt,this.replaceCDATAarr=Ot,this.options.format?(this.indentate=jt,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=Tt,this.buildObjNode=Ct):(this.buildTextNode=Nt,this.buildObjNode=Et),this.buildTextValNode=Nt,this.buildObjectNode=Et}function xt(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function Ot(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[n]+"]]>");return t+this.newLine}function Et(t,e,n,r){return n&&!t.includes("<")?this.indentate(r)+"<"+e+n+">"+t+"</"+e+this.tagEndChar:this.indentate(r)+"<"+e+n+this.tagEndChar+t+this.indentate(r)+"</"+e+this.tagEndChar}function Ct(t,e,n,r){return""!==t?this.buildObjectNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function Nt(t,e,n,r){return this.indentate(r)+"<"+e+n+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function Tt(t,e,n,r){return""!==t?this.buildTextValNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function jt(t){return this.options.indentBy.repeat(t)}function Pt(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function _t(t){return t===this.options.cdataTagName}St.prototype.parse=function(t){return this.j2x(t,0).val},St.prototype.j2x=function(t,e){let n="",r="";const o=Object.keys(t),i=o.length;for(let s=0;s<i;s++){const i=o[s];if(void 0===t[i]);else if(null===t[i])r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)r+=this.buildTextNode(t[i],i,"",e);else if("object"!=typeof t[i]){const o=this.isAttribute(i);o?n+=" "+o+'="'+this.options.attrValueProcessor(""+t[i])+'"':this.isCDATA(i)?t[this.options.textNodeName]?r+=this.replaceCDATAstr(t[this.options.textNodeName],t[i]):r+=this.replaceCDATAstr("",t[i]):i===this.options.textNodeName?t[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+t[i])):r+=this.buildTextNode(t[i],i,"",e)}else if(Array.isArray(t[i]))if(this.isCDATA(i))r+=this.indentate(e),t[this.options.textNodeName]?r+=this.replaceCDATAarr(t[this.options.textNodeName],t[i]):r+=this.replaceCDATAarr("",t[i]);else{const n=t[i].length;for(let o=0;o<n;o++){const n=t[i][o];if(void 0===n);else if(null===n)r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if("object"==typeof n){const t=this.j2x(n,e+1);r+=this.buildObjNode(t.val,i,t.attrStr,e)}else r+=this.buildTextNode(n,i,"",e)}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const e=Object.keys(t[i]),r=e.length;for(let o=0;o<r;o++)n+=" "+e[o]+'="'+this.options.attrValueProcessor(""+t[i][e[o]])+'"'}else{const n=this.j2x(t[i],e+1);r+=this.buildObjNode(n.val,i,n.attrStr,e)}}return{attrStr:n,val:r}};var Rt=St,It=h(function(t,e){const n=z,r=R.buildOptions;e.parse=function(t,e){return e=r(e,n.defaultOptions,n.props),B.convertToJson(z.getTraversalObj(t,e),e)},e.convertTonimn=rt.convert2nimn,e.getTraversalObj=z.getTraversalObj,e.convertToJson=B.convertToJson,e.convertToJsonString=st.convertToJsonString,e.validate=vt,e.j2xParser=Rt,e.parseToNimn=function(t,n,r){return e.convertTonimn(e.getTraversalObj(t,r),n,r)}}),Bt=It.parse,Mt=(It.convertTonimn,It.getTraversalObj,It.convertToJson,It.convertToJsonString,It.validate,It.j2xParser,It.parseToNimn,h(function(t,e){!function(n){var r=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,i="object"==typeof f&&f;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var s,a,u=2147483647,c=36,l=1,h=26,p=38,d=700,m=72,g=128,y="-",v=/^xn--/,b=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=c-l,x=Math.floor,O=String.fromCharCode;function E(t){throw RangeError(A[t])}function C(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function N(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+C((t=t.replace(w,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function j(t){return C(t,function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=O(t)}).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function _(t,e,n){var r=0;for(t=n?x(t/d):t>>1,t+=x(t/e);t>S*h>>1;r+=c)t=x(t/S);return x(r+(S+1)*t/(t+p))}function R(t){var e,n,r,o,i,s,a,f,p,d,v,b=[],w=t.length,A=0,S=g,O=m;for((n=t.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),b.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=A,s=1,a=c;o>=w&&E("invalid-input"),((f=(v=t.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||f>x((u-A)/s))&&E("overflow"),A+=f*s,!(f<(p=a<=O?l:a>=O+h?h:a-O));a+=c)s>x(u/(d=c-p))&&E("overflow"),s*=d;O=_(A-i,e=b.length+1,0==i),x(A/e)>u-S&&E("overflow"),S+=x(A/e),A%=e,b.splice(A++,0,S)}return j(b)}function I(t){var e,n,r,o,i,s,a,f,p,d,v,b,w,A,S,C=[];for(b=(t=T(t)).length,e=g,n=0,i=m,s=0;s<b;++s)(v=t[s])<128&&C.push(O(v));for(r=o=C.length,o&&C.push(y);r<b;){for(a=u,s=0;s<b;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>x((u-n)/(w=r+1))&&E("overflow"),n+=(a-e)*w,e=a,s=0;s<b;++s)if((v=t[s])<e&&++n>u&&E("overflow"),v==e){for(f=n,p=c;!(f<(d=p<=i?l:p>=i+h?h:p-i));p+=c)S=f-d,A=c-d,C.push(O(P(d+S%A,0))),f=x(S/A);C.push(O(P(f,0))),i=_(n,w,r==o),n=0,++r}++n,++e}return C.join("")}if(s={version:"1.3.2",ucs2:{decode:T,encode:j},decode:R,encode:I,toASCII:function(t){return N(t,function(t){return b.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return N(t,function(t){return v.test(t)?R(t.slice(4).toLowerCase()):t})}},r&&o)if(t.exports==r)o.exports=s;else for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);else n.punycode=s}(f)})),Ut={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function kt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Lt=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,l,f,h,p=t[u].replace(i,"%20"),d=p.indexOf(n);d>=0?(c=p.substr(0,d),l=p.substr(d+1)):(c=p,l=""),f=decodeURIComponent(c),h=decodeURIComponent(l),kt(o,f)?Array.isArray(o[f])?o[f].push(h):o[f]=[o[f],h]:o[f]=h}return o},$t=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Dt=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var o=encodeURIComponent($t(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return o+encodeURIComponent($t(t))}).join(e):o+encodeURIComponent($t(t[r]))}).join(e):r?encodeURIComponent($t(r))+n+encodeURIComponent($t(t)):""},Ft=h(function(t,e){e.decode=e.parse=Lt,e.encode=e.stringify=Dt}),Gt=(Ft.decode,Ft.parse,Ft.encode,Ft.stringify,se),Vt=function(t,e){return se(t,!1,!0).resolve(e)},qt=function(t,e){return t?se(t,!1,!0).resolveObject(e):e},Ht=function(t){Ut.isString(t)&&(t=se(t));return t instanceof Jt?t.format():Jt.prototype.format.call(t)},Kt=Jt;function Jt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var zt=/^([a-z0-9.+-]+:)/i,Zt=/:[0-9]*$/,Yt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Wt=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Qt=["'"].concat(Wt),Xt=["%","/","?",";","#"].concat(Qt),te=["/","?","#"],ee=/^[+a-z0-9A-Z_-]{0,63}$/,ne=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,re={javascript:!0,"javascript:":!0},oe={javascript:!0,"javascript:":!0},ie={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function se(t,e,n){if(t&&Ut.isObject(t)&&t instanceof Jt)return t;var r=new Jt;return r.parse(t,e,n),r}Jt.prototype.parse=function(t,e,n){if(!Ut.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var s=t=i.join(o);if(s=s.trim(),!n&&1===t.split("#").length){var a=Yt.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Ft.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=zt.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(n||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&oe[u]||(s=s.substr(2),this.slashes=!0)}if(!oe[u]&&(l||u&&!ie[u])){for(var f,h,p=-1,d=0;d<te.length;d++){-1!==(m=s.indexOf(te[d]))&&(-1===p||m<p)&&(p=m)}-1!==(h=-1===p?s.lastIndexOf("@"):s.lastIndexOf("@",p))&&(f=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(f)),p=-1;for(d=0;d<Xt.length;d++){var m;-1!==(m=s.indexOf(Xt[d]))&&(-1===p||m<p)&&(p=m)}-1===p&&(p=s.length),this.host=s.slice(0,p),s=s.slice(p),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),v=(d=0,y.length);d<v;d++){var b=y[d];if(b&&!b.match(ee)){for(var w="",A=0,S=b.length;A<S;A++)b.charCodeAt(A)>127?w+="x":w+=b[A];if(!w.match(ee)){var x=y.slice(0,d),O=y.slice(d+1),E=b.match(ne);E&&(x.push(E[1]),O.unshift(E[2])),O.length&&(s="/"+O.join(".")+s),this.hostname=x.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=Mt.toASCII(this.hostname));var C=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!re[c])for(d=0,v=Qt.length;d<v;d++){var T=Qt[d];if(-1!==s.indexOf(T)){var j=encodeURIComponent(T);j===T&&(j=escape(T)),s=s.split(T).join(j)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var _=s.indexOf("?");if(-1!==_?(this.search=s.substr(_),this.query=s.substr(_+1),e&&(this.query=Ft.parse(this.query)),s=s.slice(0,_)):e&&(this.search="",this.query={}),s&&(this.pathname=s),ie[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var R=this.search||"";this.path=C+R}return this.href=this.format(),this},Jt.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Ut.isObject(this.query)&&Object.keys(this.query).length&&(i=Ft.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||ie[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},Jt.prototype.resolve=function(t){return this.resolveObject(se(t,!1,!0)).format()},Jt.prototype.resolveObject=function(t){if(Ut.isString(t)){var e=new Jt;e.parse(t,!1,!0),t=e}for(var n=new Jt,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(n[u]=t[u])}return ie[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!ie[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var f=c[l];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||oe[t.protocol])n.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",d=n.search||"";n.path=p+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||m||n.host&&t.pathname,v=y,b=n.pathname&&n.pathname.split("/")||[],w=(h=t.pathname&&t.pathname.split("/")||[],n.protocol&&!ie[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),y=y&&(""===h[0]||""===b[0])),g)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,b=h;else if(h.length)b||(b=[]),b.pop(),b=b.concat(h),n.search=t.search,n.query=t.query;else if(!Ut.isNullOrUndefined(t.search)){if(w)n.hostname=n.host=b.shift(),(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift());return n.search=t.search,n.query=t.query,Ut.isNull(n.pathname)&&Ut.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=b.slice(-1)[0],S=(n.host||t.host||b.length>1)&&("."===A||".."===A)||""===A,x=0,O=b.length;O>=0;O--)"."===(A=b[O])?b.splice(O,1):".."===A?(b.splice(O,1),x++):x&&(b.splice(O,1),x--);if(!y&&!v)for(;x--;x)b.unshift("..");!y||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),S&&"/"!==b.join("/").substr(-1)&&b.push("");var E,C=""===b[0]||b[0]&&"/"===b[0].charAt(0);w&&(n.hostname=n.host=C?"":b.length?b.shift():"",(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift()));return(y=y||n.host&&b.length)&&!C&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),Ut.isNull(n.pathname)&&Ut.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},Jt.prototype.parseHost=function(){var t=this.host,e=Zt.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var ae={parse:Gt,resolve:Vt,resolveObject:qt,format:Ht,Url:Kt};const ue=t.Readable,ce=Symbol("buffer"),le=Symbol("type");class fe{constructor(){this[le]="";const t=arguments[0],e=arguments[1],n=[];let r=0;if(t){const e=t,o=Number(e.length);for(let t=0;t<o;t++){const o=e[t];let i;r+=(i=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof fe?o[ce]:Buffer.from("string"==typeof o?o:String(o))).length,n.push(i)}}this[ce]=Buffer.concat(n);let o=e&&void 0!==e.type&&String(e.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[le]=o)}get size(){return this[ce].length}get type(){return this[le]}text(){return Promise.resolve(this[ce].toString())}arrayBuffer(){const t=this[ce],e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return Promise.resolve(e)}stream(){const t=new ue;return t._read=function(){},t.push(this[ce]),t.push(null),t}toString(){return"[object Blob]"}slice(){const t=this.size,e=arguments[0],n=arguments[1];let r,o;r=void 0===e?0:e<0?Math.max(t+e,0):Math.min(e,t),o=void 0===n?t:n<0?Math.max(t+n,0):Math.min(n,t);const i=Math.max(o-r,0),s=this[ce].slice(r,r+i),a=new fe([],{type:arguments[2]});return a[ce]=s,a}}function he(t,e,n){Error.call(this,t),this.message=t,this.type=e,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let pe;Object.defineProperties(fe.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(fe.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he.prototype.name="FetchError";try{pe=require("encoding").convert}catch(i){}const de=Symbol("Body internals"),me=t.PassThrough;function ge(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size;let i=void 0===o?0:o;var s=r.timeout;let a=void 0===s?0:s;null==e?e=null:ve(e)?e=Buffer.from(e.toString()):be(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof t||(e=Buffer.from(String(e)))),this[de]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=a,e instanceof t&&e.on("error",function(t){const e="AbortError"===t.name?t:new he(`Invalid response body while trying to fetch ${n.url}: ${t.message}`,"system",t);n[de].error=e})}function ye(){var e=this;if(this[de].disturbed)return ge.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[de].disturbed=!0,this[de].error)return ge.Promise.reject(this[de].error);let n=this.body;if(null===n)return ge.Promise.resolve(Buffer.alloc(0));if(be(n)&&(n=n.stream()),Buffer.isBuffer(n))return ge.Promise.resolve(n);if(!(n instanceof t))return ge.Promise.resolve(Buffer.alloc(0));let r=[],o=0,i=!1;return new ge.Promise(function(t,s){let a;e.timeout&&(a=setTimeout(function(){i=!0,s(new he(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),n.on("error",function(t){"AbortError"===t.name?(i=!0,s(t)):s(new he(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))}),n.on("data",function(t){if(!i&&null!==t){if(e.size&&o+t.length>e.size)return i=!0,void s(new he(`content size at ${e.url} over limit: ${e.size}`,"max-size"));o+=t.length,r.push(t)}}),n.on("end",function(){if(!i){clearTimeout(a);try{t(Buffer.concat(r,o))}catch(t){s(new he(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}})})}function ve(t){return"object"==typeof t&&"function"==typeof t.append&&"function"==typeof t.delete&&"function"==typeof t.get&&"function"==typeof t.getAll&&"function"==typeof t.has&&"function"==typeof t.set&&("URLSearchParams"===t.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(t)||"function"==typeof t.sort)}function be(t){return"object"==typeof t&&"function"==typeof t.arrayBuffer&&"string"==typeof t.type&&"function"==typeof t.stream&&"function"==typeof t.constructor&&"string"==typeof t.constructor.name&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function we(e){let n,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof t&&"function"!=typeof o.getBoundary&&(n=new me,r=new me,o.pipe(n),o.pipe(r),e[de].body=n,o=r),o}function Ae(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":ve(e)?"application/x-www-form-urlencoded;charset=UTF-8":be(e)?e.type||null:Buffer.isBuffer(e)?null:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?null:ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof t?null:"text/plain;charset=UTF-8"}function Se(t){const e=t.body;return null===e?0:be(e)?e.size:Buffer.isBuffer(e)?e.length:e&&"function"==typeof e.getLengthSync&&(e._lengthRetrievers&&0==e._lengthRetrievers.length||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}ge.prototype={get body(){return this[de].body},get bodyUsed(){return this[de].disturbed},arrayBuffer(){return ye.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return ye.call(this).then(function(e){return Object.assign(new fe([],{type:t.toLowerCase()}),{[ce]:e})})},json(){var t=this;return ye.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(e){return ge.Promise.reject(new he(`invalid json response body at ${t.url} reason: ${e.message}`,"invalid-json"))}})},text(){return ye.call(this).then(function(t){return t.toString()})},buffer(){return ye.call(this)},textConverted(){var t=this;return ye.call(this).then(function(e){return function(t,e){if("function"!=typeof pe)throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=e.get("content-type");let r,o,i="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));o=t.slice(0,1024).toString(),!r&&o&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!r&&o&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o))&&(r=/charset=(.*)/i.exec(r.pop()));!r&&o&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));r&&("gb2312"!==(i=r.pop())&&"gbk"!==i||(i="gb18030"));return pe(t,"UTF-8",i).toString()}(e,t.headers)})}},Object.defineProperties(ge.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),ge.mixIn=function(t){for(const e of Object.getOwnPropertyNames(ge.prototype))if(!(e in t)){const n=Object.getOwnPropertyDescriptor(ge.prototype,e);Object.defineProperty(t,e,n)}},ge.Promise=global.Promise;const xe=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Oe=/[^\t\x20-\x7e\x80-\xff]/;function Ee(t){if(t=`${t}`,xe.test(t)||""===t)throw new TypeError(`${t} is not a legal HTTP header name`)}function Ce(t){if(t=`${t}`,Oe.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function Ne(t,e){e=e.toLowerCase();for(const n in t)if(n.toLowerCase()===e)return n}const Te=Symbol("map");class je{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[Te]=Object.create(null),t instanceof je){const e=t.raw(),n=Object.keys(e);for(const t of n)for(const n of e[t])this.append(t,n)}else if(null==t);else{if("object"!=typeof t)throw new TypeError("Provided initializer must be an object");{const e=t[Symbol.iterator];if(null!=e){if("function"!=typeof e)throw new TypeError("Header pairs must be iterable");const n=[];for(const e of t){if("object"!=typeof e||"function"!=typeof e[Symbol.iterator])throw new TypeError("Each header pair must be iterable");n.push(Array.from(e))}for(const t of n){if(2!==t.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(t[0],t[1])}}else for(const e of Object.keys(t)){const n=t[e];this.append(e,n)}}}}get(t){Ee(t=`${t}`);const e=Ne(this[Te],t);return void 0===e?null:this[Te][e].join(", ")}forEach(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Pe(this),r=0;for(;r<n.length;){var o=n[r];const i=o[0],s=o[1];t.call(e,s,i,this),n=Pe(this),r++}}set(t,e){e=`${e}`,Ee(t=`${t}`),Ce(e);const n=Ne(this[Te],t);this[Te][void 0!==n?n:t]=[e]}append(t,e){e=`${e}`,Ee(t=`${t}`),Ce(e);const n=Ne(this[Te],t);void 0!==n?this[Te][n].push(e):this[Te][t]=[e]}has(t){return Ee(t=`${t}`),void 0!==Ne(this[Te],t)}delete(t){Ee(t=`${t}`);const e=Ne(this[Te],t);void 0!==e&&delete this[Te][e]}raw(){return this[Te]}keys(){return Re(this,"key")}values(){return Re(this,"value")}[Symbol.iterator](){return Re(this,"key+value")}}function Pe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(t[Te]).sort().map("key"===e?function(t){return t.toLowerCase()}:"value"===e?function(e){return t[Te][e].join(", ")}:function(e){return[e.toLowerCase(),t[Te][e].join(", ")]})}je.prototype.entries=je.prototype[Symbol.iterator],Object.defineProperty(je.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(je.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const _e=Symbol("internal");function Re(t,e){const n=Object.create(Ie);return n[_e]={target:t,kind:e,index:0},n}const Ie=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Ie)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[_e];const e=t.target,n=t.kind,r=t.index,o=Pe(e,n);return r>=o.length?{value:void 0,done:!0}:(this[_e].index=r+1,{value:o[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function Be(t){const e=Object.assign({__proto__:null},t[Te]),n=Ne(t[Te],"Host");return void 0!==n&&(e[n]=e[n][0]),e}Object.defineProperty(Ie,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const Me=Symbol("Response internals"),Ue=e.STATUS_CODES;class ke{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ge.call(this,t,e);const n=e.status||200,r=new je(e.headers);if(null!=t&&!r.has("Content-Type")){const e=Ae(t);e&&r.append("Content-Type",e)}this[Me]={url:e.url,status:n,statusText:e.statusText||Ue[n],headers:r,counter:e.counter}}get url(){return this[Me].url||""}get status(){return this[Me].status}get ok(){return this[Me].status>=200&&this[Me].status<300}get redirected(){return this[Me].counter>0}get statusText(){return this[Me].statusText}get headers(){return this[Me].headers}clone(){return new ke(we(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}ge.mixIn(ke.prototype),Object.defineProperties(ke.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(ke.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const Le=Symbol("Request internals"),$e=ae.parse,De=ae.format,Fe="destroy"in t.Readable.prototype;function Ge(t){return"object"==typeof t&&"object"==typeof t[Le]}class Ve{constructor(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ge(t)?e=$e(t.url):(e=t&&t.href?$e(t.href):$e(`${t}`),t={});let r=n.method||t.method||"GET";if(r=r.toUpperCase(),(null!=n.body||Ge(t)&&null!==t.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=n.body?n.body:Ge(t)&&null!==t.body?we(t):null;ge.call(this,o,{timeout:n.timeout||t.timeout||0,size:n.size||t.size||0});const i=new je(n.headers||t.headers||{});if(null!=o&&!i.has("Content-Type")){const t=Ae(o);t&&i.append("Content-Type",t)}let s=Ge(t)?t.signal:null;if("signal"in n&&(s=n.signal),null!=s&&!function(t){const e=t&&"object"==typeof t&&Object.getPrototypeOf(t);return!(!e||"AbortSignal"!==e.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Le]={method:r,redirect:n.redirect||t.redirect||"follow",headers:i,parsedURL:e,signal:s},this.follow=void 0!==n.follow?n.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===t.compress||t.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent}get method(){return this[Le].method}get url(){return De(this[Le].parsedURL)}get headers(){return this[Le].headers}get redirect(){return this[Le].redirect}get signal(){return this[Le].signal}clone(){return new Ve(this)}}function qe(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}ge.mixIn(Ve.prototype),Object.defineProperty(Ve.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Ve.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),qe.prototype=Object.create(Error.prototype),qe.prototype.constructor=qe,qe.prototype.name="AbortError";const He=t.PassThrough,Ke=ae.resolve;function Je(o,i){if(!Je.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return ge.Promise=Je.Promise,new Je.Promise(function(s,a){const u=new Ve(o,i),c=function(e){const n=e[Le].parsedURL,r=new je(e[Le].headers);if(r.has("Accept")||r.set("Accept","*/*"),!n.protocol||!n.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(n.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof t.Readable&&!Fe)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(o="0"),null!=e.body){const t=Se(e);"number"==typeof t&&(o=String(t))}o&&r.set("Content-Length",o),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(n)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},n,{method:e.method,headers:Be(r),agent:i})}(u),l=("https:"===c.protocol?n:e).request,f=u.signal;let h=null;const p=function(){let e=new qe("The user aborted a request.");a(e),u.body&&u.body instanceof t.Readable&&u.body.destroy(e),h&&h.body&&h.body.emit("error",e)};if(f&&f.aborted)return void p();const d=function(){p(),y()},m=l(c);let g;function y(){m.abort(),f&&f.removeEventListener("abort",d),clearTimeout(g)}f&&f.addEventListener("abort",d),u.timeout&&m.once("socket",function(t){g=setTimeout(function(){a(new he(`network timeout at: ${u.url}`,"request-timeout")),y()},u.timeout)}),m.on("error",function(t){a(new he(`request to ${u.url} failed, reason: ${t.message}`,"system",t)),y()}),m.on("response",function(t){clearTimeout(g);const e=function(t){const e=new je;for(const n of Object.keys(t))if(!xe.test(n))if(Array.isArray(t[n]))for(const r of t[n])Oe.test(r)||(void 0===e[Te][n]?e[Te][n]=[r]:e[Te][n].push(r));else Oe.test(t[n])||(e[Te][n]=[t[n]]);return e}(t.headers);if(Je.isRedirect(t.statusCode)){const n=e.get("Location"),r=null===n?null:Ke(u.url,n);switch(u.redirect){case"error":return a(new he(`redirect mode is set to error: ${u.url}`,"no-redirect")),void y();case"manual":if(null!==r)try{e.set("Location",r)}catch(t){a(t)}break;case"follow":if(null===r)break;if(u.counter>=u.follow)return a(new he(`maximum redirect reached at: ${u.url}`,"max-redirect")),void y();const n={headers:new je(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:u.body,signal:u.signal,timeout:u.timeout};return 303!==t.statusCode&&u.body&&null===Se(u)?(a(new he("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void y()):(303!==t.statusCode&&(301!==t.statusCode&&302!==t.statusCode||"POST"!==u.method)||(n.method="GET",n.body=void 0,n.headers.delete("content-length")),s(Je(new Ve(r,n))),void y())}}t.once("end",function(){f&&f.removeEventListener("abort",d)});let n=t.pipe(new He);const o={url:u.url,status:t.statusCode,statusText:t.statusMessage,headers:e,size:u.size,timeout:u.timeout,counter:u.counter},i=e.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===i||204===t.statusCode||304===t.statusCode)return h=new ke(n,o),void s(h);const c={flush:r.Z_SYNC_FLUSH,finishFlush:r.Z_SYNC_FLUSH};if("gzip"==i||"x-gzip"==i)return n=n.pipe(r.createGunzip(c)),h=new ke(n,o),void s(h);if("deflate"!=i&&"x-deflate"!=i){if("br"==i&&"function"==typeof r.createBrotliDecompress)return n=n.pipe(r.createBrotliDecompress()),h=new ke(n,o),void s(h);h=new ke(n,o),s(h)}else{t.pipe(new He).once("data",function(t){n=8==(15&t[0])?n.pipe(r.createInflate()):n.pipe(r.createInflateRaw()),h=new ke(n,o),s(h)})}}),function(t,e){const n=e.body;null===n?t.end():be(n)?n.stream().pipe(t):Buffer.isBuffer(n)?(t.write(n),t.end()):n.pipe(t)}(m,u)})}Je.isRedirect=function(t){return 301===t||302===t||303===t||307===t||308===t},Je.Promise=global.Promise;var ze,Ze={system:"platform:Nintendo Switch",sort:"title",direction:"asc"},Ye="U3B6GR4UA3",We="9a20c93440cf63cf1a7008d75f7438bf",Qe="https://U3B6GR4UA3-dsn.algolia.net/1/indexes/*/queries",Xe="70010000000185",tn=/HAC\w(\w{4})/,en=200,nn=["Free to start","$0 - $4.99","$5 - $9.99","$10 - $19.99","$20 - $39.99","$40+"],rn={fq:"type:GAME AND system_type:nintendoswitch* AND product_code_txt:*",q:"*",sort:"sorting_title asc",start:"0",wt:"json"},on="http://search.nintendo-europe.com/{locale}/select",sn="70010000000184",an=/HAC\w(\w{4})/,un="en",cn=9999,ln="https://www.nintendo.co.jp/data/software/xml-system/switch-onsale.xml",fn="https://www.nintendo.co.jp/data/software/xml-system/switch-coming.xml",hn="70010000000039",pn=/\/HAC(\w{4})/,dn=/\d{14}/,mn="https://api.ec.nintendo.com/v1/price",gn={lang:"en"},yn=50,vn=function(t){function e(e){var n=t.call(this,e)||this;return n.message=e,n.name="EshopError",n.stack="",n}return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);!function(t){t[t.AMERICAS=1]="AMERICAS",t[t.EUROPE=2]="EUROPE",t[t.ASIA=3]="ASIA"}(ze||(ze={}));var bn=function(t,e){var n=[];return t.filter(function(t){var r=e?t[e]:t;return!n.includes(r)&&n.push(r)})},wn=function(t,e){return t&&e in t},An=function(t,e,n){return void 0===t&&(t={}),void 0===e&&(e=0),void 0===n&&(n=[]),a(void 0,void 0,void 0,function(){var r,o,i,s,c,f,h,p,d,m,g,y,v,b,w,A,S,x,O=this;return u(this,function(E){switch(E.label){case 0:r=wn(t,"limit")?t.limit:200,o=wn(t,"shop")?t.shop:"ncom",i="unfiltered"===(i="all"===o?["ncom","retail"]:o)?void 0:i,s=Math.floor(e/r),c=function(t){switch(t){case"ncom":return"filterShops:On Nintendo.com";case"retail":return"filterShops:On retail";default:return""}},f=[""],i&&(C=i,f=Array.isArray(C)?i.map(function(t){return c(t)}):c(i)),h={direction:Ze.direction,sortBy:Ze.sort},p={body:JSON.stringify({requests:[{indexName:"noa_aem_game_en_us"+(h.sortBy&&h.direction?"_"+h.sortBy+"_"+h.direction:""),params:l({facetFilters:[[Ze.system],f],hitsPerPage:r,page:s})}]}),headers:{"Content-Type":"application/json"},method:"post"},E.label=1;case 1:return E.trys.push([1,10,,11]),wn(t,"limit")?[4,Je(Qe+"?"+l({"x-algolia-api-key":We,"x-algolia-application-id":"U3B6GR4UA3"}),p)]:[3,6];case 2:if(!(d=E.sent()).ok)throw new Error("US_games_request_failed");return[4,d.json()];case 3:return m=E.sent(),g=bn(n.concat(m.results[0].hits),"slug"),!wn(t,"limit")&&m.results[0].hits.length+e<m.results[0].nbHits?[4,An(t,e+r,g)]:[3,5];case 4:return[2,E.sent()];case 5:return[2,g];case 6:return y={body:JSON.stringify({requests:[{indexName:"noa_aem_game_en_us",params:l({facetFilters:[[Ze.system],f],facets:["categories"],hitsPerPage:0})}]}),headers:{"Content-Type":"application/json"},method:"post"},[4,Je(Qe+"?"+l({"x-algolia-api-key":We,"x-algolia-application-id":"U3B6GR4UA3"}),y)];case 7:if(!(v=E.sent()).ok)throw new Error("US_games_request_failed");return[4,v.json()];case 8:return b=E.sent(),w=b.results[0].facets.categories,A=Object.entries(w).map(function(t){var e=t[0],n=t[1];return a(O,void 0,void 0,function(){var t,r,o,i,s;return u(this,function(a){switch(a.label){case 0:return t=[{indexName:"noa_aem_game_en_us",params:l({facetFilters:JSON.stringify([[Ze.system],["categories:"+e],f]),hitsPerPage:1e3})}],r=nn.map(function(t){return{indexName:"noa_aem_game_en_us",params:l({facetFilters:JSON.stringify([[Ze.system],["categories:"+e],["priceRange:"+t],f]),facets:["platform","categories"],hitsPerPage:1e3})}}),o={body:JSON.stringify({requests:n>1e3?r:t}),headers:{"Content-Type":"application/json"},method:"post"},[4,Je(Qe+"?"+l({"x-algolia-api-key":We,"x-algolia-application-id":"U3B6GR4UA3"}),o)];case 1:if(!(i=a.sent()).ok)throw new Error("US_games_request_failed");return[4,i.json()];case 2:return s=a.sent(),[2,n>1e3?s.results.map(function(t){return t.hits}).reduce(function(t,e){return t.concat(e,[])}):s.results[0].hits]}})})}),[4,Promise.all(A)];case 9:return S=E.sent().reduce(function(t,e){return t.concat(e,[])}),[2,S=bn(S,"slug")];case 10:if(x=E.sent(),/(?:US_games_request_failed)/i.test(x.toString()))throw new vn("Fetching of US Games failed");throw x;case 11:return[2]}var C})})},Sn=function(){return a(void 0,void 0,void 0,function(){var t,e,n,r,o,i,s,a,c;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),[4,Je(ln)];case 1:return t=u.sent(),[4,Je(fn)];case 2:if(e=u.sent(),!t.ok)throw new Error("JP_current_games_US_games_request_failed");if(!e.ok)throw new Error("JP_coming_games_US_games_request_failed");return r=Bt,[4,t.text()];case 3:return n=r.apply(void 0,[u.sent()]),i=Bt,[4,e.text()];case 4:return o=i.apply(void 0,[u.sent()]),s=n.TitleInfoList.TitleInfo,a=o.TitleInfoList.TitleInfo,[2,s.concat(a)];case 5:if(c=u.sent(),/(?:JP_current_games_US_games_request_failed)/i.test(c.toString()))throw new vn("Fetching of Current JP Games failed");if(/(?:JP_coming_games_US_games_request_failed)/i.test(c.toString()))throw new vn("Fetching of Upcoming JP Games failed");throw c;case 6:return[2]}})})},xn=function(t){return void 0===t&&(t={limit:9999,locale:"en"}),a(void 0,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:t.limit||(t.limit=9999),t.locale||(t.locale="en"),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,Je(on.replace("{locale}",t.locale)+"?"+l(s({rows:t.limit},rn)))];case 2:if(!(e=r.sent()).ok)throw new Error("EU_games_request_failed");return[4,e.json()];case 3:return[2,r.sent().response.docs];case 4:if(n=r.sent(),/(?:EU_games_request_failed)/i.test(n.toString()))throw new vn("Fetching of EU Games failed");throw n;case 5:return[2]}})})},On=function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=[]),a(void 0,void 0,void 0,function(){var o,i,a,c,f;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),o=e.slice(n,n+50),[4,Je("https://api.ec.nintendo.com/v1/price?"+l(s({country:t,ids:o,limit:50},gn)))];case 1:if(403===(i=u.sent()).status)throw new Error("PRICE_Rate_Limit");if(!i.ok)throw new Error("PRICE_get_request_failed");return[4,i.json()];case 2:return(a=u.sent()).prices&&a.prices.length+n<e.length?(c=r.concat(a.prices),[4,On(t,e,n+50,c)]):[3,4];case 3:return[2,u.sent()];case 4:if(a.prices)return a.prices=a.prices.concat(r),[2,a];u.label=5;case 5:return[2,a];case 6:if(f=u.sent(),/(?:PRICE_Rate_Limit)/i.test(f.toString()))throw new vn("Looks like you ran into a rate limit while getting price data, please do not spam the Nintendo servers.");if(/(?:PRICE_get_request_failed)/i.test(f.toString()))throw new vn("Fetching of eShop prices failed");throw f;case 7:return[2]}})})},En=function(t,e,n){return a(void 0,void 0,void 0,function(){var r,o,i,s,a,c,l,f,h;return u(this,function(u){switch(u.label){case 0:u.trys.push([0,7,,8]),r=t.map(function(t){return _.all.filter(function(e){return e.alpha2===t})[0]}),o=[],i=0,s=r,u.label=1;case 1:if(!(i<s.length))return[3,6];a=s[i],u.label=2;case 2:return u.trys.push([2,4,,5]),[4,On(a.alpha2,e)];case 3:return(c=u.sent()).country=a,o.push(c),[3,5];case 4:return u.sent(),[3,5];case 5:return i++,[3,1];case 6:if(l=o.filter(function(t){return t&&t.prices&&t.prices.length&&t.prices[0].regular_price}),!(f=l.map(function(t){return{code:t.country.alpha2,country:t.country.name,currency:t.prices[0].regular_price.currency,region:n}})).length)throw new Error("ACTIVE_SHOPS_Rate_Limit");return[2,f];case 7:if(h=u.sent(),/(?:ACTIVE_SHOPS_Rate_Limit)/i.test(h.toString()))throw new vn("Looks like you ran into a rate limit while getting price data, please do not spam the Nintendo servers.");throw h;case 8:return[2]}})})},Cn=function(){return a(void 0,void 0,void 0,function(){return u(this,function(t){return[2,En(P.southAmerica.countries.concat(P.centralAfrica.countries,P.northernAmerica.countries),"70010000000185",ze.AMERICAS)]})})},Nn=function(){return a(void 0,void 0,void 0,function(){return u(this,function(t){return[2,En(P.northernEurope.countries.concat(P.southernEurope.countries,P.easternEurope.countries,P.westernEurope.countries,P.australia.countries,P.southernAfrica.countries),"70010000000184",ze.EUROPE)]})})},Tn=function(){return a(void 0,void 0,void 0,function(){return u(this,function(t){return[2,En(P.southernAsia.countries.concat(P.southernAsia.countries,P.southeastAsia.countries,P.eastAsia.countries,P.westernAsia.countries),"70010000000039",ze.ASIA)]})})},jn=function(){return a(void 0,void 0,void 0,function(){var t,e,n;return u(this,function(r){switch(r.label){case 0:return[4,Cn()];case 1:return t=r.sent(),[4,Tn()];case 2:return e=r.sent(),[4,Nn()];case 3:return n=r.sent(),[2,t.concat(e,n)]}})})},Pn=function(t,e){var n;switch(e){case ze.EUROPE:n=an.exec(t.product_code_txt[0]);break;case ze.ASIA:n=pn.exec(t.ScreenshotImgURL[0]);break;default:case ze.AMERICAS:n=tn.exec(t.game_code)}return n&&n.length>1?n[1]:null},_n=function(t,e){switch(e){case ze.EUROPE:return t.nsuid_txt?t.nsuid_txt[0]:null;case ze.ASIA:var n=dn.exec(t.LinkURL[0]);return n&&n.length>0?n[0]:null;default:case ze.AMERICAS:return t.nsuid}};export default An;export{un as EU_DEFAULT_LOCALE,sn as EU_GAME_CHECK_CODE,an as EU_GAME_CODE_REGEX,cn as EU_GAME_LIST_LIMIT,rn as EU_GET_GAMES_OPTIONS,on as EU_GET_GAMES_URL,vn as EshopError,hn as JP_GAME_CHECK_CODE,pn as JP_GAME_CODE_REGEX,fn as JP_GET_GAMES_COMING,ln as JP_GET_GAMES_CURRENT,dn as JP_NSUID_REGEX,gn as PRICE_GET_OPTIONS,mn as PRICE_GET_URL,yn as PRICE_LIST_LIMIT,ze as Region,Ye as US_ALGOLIA_ID,We as US_ALGOLIA_KEY,Xe as US_GAME_CHECK_CODE,tn as US_GAME_CODE_REGEX,en as US_GAME_LIST_LIMIT,Ze as US_GET_GAMES_OPTIONS,Qe as US_GET_GAMES_URL,nn as US_PRICE_RANGES,jn as getActiveShops,An as getGamesAmerica,xn as getGamesEurope,Sn as getGamesJapan,On as getPrices,Cn as getShopsAmerica,Tn as getShopsAsia,En as getShopsByCountryCodes,Nn as getShopsEurope,Pn as parseGameCode,_n as parseNSUID};
//# sourceMappingURL=index.es.js.map
