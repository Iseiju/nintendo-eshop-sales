{"version":3,"file":"index.es.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@favware/querystring/dist/index.es.js","../node_modules/underscore/underscore.js","../node_modules/country-data/data/regions.js","../node_modules/country-data/data/continents.js","../node_modules/country-data/lookup.js","../node_modules/currency-symbol-map/map.js","../node_modules/currency-symbol-map/currency-symbol-map.js","../node_modules/country-data/index.js","../node_modules/fast-xml-parser/src/util.js","../node_modules/fast-xml-parser/src/node2json.js","../node_modules/fast-xml-parser/src/xmlNode.js","../node_modules/fast-xml-parser/src/xmlstr2xmlnode.js","../node_modules/fast-xml-parser/src/nimndata.js","../node_modules/fast-xml-parser/src/node2json_str.js","../node_modules/fast-xml-parser/src/validator.js","../node_modules/fast-xml-parser/src/json2xml.js","../node_modules/fast-xml-parser/src/parser.js","../../node_modules/url/node_modules/punycode/punycode.js","../../node_modules/url/util.js","../../node_modules/querystring/decode.js","../../node_modules/querystring/encode.js","../../node_modules/querystring/index.js","../../node_modules/url/url.js","../node_modules/node-fetch/lib/index.mjs","../src/interfaces.ts","../src/constants.ts","../src/nintendo-switch-eshop.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","var e;!function(e){e.Parse=\"parse\",e.Stringify=\"stringify\"}(e||(e={}));var t=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e.toString():\"\";default:return\"\"}},r=function(t,r){switch(r){case e.Parse:return{err:t};case e.Stringify:default:return t}},n=function(n,o){void 0===o&&(o={separator:\"&\",equals:\"=\",includeQuestion:!1});try{if(!n||Object.keys(n).length<=0)throw new Error(\"object_is_empty\");if(\"object\"!=typeof n)throw new Error(\"input_not_object\");o.separator||(o.separator=\"&\"),o.equals||(o.equals=\"=\"),o.includeQuestion||(o.includeQuestion=!1);var i=Object.keys(n).sort().map(function(e){var r=encodeURIComponent(t(e))+o.equals;return void 0===n[e]?\"\":null===n[e]?encodeURIComponent(e):Array.isArray(n[e])?n[e].map(function(e){return r+encodeURIComponent(t(e))}).join(o.separator):r+encodeURIComponent(t(n[e]))}).filter(Boolean);return o.includeQuestion&&(i[0]=\"?\"+i[0]),i.join(o.separator)}catch(i){return/object_is_empty/i.test(i.toString())?(o.includeQuestion?\"?\":\"\")+encodeURIComponent(t(n)):/input_not_object/i.test(i.toString())?r(\"@Favware/Querystring: Your input was not an object. Please supply an object when using Stringify\",e.Stringify):i}},o=function(t,n){void 0===t&&(t=\"\"),void 0===n&&(n={separator:\"&\",equals:\"=\"});try{if(\"string\"!=typeof t)throw new Error(\"input_not_string\");if(\"\"===t)return{};/^https?:\\/\\//.test(t)&&(t=t.split(\"?\")[1]),n.separator||(n.separator=\"&\"),n.equals||(n.equals=\"=\"),t.startsWith(\"?\")&&(t=t.slice(1));var o={},i=/\\+/g,s=t.split(n.separator),a=s.length;a>1e3&&(a=1e3);for(var u=0,p=s;u<p.length;u++){var c=p[u].replace(i,\"%20\"),l=c.indexOf(n.equals),f=void 0,d=void 0;l>=0?(f=c.substr(0,l),d=c.substr(l+1)):(f=c,d=\"\");var g=decodeURIComponent(f),y=decodeURIComponent(d);o.hasOwnProperty(g)?Array.isArray(o[g])?o[g].push(y):o[g]=[o[g],y]:o[g]=y}return o}catch(t){return/input_not_string/i.test(t.toString())?r(\"@Favware/Querystring: Your input was not an string. Please supply a string when using Parse\",e.Parse):t}};export default n;export{o as parse,n as stringify};\n//# sourceMappingURL=index.es.js.map\n","//     Underscore.js 1.6.0\n//     http://underscorejs.org\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    concat           = ArrayProto.concat,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeForEach      = ArrayProto.forEach,\n    nativeMap          = ArrayProto.map,\n    nativeReduce       = ArrayProto.reduce,\n    nativeReduceRight  = ArrayProto.reduceRight,\n    nativeFilter       = ArrayProto.filter,\n    nativeEvery        = ArrayProto.every,\n    nativeSome         = ArrayProto.some,\n    nativeIndexOf      = ArrayProto.indexOf,\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.6.0';\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function(obj, iterator, context) {\n    if (obj == null) return obj;\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, length = obj.length; i < length; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (var i = 0, length = keys.length; i < length; i++) {\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n    each(obj, function(value, index, list) {\n      results.push(iterator.call(context, value, index, list));\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function(value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function(value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var result;\n    any(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(predicate, context);\n    each(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, function(value, index, list) {\n      return !predicate.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = true;\n    if (obj == null) return result;\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(predicate, context);\n    each(obj, function(value, index, list) {\n      if (!(result = result && predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = false;\n    if (obj == null) return result;\n    if (nativeSome && obj.some === nativeSome) return obj.some(predicate, context);\n    each(obj, function(value, index, list) {\n      if (result || (result = predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function(obj, target) {\n    if (obj == null) return false;\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n    return any(obj, function(value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matches(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matches(attrs));\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n  _.max = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    var result = -Infinity, lastComputed = -Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed > lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    var result = Infinity, lastComputed = Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed < lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Shuffle an array, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function(value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (obj.length !== +obj.length) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function(value) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return value;\n    return _.property(value);\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function(obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iterator.call(context, value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iterator, context) {\n      var result = {};\n      iterator = lookupIterator(iterator);\n      each(obj, function(value, index) {\n        var key = iterator.call(context, value, index, obj);\n        behavior(result, key, value);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, key, value) {\n    _.has(result, key) ? result[key].push(value) : result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, key, value) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, key) {\n    _.has(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = (low + high) >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[0];\n    if (n < 0) return [];\n    return slice.call(array, 0, n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[array.length - 1];\n    return slice.call(array, Math.max(array.length - n, 0));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, (n == null) || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, output) {\n    if (shallow && _.every(input, _.isArray)) {\n      return concat.apply(output, input);\n    }\n    each(input, function(value) {\n      if (_.isArray(value) || _.isArguments(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Split an array into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(array, predicate) {\n    var pass = [], fail = [];\n    each(array, function(elem) {\n      (predicate(elem) ? pass : fail).push(elem);\n    });\n    return [pass, fail];\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function(value, index) {\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(_.flatten(arguments, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function(item) {\n      return _.every(rest, function(other) {\n        return _.contains(other, item);\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    var length = _.max(_.pluck(arguments, 'length').concat(0));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(arguments, '' + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    if (list == null) return {};\n    var result = {};\n    for (var i = 0, length = list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, length = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function(array, item, from) {\n    if (array == null) return -1;\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = (hasIndex ? from : array.length);\n    while (i--) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(length);\n\n    while(idx < length) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Reusable constructor function for prototype setting.\n  var ctor = function(){};\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError;\n    args = slice.call(arguments, 2);\n    return bound = function() {\n      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\n      ctor.prototype = func.prototype;\n      var self = new ctor;\n      ctor.prototype = null;\n      var result = func.apply(self, args.concat(slice.call(arguments)));\n      if (Object(result) === result) return result;\n      return self;\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    return function() {\n      var position = 0;\n      var args = boundArgs.slice();\n      for (var i = 0, length = args.length; i < length; i++) {\n        if (args[i] === _) args[i] = arguments[position++];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return func.apply(this, args);\n    };\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) throw new Error('bindAll must be passed function names');\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function() {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function(func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    options || (options = {});\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n      if (last < wait) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function(func) {\n    var ran = false, memo;\n    return function() {\n      if (ran) return memo;\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = new Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = new Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function(key) {\n      if (key in obj) copy[key] = obj[key];\n    });\n    return copy;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) copy[key] = obj[key];\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] === void 0) obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source &&\n               a.global == b.global &&\n               a.multiline == b.multiline &&\n               a.ignoreCase == b.ignoreCase;\n    }\n    if (typeof a != 'object' || typeof b != 'object') return false;\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) return bStack[length] == b;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\n                             _.isFunction(bCtor) && (bCtor instanceof bCtor))\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0, result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\n        }\n      }\n    } else {\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !(size--)) break;\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n    for (var key in obj) if (_.has(obj, key)) return false;\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (typeof (/./) !== 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function(value) {\n    return value;\n  };\n\n  _.constant = function(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  _.property = function(key) {\n    return function(obj) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of `key:value` pairs.\n  _.matches = function(attrs) {\n    return function(obj) {\n      if (obj === attrs) return true; //avoid comparing an object to itself.\n      for (var key in attrs) {\n        if (attrs[key] !== obj[key])\n          return false;\n      }\n      return true;\n    }\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iterator, context) {\n    var accum = Array(Math.max(0, n));\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() { return new Date().getTime(); };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function(method) {\n    _[method] = function(string) {\n      if (string == null) return '';\n      return ('' + string).replace(entityRegexes[method], function(match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property) {\n    if (object == null) return void 0;\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\t':     't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function(text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset)\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      }\n      if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      }\n      if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + \"return __p;\\n\";\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, _);\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function(obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n\n    // Start chaining a wrapped Underscore object.\n    chain: function() {\n      this._chain = true;\n      return this;\n    },\n\n    // Extracts the result from a wrapped and chained object.\n    value: function() {\n      return this._wrapped;\n    }\n\n  });\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}).call(this);\n","'use strict';\n\nvar regions = {};\n\nregions.centralAsia = {\n  name: 'Central Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Central_Asia\n    'KZ', // Kazakhstan\n    'KG', // Kyrgyzstan\n    'TJ', // Tajikistan\n    'TM', // Turkmenistan\n    'UZ', // Uzbekistan\n  ]\n}\n\nregions.southernAsia = {\n  name: 'Southern Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/South_Asia\n    'AF', // Afghanistan\n    'BD', // Bangladesh\n    'BT', // Bhutan\n    'IO', // British Indian Ocean Territory\n    'IN', // India\n    'IR', // Iran\n    'MV', // Maldives\n    'NP', // Nepal\n    'PK', // Pakistan\n    'LK', // Sri Lanka\n  ]\n}\n\nregions.southeastAsia = {\n  name: 'Southeast Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Southeast_Asia\n    'BN', // Brunei\n    'KH', // Cambodia\n    'CX', // Christmas Island\n    'CC', // Cocos (Keeling) Islands\n    'TL', // East Timor\n    'ID', // Indonesia\n    'LA', // Laos\n    'MY', // Malaysia\n    'MM', // Myanmar (Burma)\n    'PH', // Philippines\n    'SG', // Singapore\n    'TH', // Thailand\n    'VN', // Vietnam\n  ]\n}\n\nregions.eastAsia = {\n  name: 'East Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/East_Asia\n    'CN', // China\n    'HK', // Hong Kong\n    'JP', // Japan\n    'KP', // North Korea\n    'KR', // South Korea\n    'MO', // Macao\n    'MN', // Mongolia\n    'TW', // Taiwan\n  ]\n}\n\nregions.westernAsia = {\n  name: 'Western Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Western_Asia\n    'AM', // Armenia\n    'AZ', // Azerbaijan\n    'BH', // Bahrain\n    'IQ', // Iraq\n    'IL', // Israel\n    'JO', // Jordan\n    'KW', // Kuwait\n    'LB', // Lebanon\n    'OM', // Oman\n    'PS', // Palestinian territories\n    'QA', // Qatar\n    'SA', // Saudi Arabia\n    'SY', // Syria\n    'TR', // Turkey\n    'AE', // United Arab Emirates\n    'YE', // Yemen\n  ]\n}\n\nregions.centralAfrica = {\n  name: 'Central Aftrica',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Central_Africa\n    'AO', // Angola\n    'CM', // Cameroon\n    'CF', // Central African Republic\n    'TD', // Chad\n    'CG', // Republic of the Congo\n    'CD', // Democratic Republic of the Congo\n    'GQ', // Equatorial Guinea\n    'GA', // Gabon\n    'ST', // São Tomé and Príncipe\n  ]\n};\n\nregions.northAfrica = {\n  name: 'North Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/North_Africa\n    'DZ', // Algeria\n    'EG', // Egypt\n    'LY', // Libya\n    'MA', // Morocco\n    'SD', // Sudan\n    'TN', // Tunisia\n    'EH', // Western Sahara\n  ]\n};\n\nregions.southernAfrica = {\n  name: 'Southern Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Southern_Africa\n    'BW', // Botswana\n    'LS', // Lesotho\n    'NA', // Namibia\n    'ZA', // South Africa\n    'SZ', // Swaziland\n  ]\n};\n\nregions.eastAfrica = {\n  name: 'East Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/East_Africa\n    'BI', // Burundi\n    'KM', // Comoros\n    'DJ', // Djibouti\n    'ER', // Eritrea\n    'ET', // Ethiopia\n    'KE', // Kenya\n    'MG', // Madagascar\n    'MW', // Malawi\n    'MU', // Mauritius\n    'YT', // Mayotte (France)\n    'MZ', // Mozambique\n    'RE', // Réunion (France)\n    'RW', // Rwanda\n    'SC', // Seychelles\n    'SO', // Somalia\n    'SS', // South Sudan\n    'TZ', // Tanzania\n    'UG', // Uganda\n    'ZM', // Zambia\n    'ZW', // Zimbabwe\n  ]\n};\n\nregions.westAfrica = {\n  name: 'West Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/West_Africa\n    'BJ', // Benin\n    'BF', // Burkina Faso\n    'CV', // Cabo Verde\n    'CI', // Côte d'Ivoire\n    'GM', // Gambia\n    'GH', // Ghana\n    'GN', // Guinea\n    'GW', // Guinea-Bissau\n    'LR', // Liberia\n    'ML', // Mali\n    'MR', // Mauritania\n    'NE', // Niger\n    'NG', // Nigeria\n    'SH', // Saint Helena, Ascension and Tristan da Cunha (United Kingdom)\n    'SN', // Senegal\n    'SL', // Sierra Leone\n    'TG', // Togo\n  ]\n};\n\nregions.centralAmerica = {\n  name: 'Central America',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Central_America\n    'BZ', // Belize\n    'CR', // Costa Rica\n    'SV', // El Salvador\n    'GT', // Guatemala\n    'HN', // Honduras\n    'NI', // Nicaragua\n    'PA', // Panama\n  ]\n}\n\nregions.northernAmerica = {\n  name: 'Northern America',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Northern_America\n    'BM', // Bermuda\n    'CA', // Canada\n    'GL', // Greenland\n    'MX', // Mexico\n    'PM', // Saint Pierre and Miquelon\n    'US', // United States\n  ]\n}\n\nregions.caribbean = {\n  name: 'Caribbean',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Caribbean\n    'AI', // Anguilla\n    'AG', // Antigua and Barbuda\n    'AW', // Aruba\n    'BS', // Bahamas\n    'BB', // Barbados\n    'BQ', // Bonaire, Sint Eustatius & Saba\n    'VG', // British Virgin Islands\n    'KY', // Cayman Islands\n    'CU', // Cuba\n    'CW', // Curaçao\n    'DM', // Dominica\n    'DO', // Dominican Republic\n    'GD', // Grenada\n    'GP', // Guadeloupe\n    'HT', // Haiti\n    'JM', // Jamaica\n    'MQ', // Martinique\n    'MS', // Montserrat\n    'PR', // Puerto Rico\n    'BL', // Saint Barthélemy\n    'KN', // St. Kitts & Nevis\n    'LC', // Saint Lucia\n    'MF', // Saint Martin\n    'VC', // Saint Vincent and the Grenadines\n    'SX', // Sint Maarten\n    'TT', // Trinidad and Tobago\n    'TC', // Turks & Caicos\n    'VI', // United States Virgin Islands\n  ]\n}\n\nregions.southAmerica = {\n  name: 'South America',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/South_America\n    'AR', // Argentina\n    'BO', // Bolivia\n    'BR', // Brazil\n    'CL', // Chile\n    'CO', // Colombia\n    'EC', // Ecuador\n    'FK', // Falkland Islands\n    'GF', // French Guiana\n    'GY', // Guyana\n    'PY', // Paraguay\n    'PE', // Peru\n    'SR', // Suriname\n    'UY', // Uruguay\n    'VE', // Venezuela\n  ]\n}\n\nregions.antartica = {\n  name: 'Antartica',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Antarctica\n    'AQ', // Antarctica\n    'BV', // Bouvet Island\n    'TF', // French Southern Territories\n    'HM', // Heard Island and McDonald Islands\n    'GS', // South Georgia and the South Sandwich Islands\n  ]\n}\n\nregions.northernEurope = {\n  name: 'Northern Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Northern_Europe\n    'AX', // Åland\n    'DK', // Denmark\n    'EE', // Estonia\n    'FO', // Faroe Islands\n    'FI', // Finland\n    'GG', // Guernsey\n    'IS', // Iceland\n    'IE', // Republic of Ireland\n    'JE', // Jersey (UK)\n    'IM', // Isle of Man\n    'LV', // Latvia\n    'LT', // Lithuania\n    'NO', // Norway\n    'SJ', // Svalbard and Jan Mayen\n    'SE', // Sweden\n    'GB', // United Kingdom\n  ]\n}\n\nregions.southernEurope = {\n  name: 'Southern Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Southern_Europe\n    'AL', // Albania\n    'AD', // Andorra\n    'BA', // Bosnia and Herzegovina\n    'HR', // Croatia\n    'CY', // Cyprus\n    'GI', // Gibraltar\n    'GR', // Greece\n    'IT', // Italy\n    'MK', // Republic of Macedonia\n    'VA', // Vatican City\n    'MT', // Malta\n    'ME', // Montenegro\n    'PT', // Portugal\n    'SM', // San Marino\n    'RS', // Serbia\n    'SI', // Slovenia\n    'ES', // Spain\n  ]\n}\n\nregions.easternEurope = {\n  name: 'Eastern Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Eastern_Europe\n    'BY', // Belarus\n    'BG', // Bulgaria\n    'CZ', // Czech Republic\n    'GE', // Georgia\n    'HU', // Hungary\n    'MD', // Moldova\n    'PL', // Poland\n    'RO', // Romania\n    'RU', // Russia\n    'SK', // Slovakia\n    'UA', // Ukraine\n  ]\n}\n\nregions.westernEurope = {\n  name: 'Western Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Western_Europe\n    'AT', // Austria\n    'BE', // Belgium\n    'FR', // France\n    'DE', // Germany\n    'LI', // Liechtenstein\n    'LU', // Luxembourg\n    'MC', // Monaco\n    'NL', // Netherlands\n    'CH', // Switzerland\n  ],\n};\n \nregions.australia = {\n  name: 'Australia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'AU', // Australia\n    'NF', // Norfolk Island\n    'NZ', // New Zealand\n  ]\n};\n\nregions.melanesia = {\n  name: 'Melanesia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'FJ', // Fiji\n    'NC', //  New Caledonia\n    'PG', // Papua New Guinea\n    'SB', // Solomon Islands\n    'VU', // Vanuatu\n  ]\n};    \n\nregions.micronesia = {\n  name: 'Micronesia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'GU', // Guam\n    'KI', // Kiribati\n    'MH', // Marshall Islands\n    'FM', // Micronesia, Fed. Sts.\n    'NR', // Nauru\n    'MP', // Northern Mariana Islands\n    'PW', // Palau\n    'UM', // United States Minor Outlying Islands\n  ]\n};    \n\nregions.polynesia = {\n  name: 'Polynesia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'AS', // American Samoa\n    'CK', // Cook Islands\n    'PF', // French Polynesia\n    'NU', // Niue\n    'PN', // Pitcairn Islands\n    'WS', // Samoa\n    'TK', // Tokelau\n    'TO', // Tonga\n    'TV', // Tuvalu\n    'WF', // Wallis and Futuna\n  ]\n};\n\nmodule.exports = regions;\n","'use strict';\n\nvar _ = require('underscore');\nvar regions = require('./regions.js');\nvar continents = {};\n\ncontinents.asia = {\n  name: 'Asia',\n  regions: ['centralAsia', 'southernAsia', 'southeastAsia', 'eastAsia', 'westernAsia'],\n  countries: _.flatten([\n    regions.centralAsia.countries,\n    regions.southernAsia.countries,\n    regions.southeastAsia.countries,\n    regions.eastAsia.countries,\n    regions.westernAsia.countries\n  ])\n  .sort()\n};\n\ncontinents.africa = {\n  name: 'Africa',\n  regions: ['centralAfrica', 'northAfrica', 'southernAfrica', 'eastAfrica', 'westAfrica'],\n  countries: _.flatten([\n      regions.centralAfrica.countries,\n      regions.northAfrica.countries,\n      regions.southernAfrica.countries,\n      regions.eastAfrica.countries,\n      regions.westAfrica.countries\n  ])\n  .sort()\n};\n\ncontinents.northAmerica = {\n  name: 'North America',\n  regions: ['centralAmerica', 'northernAmerica', 'caribbean'],\n  countries: _.flatten([\n    regions.centralAmerica.countries,\n    regions.northernAmerica.countries,\n    regions.caribbean.countries\n  ])\n  .sort()\n};\n\ncontinents.southAmerica = {\n  name: 'South America',\n  regions: ['southAmerica'],\n  countries: _.flatten([\n    regions.southAmerica.countries\n  ])\n  .sort()\n}\n\ncontinents.antartica = {\n  name: 'Antartica',\n  regions: ['antartica'],\n  countries: _.flatten([\n    regions.antartica.countries\n  ])\n  .sort()\n}\n\ncontinents.europe = {\n  name: 'Europe',\n  regions: ['northernEurope', 'southernEurope', 'easternEurope', 'westernEurope'],\n  countries: _.flatten([\n    regions.northernEurope.countries,\n    regions.southernEurope.countries,\n    regions.easternEurope.countries,\n    regions.westernEurope.countries\n  ])\n  .sort()\n}\n\ncontinents.oceania = {\n  name: 'Oceania',\n  regions: ['australia', 'melanesia', 'micronesia', 'polynesia'],\n  countries: _.flatten([\n    regions.australia.countries,\n    regions.melanesia.countries,\n    regions.micronesia.countries,\n    regions.polynesia.countries\n  ])\n  .sort()\n};\n\nmodule.exports = continents;\n","var _ = require('underscore');\n\nmodule.exports = init;\n\nfunction init(o) {\n  return {\n    countries: search.bind(null, o.countries),\n    currencies: search.bind(null, o.currencies),\n    languages: search.bind(null, o.languages)\n  };\n}\n\nfunction search(data, query) {\n  var q = _.pairs(query);\n\n  return data.filter(function(d) {\n    return q.filter(function(v) {\n      var prop = d[v[0]];\n\n      if(_.isArray(prop)) return prop.indexOf(v[1]) >= 0;\n\n      return prop == v[1];\n    }).length == q.length;\n  });\n}","module.exports =\n{ \"ALL\": \"L\"\n, \"AFN\": \"؋\"\n, \"ARS\": \"$\"\n, \"AWG\": \"ƒ\"\n, \"AUD\": \"$\"\n, \"AZN\": \"₼\"\n, \"BSD\": \"$\"\n, \"BBD\": \"$\"\n, \"BYR\": \"p.\"\n, \"BZD\": \"BZ$\"\n, \"BMD\": \"$\"\n, \"BOB\": \"Bs.\"\n, \"BAM\": \"KM\"\n, \"BWP\": \"P\"\n, \"BGN\": \"лв\"\n, \"BRL\": \"R$\"\n, \"BND\": \"$\"\n, \"KHR\": \"៛\"\n, \"CAD\": \"$\"\n, \"KYD\": \"$\"\n, \"CLP\": \"$\"\n, \"CNY\": \"¥\"\n, \"COP\": \"$\"\n, \"CRC\": \"₡\"\n, \"HRK\": \"kn\"\n, \"CUP\": \"₱\"\n, \"CZK\": \"Kč\"\n, \"DKK\": \"kr\"\n, \"DOP\": \"RD$\"\n, \"XCD\": \"$\"\n, \"EGP\": \"£\"\n, \"SVC\": \"$\"\n, \"EEK\": \"kr\"\n, \"EUR\": \"€\"\n, \"FKP\": \"£\"\n, \"FJD\": \"$\"\n, \"GHC\": \"¢\"\n, \"GIP\": \"£\"\n, \"GTQ\": \"Q\"\n, \"GGP\": \"£\"\n, \"GYD\": \"$\"\n, \"HNL\": \"L\"\n, \"HKD\": \"$\"\n, \"HUF\": \"Ft\"\n, \"ISK\": \"kr\"\n, \"INR\": \"₹\"\n, \"IDR\": \"Rp\"\n, \"IRR\": \"﷼\"\n, \"IMP\": \"£\"\n, \"ILS\": \"₪\"\n, \"JMD\": \"J$\"\n, \"JPY\": \"¥\"\n, \"JEP\": \"£\"\n, \"KES\": \"KSh\"\n, \"KZT\": \"лв\"\n, \"KPW\": \"₩\"\n, \"KRW\": \"₩\"\n, \"KGS\": \"лв\"\n, \"LAK\": \"₭\"\n, \"LVL\": \"Ls\"\n, \"LBP\": \"£\"\n, \"LRD\": \"$\"\n, \"LTL\": \"Lt\"\n, \"MKD\": \"ден\"\n, \"MYR\": \"RM\"\n, \"MUR\": \"₨\"\n, \"MXN\": \"$\"\n, \"MNT\": \"₮\"\n, \"MZN\": \"MT\"\n, \"NAD\": \"$\"\n, \"NPR\": \"₨\"\n, \"ANG\": \"ƒ\"\n, \"NZD\": \"$\"\n, \"NIO\": \"C$\"\n, \"NGN\": \"₦\"\n, \"NOK\": \"kr\"\n, \"OMR\": \"﷼\"\n, \"PKR\": \"₨\"\n, \"PAB\": \"B/.\"\n, \"PYG\": \"Gs\"\n, \"PEN\": \"S/.\"\n, \"PHP\": \"₱\"\n, \"PLN\": \"zł\"\n, \"QAR\": \"﷼\"\n, \"RON\": \"lei\"\n, \"RUB\": \"₽\"\n, \"SHP\": \"£\"\n, \"SAR\": \"﷼\"\n, \"RSD\": \"Дин.\"\n, \"SCR\": \"₨\"\n, \"SGD\": \"$\"\n, \"SBD\": \"$\"\n, \"SOS\": \"S\"\n, \"ZAR\": \"R\"\n, \"LKR\": \"₨\"\n, \"SEK\": \"kr\"\n, \"CHF\": \"CHF\"\n, \"SRD\": \"$\"\n, \"SYP\": \"£\"\n, \"TZS\": \"TSh\"\n, \"TWD\": \"NT$\"\n, \"THB\": \"฿\"\n, \"TTD\": \"TT$\"\n, \"TRY\": \"\"\n, \"TRL\": \"₤\"\n, \"TVD\": \"$\"\n, \"UGX\": \"USh\"\n, \"UAH\": \"₴\"\n, \"GBP\": \"£\"\n, \"USD\": \"$\"\n, \"UYU\": \"$U\"\n, \"UZS\": \"лв\"\n, \"VEF\": \"Bs\"\n, \"VND\": \"₫\"\n, \"YER\": \"﷼\"\n, \"ZWD\": \"Z$\"\n}\n","module.exports = mapSymbol\n\nvar map = require('./map')\n\nfunction mapSymbol(currencyCode) {\n  if (map.hasOwnProperty(currencyCode)) {\n    return map[currencyCode]\n  } else {\n    return '?'\n  }\n}","'use strict';\n\nvar _ = require('underscore');\nvar continents = require('./data/continents');\nvar regions = require('./data/regions');\nvar countriesAll = require('./data/countries.json');\nvar currenciesAll = require('./data/currencies.json');\nvar languagesAll = require('./data/languages.json');\nvar lookup = require('./lookup');\n\nvar getSymbol = require('currency-symbol-map')\n\nexports.continents = continents;\nexports.regions = regions;\n\nexports.countries = {\n  all: countriesAll,\n};\n\n_.each(countriesAll, function (country) {\n  // prefer assigned country codes over inactive ones\n  var exportedAlpha2 = exports.countries[country.alpha2];\n  if (!exportedAlpha2 || exportedAlpha2.status === 'deleted') {\n    exports.countries[country.alpha2] = country;\n  }\n\n  var exportedAlpha3 = exports.countries[country.alpha3];\n  if (!exportedAlpha3 || exportedAlpha3.status === 'deleted') {\n    exports.countries[country.alpha3] = country;\n  }\n});\n\nexports.currencies = {\n  all: currenciesAll,\n};\n\n_.each(currenciesAll, function (currency) {\n  //If the symbol isn't available, default to the currency code\n  var symbol = getSymbol(currency.code);\n  if (symbol == '?') {\n    symbol = currency.code;\n  }\n\n  currency.symbol = symbol;\n  exports.currencies[currency.code] = currency;\n});\n\nexports.languages = {\n  all: languagesAll,\n};\n\n// Note that for the languages there are several entries with the same alpha3 -\n// eg Dutch and Flemish. Not sure how to best deal with that - here whichever\n// comes last wins.\n_.each(languagesAll, function (language) {\n  exports.languages[language.alpha2] = language;\n  exports.languages[language.bibliographic] = language;\n  exports.languages[language.alpha3] = language;\n});\n\nexports.lookup = lookup({\n    countries: countriesAll,\n    currencies: currenciesAll,\n    languages: languagesAll\n});\n\nvar callingCountries = {all: []};\n\nvar callingCodesAll = _.reduce(countriesAll, function (codes, country) {\n  if (country.countryCallingCodes && country.countryCallingCodes.length) {\n    callingCountries.all.push(country);\n\n    callingCountries[country.alpha2] = country;\n    callingCountries[country.alpha3] = country;\n\n    _.each(country.countryCallingCodes, function (code) {\n      if (codes.indexOf(code) == -1) {\n        codes.push(code);\n      }\n    });\n  }\n  return codes;\n}, []);\n\ndelete callingCountries['']; // remove empty alpha3s\nexports.callingCountries = callingCountries;\n\ncallingCodesAll.sort(function (a, b) {\n  var parse = function (str) { return parseInt(str) };\n  var splitA = _.map(a.split(' '), parse);\n  var splitB = _.map(b.split(' '), parse);\n\n  if (splitA[0] < splitB[0]) {\n    return -1;\n  } else if (splitA[0] > splitB[0]) {\n    return 1;\n  } else {\n    // Same - check split[1]\n    if (splitA[1] === undefined && splitB[1] !== undefined) {\n      return -1;\n    } else if (splitA[1] !== undefined && splitB[1] === undefined) {\n      return 1;\n    } else if (splitA[1] < splitB[1]) {\n      return -1;\n    } else if (splitA[1] > splitB[1]) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n});\n\nexports.callingCodes = {\n  all: callingCodesAll\n};\n","'use strict';\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst doesMatch = function(string, regex) {\n  const match = regex.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nconst doesNotMatch = function(string, regex) {\n  return !doesMatch(string, regex);\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      target[keys[i]] = a[keys[i]];\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.buildOptions = function(options, defaultOptions, props) {\n  var newOptions = {};\n  if (!options) {\n    return defaultOptions; //if there are not options\n  }\n\n  for (let i = 0; i < props.length; i++) {\n    if (options[props[i]] !== undefined) {\n      newOptions[props[i]] = options[props[i]];\n    } else {\n      newOptions[props[i]] = defaultOptions[props[i]];\n    }\n  }\n  return newOptions;\n};\n\nexports.doesMatch = doesMatch;\nexports.doesNotMatch = doesNotMatch;\nexports.getAllMatches = getAllMatches;\n","'use strict';\n\nconst util = require('./util');\n\nconst convertToJson = function(node, options) {\n  const jObj = {};\n\n  //when no child node or attr is present\n  if ((!node.child || util.isEmptyObject(node.child)) && (!node.attrsMap || util.isEmptyObject(node.attrsMap))) {\n    return util.isExist(node.val) ? node.val : '';\n  } else {\n    //otherwise create a textnode if node has some text\n    if (util.isExist(node.val)) {\n      if (!(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n        jObj[options.textNodeName] = node.val;\n      }\n    }\n  }\n\n  util.merge(jObj, node.attrsMap);\n\n  const keys = Object.keys(node.child);\n  for (let index = 0; index < keys.length; index++) {\n    var tagname = keys[index];\n    if (node.child[tagname] && node.child[tagname].length > 1) {\n      jObj[tagname] = [];\n      for (var tag in node.child[tagname]) {\n        jObj[tagname].push(convertToJson(node.child[tagname][tag], options));\n      }\n    } else {\n      jObj[tagname] = convertToJson(node.child[tagname][0], options);\n    }\n  }\n\n  //add value\n  return jObj;\n};\n\nexports.convertToJson = convertToJson;\n","'use strict';\n\nmodule.exports = function(tagname, parent, val) {\n  this.tagname = tagname;\n  this.parent = parent;\n  this.child = {}; //child tags\n  this.attrsMap = {}; //attributes map\n  this.val = val; //text only\n  this.addChild = function(child) {\n    if (Array.isArray(this.child[child.tagname])) {\n      //already presents\n      this.child[child.tagname].push(child);\n    } else {\n      this.child[child.tagname] = [child];\n    }\n  };\n};\n","'use strict';\n\nconst util = require('./util');\nconst buildOptions = require('./util').buildOptions;\nconst xmlNode = require('./xmlNode');\nconst TagType = {OPENING: 1, CLOSING: 2, SELF: 3, CDATA: 4};\nconst attrstr_regex = '((\\\\s*[\\\\w\\\\-._:]+(=((\\'([^\\']*)\\')|(\"([^\"]*)\")))?)*)\\\\s*';\nlet regx = '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))'+attrstr_regex+'(\\\\/)?>|((\\\\/)(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))\\\\s*>))([^<]*)';\n  //'<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))([^>]*)>|((\\\\/)(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))\\\\s*>))([^<]*)';\n  \n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n  Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n  Number.parseFloat = window.parseFloat;\n}\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attrNodeName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  ignoreNameSpace: false,\n  allowBooleanAttributes: false, //a tag can have attributes without any value\n  //ignoreRootElement : false,\n  parseNodeValue: true,\n  parseAttributeValue: false,\n  arrayMode: false,\n  trimValues: true, //Trim string values of tag and attributes\n  cdataTagName: false,\n  cdataPositionChar: '\\\\c',\n  localeRange: '',\n  tagValueProcessor: function(a) {\n    return a;\n  },\n  attrValueProcessor: function(a) {\n    return a;\n  },\n  stopNodes: []\n  //decodeStrict: false,\n};\n\nexports.defaultOptions = defaultOptions;\n\nconst props = [\n  'attributeNamePrefix',\n  'attrNodeName',\n  'textNodeName',\n  'ignoreAttributes',\n  'ignoreNameSpace',\n  'allowBooleanAttributes',\n  'parseNodeValue',\n  'parseAttributeValue',\n  'arrayMode',\n  'trimValues',\n  'cdataTagName',\n  'cdataPositionChar',\n  'localeRange',\n  'tagValueProcessor',\n  'attrValueProcessor',\n  'parseTrueNumberOnly',\n  'stopNodes'\n];\nexports.props = props;\n\nconst getTraversalObj = function(xmlData, options) {\n  options = buildOptions(options, defaultOptions, props);\n  //xmlData = xmlData.replace(/\\r?\\n/g, \" \");//make it single line\n  xmlData = xmlData.replace(/<!--[\\s\\S]*?-->/g, ''); //Remove  comments\n\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n\n  regx = regx.replace(/\\[\\\\w/g, '[' + options.localeRange + '\\\\w');\n  const tagsRegx = new RegExp(regx, 'g');\n  let tag = tagsRegx.exec(xmlData);\n  let nextTag = tagsRegx.exec(xmlData);\n  while (tag) {\n    //console.log(tag)\n    const tagType = checkForTagType(tag);\n    //console.log(tagType)\n\n    if (tagType === TagType.CLOSING) {\n      //add parsed data to parent node\n      if (currentNode.parent && tag[22]) {\n        currentNode.parent.val = util.getValue(currentNode.parent.val) + '' + processTagValue(tag[22], options);\n      }\n      if (options.stopNodes.length && options.stopNodes.includes(currentNode.tagname)) {\n        currentNode.child = []\n        if (currentNode.attrsMap == undefined) { currentNode.attrsMap = {}}\n        currentNode.val = xmlData.substr(currentNode.startIndex + 1, tag.index - currentNode.startIndex - 1)\n      }\n      currentNode = currentNode.parent;\n    } else if (tagType === TagType.CDATA) {\n      if (options.cdataTagName) {\n        //add cdata node\n        const childNode = new xmlNode(options.cdataTagName, currentNode, tag[3]);\n        childNode.attrsMap = buildAttributesMap(tag[8], options);\n        currentNode.addChild(childNode);\n        //for backtracking\n        currentNode.val = util.getValue(currentNode.val) + options.cdataPositionChar;\n        //add rest value to parent node\n        if (tag[22]) {\n          currentNode.val += processTagValue(tag[22], options);\n        }\n      } else {\n        currentNode.val = (currentNode.val || '') + (tag[3] || '') + processTagValue(tag[22], options);\n      }\n    } else if (tagType === TagType.SELF) {\n      if (currentNode && tag[22]) {\n        currentNode.val = util.getValue(currentNode.val) + '' + processTagValue(tag[22], options);\n      }\n\n      const childNode = new xmlNode(options.ignoreNameSpace ? tag[7] : tag[5], currentNode, '');\n      /* if (tag[8] && tag[8].length > 0) {\n        tag[8] = tag[8].substr(0, tag[8].length - 1);\n      } */\n      childNode.attrsMap = buildAttributesMap(tag[8], options);\n      currentNode.addChild(childNode);\n    } else {\n      //TagType.OPENING\n      const childNode = new xmlNode(\n        options.ignoreNameSpace ? tag[7] : tag[5],\n        currentNode,\n        processTagValue(tag[22], options)\n      );\n      if (options.stopNodes.length && options.stopNodes.includes(childNode.tagname)) {\n        childNode.startIndex=tag.index + tag[1].length\n      }\n      childNode.attrsMap = buildAttributesMap(tag[8], options);\n      currentNode.addChild(childNode);\n      currentNode = childNode;\n    }\n\n    tag = nextTag;\n    nextTag = tagsRegx.exec(xmlData);\n  }\n\n  return xmlObj;\n};\n\nfunction processTagValue(val, options) {\n  if (val) {\n    if (options.trimValues) {\n      val = val.trim();\n    }\n    val = options.tagValueProcessor(val);\n    val = parseValue(val, options.parseNodeValue, options.parseTrueNumberOnly);\n  }\n\n  return val;\n}\n\nfunction checkForTagType(match) {\n  if (match[4] === ']]>') {\n    return TagType.CDATA;\n  } else if (match[18] === '/') {\n    return TagType.CLOSING;\n  } else if (match[16] === '/') {\n    return TagType.SELF;\n  } else {\n    return TagType.OPENING;\n  }\n}\n\nfunction resolveNameSpace(tagname, options) {\n  if (options.ignoreNameSpace) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\nfunction parseValue(val, shouldParse, parseTrueNumberOnly) {\n  if (shouldParse && typeof val === 'string') {\n    let parsed;\n    if (val.trim() === '' || isNaN(val)) {\n      parsed = val === 'true' ? true : val === 'false' ? false : val;\n    } else {\n      if (val.indexOf('0x') !== -1) {\n        //support hexa decimal\n        parsed = Number.parseInt(val, 16);\n      } else if (val.indexOf('.') !== -1) {\n        parsed = Number.parseFloat(val);\n      } else {\n        parsed = Number.parseInt(val, 10);\n      }\n      if (parseTrueNumberOnly) {\n        parsed = String(parsed) === val ? parsed : val;\n      }\n    }\n    return parsed;\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])(.*?)\\\\3)?', 'g');\n\nfunction buildAttributesMap(attrStr, options) {\n  if (!options.ignoreAttributes && typeof attrStr === 'string') {\n    attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = resolveNameSpace(matches[i][1], options);\n      if (attrName.length) {\n        if (matches[i][4] !== undefined) {\n          if (options.trimValues) {\n            matches[i][4] = matches[i][4].trim();\n          }\n          matches[i][4] = options.attrValueProcessor(matches[i][4]);\n          attrs[options.attributeNamePrefix + attrName] = parseValue(\n            matches[i][4],\n            options.parseAttributeValue,\n            options.parseTrueNumberOnly\n          );\n        } else if (options.allowBooleanAttributes) {\n          attrs[options.attributeNamePrefix + attrName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (options.attrNodeName) {\n      const attrCollection = {};\n      attrCollection[options.attrNodeName] = attrs;\n      return attrCollection;\n    }\n    return attrs;\n  }\n}\n\nexports.getTraversalObj = getTraversalObj;\n","'use strict';\nconst char = function(a) {\n  return String.fromCharCode(a);\n};\n\nconst chars = {\n  nilChar: char(176),\n  missingChar: char(201),\n  nilPremitive: char(175),\n  missingPremitive: char(200),\n\n  emptyChar: char(178),\n  emptyValue: char(177), //empty Premitive\n\n  boundryChar: char(179),\n\n  objStart: char(198),\n  arrStart: char(204),\n  arrayEnd: char(185),\n};\n\nconst charsArr = [\n  chars.nilChar,\n  chars.nilPremitive,\n  chars.missingChar,\n  chars.missingPremitive,\n  chars.boundryChar,\n  chars.emptyChar,\n  chars.emptyValue,\n  chars.arrayEnd,\n  chars.objStart,\n  chars.arrStart,\n];\n\nconst _e = function(node, e_schema, options) {\n  if (typeof e_schema === 'string') {\n    //premitive\n    if (node && node[0] && node[0].val !== undefined) {\n      return getValue(node[0].val, e_schema);\n    } else {\n      return getValue(node, e_schema);\n    }\n  } else {\n    const hasValidData = hasData(node);\n    if (hasValidData === true) {\n      let str = '';\n      if (Array.isArray(e_schema)) {\n        //attributes can't be repeated. hence check in children tags only\n        str += chars.arrStart;\n        const itemSchema = e_schema[0];\n        //var itemSchemaType = itemSchema;\n        const arr_len = node.length;\n\n        if (typeof itemSchema === 'string') {\n          for (let arr_i = 0; arr_i < arr_len; arr_i++) {\n            const r = getValue(node[arr_i].val, itemSchema);\n            str = processValue(str, r);\n          }\n        } else {\n          for (let arr_i = 0; arr_i < arr_len; arr_i++) {\n            const r = _e(node[arr_i], itemSchema, options);\n            str = processValue(str, r);\n          }\n        }\n        str += chars.arrayEnd; //indicates that next item is not array item\n      } else {\n        //object\n        str += chars.objStart;\n        const keys = Object.keys(e_schema);\n        if (Array.isArray(node)) {\n          node = node[0];\n        }\n        for (let i in keys) {\n          const key = keys[i];\n          //a property defined in schema can be present either in attrsMap or children tags\n          //options.textNodeName will not present in both maps, take it's value from val\n          //options.attrNodeName will be present in attrsMap\n          let r;\n          if (!options.ignoreAttributes && node.attrsMap && node.attrsMap[key]) {\n            r = _e(node.attrsMap[key], e_schema[key], options);\n          } else if (key === options.textNodeName) {\n            r = _e(node.val, e_schema[key], options);\n          } else {\n            r = _e(node.child[key], e_schema[key], options);\n          }\n          str = processValue(str, r);\n        }\n      }\n      return str;\n    } else {\n      return hasValidData;\n    }\n  }\n};\n\nconst getValue = function(a /*, type*/) {\n  switch (a) {\n    case undefined:\n      return chars.missingPremitive;\n    case null:\n      return chars.nilPremitive;\n    case '':\n      return chars.emptyValue;\n    default:\n      return a;\n  }\n};\n\nconst processValue = function(str, r) {\n  if (!isAppChar(r[0]) && !isAppChar(str[str.length - 1])) {\n    str += chars.boundryChar;\n  }\n  return str + r;\n};\n\nconst isAppChar = function(ch) {\n  return charsArr.indexOf(ch) !== -1;\n};\n\nfunction hasData(jObj) {\n  if (jObj === undefined) {\n    return chars.missingChar;\n  } else if (jObj === null) {\n    return chars.nilChar;\n  } else if (\n    jObj.child &&\n    Object.keys(jObj.child).length === 0 &&\n    (!jObj.attrsMap || Object.keys(jObj.attrsMap).length === 0)\n  ) {\n    return chars.emptyChar;\n  } else {\n    return true;\n  }\n}\n\nconst x2j = require('./xmlstr2xmlnode');\nconst buildOptions = require('./util').buildOptions;\n\nconst convert2nimn = function(node, e_schema, options) {\n  options = buildOptions(options, x2j.defaultOptions, x2j.props);\n  return _e(node, e_schema, options);\n};\n\nexports.convert2nimn = convert2nimn;\n","'use strict';\n\nconst util = require('./util');\nconst buildOptions = require('./util').buildOptions;\nconst x2j = require('./xmlstr2xmlnode');\n\n//TODO: do it later\nconst convertToJsonString = function(node, options) {\n  options = buildOptions(options, x2j.defaultOptions, x2j.props);\n\n  options.indentBy = options.indentBy || '';\n  return _cToJsonStr(node, options, 0);\n};\n\nconst _cToJsonStr = function(node, options, level) {\n  let jObj = '{';\n\n  //traver through all the children\n  const keys = Object.keys(node.child);\n\n  for (let index = 0; index < keys.length; index++) {\n    var tagname = keys[index];\n    if (node.child[tagname] && node.child[tagname].length > 1) {\n      jObj += '\"' + tagname + '\" : [ ';\n      for (var tag in node.child[tagname]) {\n        jObj += _cToJsonStr(node.child[tagname][tag], options) + ' , ';\n      }\n      jObj = jObj.substr(0, jObj.length - 1) + ' ] '; //remove extra comma in last\n    } else {\n      jObj += '\"' + tagname + '\" : ' + _cToJsonStr(node.child[tagname][0], options) + ' ,';\n    }\n  }\n  util.merge(jObj, node.attrsMap);\n  //add attrsMap as new children\n  if (util.isEmptyObject(jObj)) {\n    return util.isExist(node.val) ? node.val : '';\n  } else {\n    if (util.isExist(node.val)) {\n      if (!(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n        jObj += '\"' + options.textNodeName + '\" : ' + stringval(node.val);\n      }\n    }\n  }\n  //add value\n  if (jObj[jObj.length - 1] === ',') {\n    jObj = jObj.substr(0, jObj.length - 2);\n  }\n  return jObj + '}';\n};\n\nfunction stringval(v) {\n  if (v === true || v === false || !isNaN(v)) {\n    return v;\n  } else {\n    return '\"' + v + '\"';\n  }\n}\n\nfunction indentate(options, level) {\n  return options.indentBy.repeat(level);\n}\n\nexports.convertToJsonString = convertToJsonString;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  localeRange: 'a-zA-Z',\n};\n\nconst props = ['allowBooleanAttributes', 'localeRange'];\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function(xmlData, options) {\n  options = util.buildOptions(options, defaultOptions, props);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n\n  const tags = [];\n  let tagFound = false;\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  const regxAttrName = new RegExp('^[_w][\\\\w\\\\-.:]*$'.replace('_w', '_' + options.localeRange));\n  const regxTagName = new RegExp('^([w]|_)[\\\\w.\\\\-_:]*'.replace('([w', '([' + options.localeRange));\n  for (let i = 0; i < xmlData.length; i++) {\n    if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n\n      i++;\n      if (xmlData[i] === '?') {\n        i = readPI(xmlData, ++i);\n        if (i.err) {\n          return i;\n        }\n      } else if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (\n          ;\n          i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r';\n          i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          continue;\n        }\n        if (!validateTagName(tagName, regxTagName)) {\n          return {err: {code: 'InvalidTag', msg: 'Tag ' + tagName + ' is an invalid name.'}};\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return {err: {code: 'InvalidAttr', msg: 'Attributes for ' + tagName + ' have open quote'}};\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options, regxAttrName);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            return isValid;\n          }\n        } else if (closingTag) {\n          if (attrStr.trim().length > 0) {\n            return {\n              err: {code: 'InvalidTag', msg: 'closing tag ' + tagName + \" can't have attributes or invalid starting.\"},\n            };\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg) {\n              return {\n                err: {code: 'InvalidTag', msg: 'closing tag ' + otg + ' is expected inplace of ' + tagName + '.'},\n              };\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options, regxAttrName);\n          if (isValid !== true) {\n            return isValid;\n          }\n          tags.push(tagName);\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else {\n              break;\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if (xmlData[i] === ' ' || xmlData[i] === '\\t' || xmlData[i] === '\\n' || xmlData[i] === '\\r') {\n        continue;\n      }\n      return {err: {code: 'InvalidChar', msg: 'char ' + xmlData[i] + ' is not expected .'}};\n    }\n  }\n\n  if (!tagFound) {\n    return {err: {code: 'InvalidXml', msg: 'Start tag expected.'}};\n  } else if (tags.length > 0) {\n    return {\n      err: {code: 'InvalidXml', msg: 'Invalid ' + JSON.stringify(tags, null, 4).replace(/\\r?\\n/g, '') + ' found.'},\n    };\n  }\n\n  return true;\n};\n\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  var start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      var tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return {err: {code: 'InvalidXml', msg: 'XML declaration allowed only at the start of the document.'}};\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nvar doubleQuote = '\"';\nvar singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n        continue;\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {value: attrStr, index: i};\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options, regxAttrName) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    //console.log(matches[i]);\n\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return {err: {code: 'InvalidAttr', msg: 'attribute ' + matches[i][2] + ' has no space in starting.'}};\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return {err: {code: 'InvalidAttr', msg: 'boolean attribute ' + matches[i][2] + ' is not allowed.'}};\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName, regxAttrName)) {\n      return {err: {code: 'InvalidAttr', msg: 'attribute ' + attrName + ' is an invalid name.'}};\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return {err: {code: 'InvalidAttr', msg: 'attribute ' + attrName + ' is repeated.'}};\n    }\n  }\n\n  return true;\n}\n\n// const validAttrRegxp = /^[_a-zA-Z][\\w\\-.:]*$/;\n\nfunction validateAttrName(attrName, regxAttrName) {\n  // const validAttrRegxp = new RegExp(regxAttrName);\n  return util.doesMatch(attrName, regxAttrName);\n}\n\n//const startsWithXML = new RegExp(\"^[Xx][Mm][Ll]\");\n//  startsWith = /^([a-zA-Z]|_)[\\w.\\-_:]*/;\n\nfunction validateTagName(tagname, regxTagName) {\n  /*if(util.doesMatch(tagname,startsWithXML)) return false;\n    else*/\n  return !util.doesNotMatch(tagname, regxTagName);\n}\n","'use strict';\n//parse Empty Node as self closing node\nconst buildOptions = require('./util').buildOptions;\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attrNodeName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataTagName: false,\n  cdataPositionChar: '\\\\c',\n  format: false,\n  indentBy: '  ',\n  supressEmptyNode: false,\n  tagValueProcessor: function(a) {\n    return a;\n  },\n  attrValueProcessor: function(a) {\n    return a;\n  },\n};\n\nconst props = [\n  'attributeNamePrefix',\n  'attrNodeName',\n  'textNodeName',\n  'ignoreAttributes',\n  'cdataTagName',\n  'cdataPositionChar',\n  'format',\n  'indentBy',\n  'supressEmptyNode',\n  'tagValueProcessor',\n  'attrValueProcessor',\n];\n\nfunction Parser(options) {\n  this.options = buildOptions(options, defaultOptions, props);\n  if (this.options.ignoreAttributes || this.options.attrNodeName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n  if (this.options.cdataTagName) {\n    this.isCDATA = isCDATA;\n  } else {\n    this.isCDATA = function(/*a*/) {\n      return false;\n    };\n  }\n  this.replaceCDATAstr = replaceCDATAstr;\n  this.replaceCDATAarr = replaceCDATAarr;\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n\n  if (this.options.supressEmptyNode) {\n    this.buildTextNode = buildEmptyTextNode;\n    this.buildObjNode = buildEmptyObjNode;\n  } else {\n    this.buildTextNode = buildTextValNode;\n    this.buildObjNode = buildObjectNode;\n  }\n\n  this.buildTextValNode = buildTextValNode;\n  this.buildObjectNode = buildObjectNode;\n}\n\nParser.prototype.parse = function(jObj) {\n  return this.j2x(jObj, 0).val;\n};\n\nParser.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  const keys = Object.keys(jObj);\n  const len = keys.length;\n  for (let i = 0; i < len; i++) {\n    const key = keys[i];\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += ' ' + attr + '=\"' + this.options.attrValueProcessor('' + jObj[key]) + '\"';\n      } else if (this.isCDATA(key)) {\n        if (jObj[this.options.textNodeName]) {\n          val += this.replaceCDATAstr(jObj[this.options.textNodeName], jObj[key]);\n        } else {\n          val += this.replaceCDATAstr('', jObj[key]);\n        }\n      } else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          if (jObj[this.options.cdataTagName]) {\n            //value will added while processing cdata\n          } else {\n            val += this.options.tagValueProcessor('' + jObj[key]);\n          }\n        } else {\n          val += this.buildTextNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      if (this.isCDATA(key)) {\n        val += this.indentate(level);\n        if (jObj[this.options.textNodeName]) {\n          val += this.replaceCDATAarr(jObj[this.options.textNodeName], jObj[key]);\n        } else {\n          val += this.replaceCDATAarr('', jObj[key]);\n        }\n      } else {\n        //nested nodes\n        const arrLen = jObj[key].length;\n        for (let j = 0; j < arrLen; j++) {\n          const item = jObj[key][j];\n          if (typeof item === 'undefined') {\n            // supress undefined node\n          } else if (item === null) {\n            val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          } else if (typeof item === 'object') {\n            const result = this.j2x(item, level + 1);\n            val += this.buildObjNode(result.val, key, result.attrStr, level);\n          } else {\n            val += this.buildTextNode(item, key, '', level);\n          }\n        }\n      }\n    } else {\n      //nested node\n      if (this.options.attrNodeName && key === this.options.attrNodeName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += ' ' + Ks[j] + '=\"' + this.options.attrValueProcessor('' + jObj[key][Ks[j]]) + '\"';\n        }\n      } else {\n        const result = this.j2x(jObj[key], level + 1);\n        val += this.buildObjNode(result.val, key, result.attrStr, level);\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nfunction replaceCDATAstr(str, cdata) {\n  str = this.options.tagValueProcessor('' + str);\n  if (this.options.cdataPositionChar === '' || str === '') {\n    return str + '<![CDATA[' + cdata + ']]' + this.tagEndChar;\n  } else {\n    return str.replace(this.options.cdataPositionChar, '<![CDATA[' + cdata + ']]' + this.tagEndChar);\n  }\n}\n\nfunction replaceCDATAarr(str, cdata) {\n  str = this.options.tagValueProcessor('' + str);\n  if (this.options.cdataPositionChar === '' || str === '') {\n    return str + '<![CDATA[' + cdata.join(']]><![CDATA[') + ']]' + this.tagEndChar;\n  } else {\n    for (let v in cdata) {\n      str = str.replace(this.options.cdataPositionChar, '<![CDATA[' + cdata[v] + ']]>');\n    }\n    return str + this.newLine;\n  }\n}\n\nfunction buildObjectNode(val, key, attrStr, level) {\n  if (attrStr && !val.includes('<')) {\n    return (\n      this.indentate(level) +\n      '<' +\n      key +\n      attrStr +\n      '>' +\n      val +\n      //+ this.newLine\n      // + this.indentate(level)\n      '</' +\n      key +\n      this.tagEndChar\n    );\n  } else {\n    return (\n      this.indentate(level) +\n      '<' +\n      key +\n      attrStr +\n      this.tagEndChar +\n      val +\n      //+ this.newLine\n      this.indentate(level) +\n      '</' +\n      key +\n      this.tagEndChar\n    );\n  }\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    return this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n    //+ this.newLine\n  }\n}\n\nfunction buildTextValNode(val, key, attrStr, level) {\n  return (\n    this.indentate(level) +\n    '<' +\n    key +\n    attrStr +\n    '>' +\n    this.options.tagValueProcessor(val) +\n    '</' +\n    key +\n    this.tagEndChar\n  );\n}\n\nfunction buildEmptyTextNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildTextValNode(val, key, attrStr, level);\n  } else {\n    return this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n  }\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nfunction isCDATA(name) {\n  return name === this.options.cdataTagName;\n}\n\n//formatting\n//indentation\n//\\n after each closing or self closing tag\n\nmodule.exports = Parser;\n","'use strict';\n\nconst nodeToJson = require('./node2json');\nconst xmlToNodeobj = require('./xmlstr2xmlnode');\nconst x2xmlnode = require('./xmlstr2xmlnode');\nconst buildOptions = require('./util').buildOptions;\n\nexports.parse = function(xmlData, options) {\n  options = buildOptions(options, x2xmlnode.defaultOptions, x2xmlnode.props);\n  return nodeToJson.convertToJson(xmlToNodeobj.getTraversalObj(xmlData, options), options);\n};\nexports.convertTonimn = require('../src/nimndata').convert2nimn;\nexports.getTraversalObj = xmlToNodeobj.getTraversalObj;\nexports.convertToJson = nodeToJson.convertToJson;\nexports.convertToJsonString = require('./node2json_str').convertToJsonString;\nexports.validate = require('./validator').validate;\nexports.j2xParser = require('./json2xml');\nexports.parseToNimn = function(xmlData, schema, options) {\n  return exports.convertTonimn(exports.getTraversalObj(xmlData, options), schema, options);\n};\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","import { Country } from 'country-data';\n\n/**\n * @typedef {Category} Category\n * @property {string[]} category\n */\nexport type Category = {\n  category: string[];\n};\n\n/**\n * @typedef {GameEU} GameEU\n * @property {string} age_rating_type\n * @property {string} age_rating_value\n * @property {string} copyright_s\n * @property {string} developer\n * @property {string} excerpt\n * @property {string} fs_id\n * @property {string} game_series_t\n * @property {string} gift_finder_carousel_image_url_s\n * @property {string} gift_finder_description_s\n * @property {string} gift_finder_detail_page_image_url_s\n * @property {string} gift_finder_detail_page_store_link_s\n * @property {string} gift_finder_wishlist_image_url_s\n * @property {string} image_url\n * @property {string} image_url_h2x1_s\n * @property {string} image_url_sq_s\n * @property {string} image_url_tm_s\n * @property {string} originally_for_t\n * @property {string} pretty_agerating_s\n * @property {string} pretty_date_s\n * @property {string} publisher\n * @property {string} sorting_title\n * @property {string} title\n * @property {string} type\n * @property {string} url\n * @property {boolean} add_on_content_b\n * @property {boolean} club_nintendo\n * @property {boolean} near_field_comm_b\n * @property {boolean} physical_version_b\n * @property {boolean} play_mode_handheld_mode_b\n * @property {boolean} play_mode_tabletop_mode_b\n * @property {boolean} play_mode_tv_mode_b\n * @property {Date} change_date\n * @property {Date} date_from\n * @property {Date} priority\n * @property {number} age_rating_sorting_i\n * @property {number} players_from\n * @property {number} players_to\n * @property {string[]} compatible_controller\n * @property {string[]} game_categories_txt\n * @property {string[]} game_category\n * @property {string[]} language_availability\n * @property {string[]} nsuid_txt Array containing the 14-digit game unique identifier\n * @property {string[]} playable_on_txt\n * @property {string[]} product_code_txt Array containing the product code\n * @property {string[]} system_names_txt\n * @property {string[]} system_type\n * @property {string[]} title_extras_txt\n */\nexport type GameEU = {\n  age_rating_type: string;\n  age_rating_value: string;\n  copyright_s: string;\n  developer: string;\n  excerpt: string;\n  fs_id: string;\n  game_series_t: string;\n  gift_finder_carousel_image_url_s: string;\n  gift_finder_description_s: string;\n  gift_finder_detail_page_image_url_s: string;\n  gift_finder_detail_page_store_link_s: string;\n  gift_finder_wishlist_image_url_s: string;\n  image_url: string;\n  image_url_h2x1_s: string;\n  image_url_sq_s: string;\n  image_url_tm_s: string;\n  originally_for_t: string;\n  pretty_agerating_s: string;\n  pretty_date_s: string;\n  publisher: string;\n  sorting_title: string;\n  title: string;\n  type: string;\n  url: string;\n  add_on_content_b: boolean;\n  club_nintendo: boolean;\n  near_field_comm_b: boolean;\n  physical_version_b: boolean;\n  play_mode_handheld_mode_b: boolean;\n  play_mode_tabletop_mode_b: boolean;\n  play_mode_tv_mode_b: boolean;\n  change_date: Date;\n  date_from: Date;\n  priority: Date;\n  age_rating_sorting_i: number;\n  players_from: number;\n  players_to: number;\n  compatible_controller: string[];\n  game_categories_txt: string[];\n  game_category: string[];\n  language_availability: string[];\n  nsuid_txt: string[];\n  playable_on_txt: string[];\n  product_code_txt: string[];\n  system_names_txt: string[];\n  system_type: string[];\n  title_extras_txt: string[];\n};\n\n/**\n * @typedef {GameUS} GameUS\n * @property {string} game_code Product code. Can be parsed for a region wide code.\n * @property {boolean} buyonline\n * @property {string} front_box_art\n * @property {number} eshop_price USA eShop price (in dollars)\n * @property {string} nsuid 14-digit game unique identifier\n * @property {string} video_link\n * @property {string} number_of_players\n * @property {number} ca_price Canada eShop price (in canadian dollars)\n * @property {string} id\n * @property {string} title\n * @property {string} system Gaming platform\n * @property {boolean} free_to_start\n * @property {boolean} digitaldownload\n * @property {string} release_date\n * @property {Category} categories\n * @property {string} slug Game URL name\n * @property {boolean} buyitnow\n */\nexport type GameUS = {\n  game_code: string;\n  buyonline: boolean;\n  front_box_art: string;\n  eshop_price: number;\n  nsuid: string;\n  video_link: string;\n  number_of_players: string;\n  ca_price: number;\n  id: string;\n  title: string;\n  system: string;\n  free_to_start: boolean;\n  digitaldownload: boolean;\n  release_date: string;\n  categories: Category;\n  slug: string;\n  buyitnow: boolean;\n};\n\n/**\n * @typedef {AlgoliaResults} AlgoliaResults\n * @property {GameUS[]} hits The games found\n * @property {number} nbHits Total number of hits with current query\n * @property {number} hitsPerPage Number of hits per page\n * @property {number} processingTimeMS\n * @property {Object.<Object>} facets\n * @property {Array.<string[]>} facetFilters Filters for the search query\n * @property {boolean} exhaustiveFacetsCount\n * @property {boolean} exhaustiveNbHits\n * @property {string} query\n * @property {string} params\n * @property {string} index\n */\nexport type AlgoliaResults = {\n  hits: GameUS[];\n  nbHits: number;\n  page: number;\n  nbPages: number;\n  hitsPerPage: number;\n  processingTimeMS: number;\n  facets: {\n    [key: string]: {\n      [key: string]: number;\n    };\n  };\n  facetFilters: string[][];\n  exhaustiveFacetsCount: boolean;\n  exhaustiveNbHits: boolean;\n  query: string;\n  params: string;\n  index: string;\n};\n\n/**\n * @typedef {AlgoliaResponse} AlgoliaResponse\n * @property {AlgoliaResponse[]} results\n */\nexport type AlgoliaResponse = {\n  results: AlgoliaResults[];\n};\n\n/**\n * @typedef {GameJP} GameJP\n * @property {string[]} LinkURL A single item array containing the game url\n * @property {string[]} LinkTarget\n * @property {string[]} ScreenshotImgURL A single item array containing the game thumbnail url\n * @property {string[]} ScreenshotImgURLComing\n * @property {string[]} TitleName A single item array containing the game title\n * @property {string[]} TitleNameRuby\n * @property {string[]} SoftType\n * @property {string[]} SalesDate\n * @property {string[]} SalesDateStr\n * @property {string[]} MakerName\n * @property {string[]} Hard\n * @property {string[]} Memo\n */\nexport type GameJP = {\n  LinkURL: string[];\n  LinkTarget: string[];\n  ScreenshotImgURL: string[];\n  ScreenshotImgURLComing: string[];\n  TitleName: string[];\n  TitleNameRuby: string[];\n  SoftType: string[];\n  SalesDate: string[];\n  SalesDateStr: string[];\n  MakerName: string[];\n  Hard: string[];\n  Memo: string[];\n};\n\n/**\n * @typedef {EShop} EShop\n * @property {string} code\n * @property {string} country\n * @property {string} currency\n * @property {Region} region\n */\nexport type EShop = {\n  code: string;\n  country: string;\n  currency: string;\n  region: Region;\n};\n\n/**\n * @typedef {PriceResponse} PriceResponse\n * @property {PriceError} error\n * @property {boolean} personalized\n * @property {string} country\n * @property {TitleData[]} prices\n */\nexport type PriceResponse = {\n  error: PriceError;\n  personalized: boolean;\n  country: Country;\n  prices: TitleData[];\n};\n\n/**\n * @typedef {TitleData} TitleData\n * @property {number} title_id\n * @property {string} sales_status\n * @property {PriceData} regular_price\n * @property {PriceData} [discount_price]\n */\nexport type TitleData = {\n  title_id: number;\n  sales_status: string;\n  regular_price: PriceData;\n  discount_price?: PriceData;\n};\n\n/**\n * @typedef {PriceError} PriceError\n * @property {string} code\n * @property {string} message\n */\nexport type PriceError = {\n  code: string;\n  message: string;\n};\n\n/**\n * @typedef {PriceData} PriceData\n * @property {string} amount\n * @property {string} currency\n * @property {string} raw_value\n * @property {string} [start_datetime]\n * @property {string} [end_datetime]\n */\nexport type PriceData = {\n  amount: string;\n  currency: string;\n  raw_value: string;\n  start_datetime?: string;\n  end_datetime?: string;\n};\n\n/**\n * @typedef {RequestOptions} RequestOptions\n * @property {number} limit Game count limit (Can only be lower than default page size). On the US eshop, the max limit is 1000. Leave empty to get all the games.\n */\ntype RequestOptions = {\n  limit?: number;\n};\n\n/**\n * @typedef {USRequestOptions} USRequestOptions\n * @property {'retail' | 'ncom' | 'all'} shop Either `'retail' / 'ncom' / 'all'`. Defaults to `'ncom'`.\n * @extends RequestOptions\n */\nexport type USRequestOptions = {\n  shop?: 'retail' | 'ncom' | 'all' | 'unfiltered';\n} & RequestOptions;\n\n/**\n * @typedef {EURequestOptions} EURequestOptions\n * @property {string} locale Game information locale. (EU Only)\n * @extends RequestOptions\n */\nexport type EURequestOptions = {\n  locale?: string;\n} & RequestOptions;\n\n/**\n * Predefined options for the unit system\n * @enum {Region} Region\n * @property {Region.AMERICAS} 1\n * @property {Region.EUROPE} 2\n * @property {Region.ASIA} 3\n */\nexport enum Region {\n  AMERICAS = 1,\n  EUROPE = 2,\n  ASIA = 3,\n}","\n\n/** Options used for getting US gmaes  */\nexport const US_GET_GAMES_OPTIONS = { system: 'platform:Nintendo Switch', sort: 'title', direction: 'asc' };\n\n/** Algolia ID for getting US games */\nexport const US_ALGOLIA_ID = 'U3B6GR4UA3';\n\n/** Algolia Key for getting US games */\nexport const US_ALGOLIA_KEY = '9a20c93440cf63cf1a7008d75f7438bf';\n\n/** URL for getting US Games */\nexport const US_GET_GAMES_URL = `https://${US_ALGOLIA_ID}-dsn.algolia.net/1/indexes/*/queries`;\n\n/** Sample game code for US store */\nexport const US_GAME_CHECK_CODE = '70010000000185';\n\n/** Regex for US game codes */\nexport const US_GAME_CODE_REGEX = /HAC\\w(\\w{4})/;\n\n/** Default limit for getting US games - Defaults to 200  */\nexport const US_GAME_LIST_LIMIT = 200;\n\n/** Price ranges for US games */\nexport const US_PRICE_RANGES = [\n  'Free to start',\n  '$0 - $4.99',\n  '$5 - $9.99',\n  '$10 - $19.99',\n  '$20 - $39.99',\n  '$40+'\n];\n\n/** Options used for getting EU gmaes  */\nexport const EU_GET_GAMES_OPTIONS = {\n  fq: 'type:GAME AND system_type:nintendoswitch* AND product_code_txt:*',\n  q: '*',\n  sort: 'sorting_title asc',\n  start: '0',\n  wt: 'json',\n};\n\n/** URL for getting EU Games */\nexport const EU_GET_GAMES_URL = 'http://search.nintendo-europe.com/{locale}/select';\n\n/** Sample game code for EU store */\nexport const EU_GAME_CHECK_CODE = '70010000000184';\n\n/** Regex for EU game codes */\nexport const EU_GAME_CODE_REGEX = /HAC\\w(\\w{4})/;\n\n/** Default locale when getting EU games - defaults to `en` */\nexport const EU_DEFAULT_LOCALE = 'en';\n\n/** Default limit used when getting EU games - defaults to `9999` */\nexport const EU_GAME_LIST_LIMIT = 9999;\n\n/** URL for getting currently released JP Games */\nexport const JP_GET_GAMES_CURRENT = 'https://www.nintendo.co.jp/data/software/xml-system/switch-onsale.xml';\n\n/** URL for getting upcoming JP Games */\nexport const JP_GET_GAMES_COMING = 'https://www.nintendo.co.jp/data/software/xml-system/switch-coming.xml';\n\n/** Sample game code for JP store */\nexport const JP_GAME_CHECK_CODE = '70010000000039';\n\n/** Regex for JP game codes */\nexport const JP_GAME_CODE_REGEX = /\\/HAC(\\w{4})/;\n\n/** Regex for JP NSUID */\nexport const JP_NSUID_REGEX = /\\d{14}/;\n\n/** URL for getting game prices */\nexport const PRICE_GET_URL = 'https://api.ec.nintendo.com/v1/price';\n\n/** Options for getting Price data */\nexport const PRICE_GET_OPTIONS = { lang: 'en' };\n\n/** Default limit used when getting price data - defaults to `50` */\nexport const PRICE_LIST_LIMIT = 50;\n\n/** Class representing an error in the nintendo-switch-eshop library */\nexport class EshopError extends Error {\n  /**\n   * Create an EshopError\n   * @param {string} message The message the error should show\n   */\n  public constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = 'EshopError';\n    this.stack = '';\n  }\n}","import { stringify } from '@favware/querystring';\nimport { countries, Country, regions } from 'country-data';\nimport { parse as xml2json } from 'fast-xml-parser';\nimport fetch from 'node-fetch';\nimport {\n  EshopError,\n  EU_DEFAULT_LOCALE,\n  EU_GAME_CHECK_CODE,\n  EU_GAME_CODE_REGEX,\n  EU_GAME_LIST_LIMIT,\n  EU_GET_GAMES_OPTIONS,\n  EU_GET_GAMES_URL,\n  JP_GAME_CHECK_CODE,\n  JP_GAME_CODE_REGEX,\n  JP_GET_GAMES_COMING,\n  JP_GET_GAMES_CURRENT,\n  JP_NSUID_REGEX,\n  PRICE_GET_OPTIONS,\n  PRICE_GET_URL,\n  PRICE_LIST_LIMIT,\n  US_ALGOLIA_ID,\n  US_ALGOLIA_KEY,\n  US_GAME_CHECK_CODE,\n  US_GAME_CODE_REGEX,\n  US_GAME_LIST_LIMIT,\n  US_GET_GAMES_OPTIONS,\n  US_GET_GAMES_URL,\n  US_PRICE_RANGES\n} from './constants';\nimport {\n  AlgoliaResponse,\n  EShop,\n  EURequestOptions,\n  GameEU,\n  GameJP,\n  GameUS,\n  PriceResponse,\n  Region,\n  TitleData,\n  USRequestOptions\n} from './interfaces';\n\n/**\n * Removed duplicates from an array\n * @param {any[]} array The input array\n * @param {string} property The property to check\n * @method\n * @private\n */\nconst arrayRemoveDuplicates = (array: any[], property: string) => {\n  const index: any[] = [];\n\n  return array.filter(item => {\n    const key = property ? item[property] : item;\n\n    return index.includes(key) ? false : index.push(key);\n  });\n};\n\n/**\n * Checks if object has a certain property\n * @param {object} obj Object to traverse\n * @param {string} prop Property to find\n * @method\n * @private\n */\nconst hasProp = (obj: object, prop: string) => obj && prop in obj;\n\n/**\n * Checks if the variable is an array of strings\n * @param {string | string[]} array Array to check\n * @returns boolean\n * @private\n */\nconst isStringArray = (array: string | string[]): array is string[] => {\n  return Array.isArray(array);\n};\n\n/**\n * Fetches all games on american eshops\n *\n * Paginates every 200 games, _(maximum item count per request)_\n * @param {USRequestOptions} [options] (Optional) Options for the request\n * @param {number} [offset] (Optional) Offset to start searching at\n * @param {string[]} [games] (Optional) Array of games to filter by\n * @returns {Promise<GameUS[]>} Promise containing all the games\n * @method\n */\nexport const getGamesAmerica = async (options: USRequestOptions = {}, offset: number = 0, games: GameUS[] = []): Promise<any> => {\n  /* eslint-disable */\r\n  const limit = hasProp(options, 'limit') ? options.limit : US_GAME_LIST_LIMIT;\r\n  const shopProp = hasProp(options, 'shop') ? options.shop : 'ncom';\r\n  let shop = shopProp === 'all' ? ['ncom', 'retail'] : shopProp;\r\n  shop = shop === 'unfiltered' ? undefined : shop;\r\n\r\n  const page = Math.floor(offset / (limit as number));\r\n\r\n  const shopMapper = (shopType: 'ncom' | 'retail' | string) => {\r\n    switch (shopType) {\r\n      case 'ncom':\r\n        return 'filterShops:On Nintendo.com';\r\n      case 'retail':\r\n        return 'filterShops:On retail';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  let shopFilters: ReturnType<typeof shopMapper> | (ReturnType<typeof shopMapper>)[] = [''];\r\n\r\n  if (shop) {\r\n    shopFilters = isStringArray(shop) ? shop.map(value => shopMapper(value)) : shopMapper(shop);\r\n  }\r\n\r\n\r\n  const sortingOptions = {\r\n    direction: US_GET_GAMES_OPTIONS.direction,\r\n    sortBy: US_GET_GAMES_OPTIONS.sort,\r\n  };\r\n\r\n  const body = {\r\n    body: JSON.stringify({\r\n      requests: [\r\n        {\r\n          indexName: `noa_aem_game_en_us${(sortingOptions.sortBy && sortingOptions.direction\r\n            ? `_${sortingOptions.sortBy}_${sortingOptions.direction}` : '')}`,\r\n          params: stringify({\r\n            facetFilters: [\r\n              [US_GET_GAMES_OPTIONS.system],\r\n              shopFilters\r\n            ],\r\n            hitsPerPage: limit,\r\n            page,\r\n          }),\r\n        }\r\n      ],\r\n    }),\r\n    headers: { 'Content-Type': 'application/json' },\r\n    method: 'post',\r\n  };\r\n\r\n  try {\r\n    if (hasProp(options, 'limit')) {\r\n      const gamesUS = await fetch(`${US_GET_GAMES_URL}?${stringify({\r\n        'x-algolia-api-key': US_ALGOLIA_KEY,\r\n        'x-algolia-application-id': US_ALGOLIA_ID,\r\n      })}`, body);\r\n\r\n      if (!gamesUS.ok) throw new Error('US_games_request_failed');\r\n\r\n      const filteredResponse: AlgoliaResponse = await gamesUS.json();\r\n      const accumulatedGames: GameUS[] = arrayRemoveDuplicates(games.concat(filteredResponse.results[0].hits), 'slug');\r\n\r\n      if (!hasProp(options, 'limit') && filteredResponse.results[0].hits.length + offset < filteredResponse.results[0].nbHits) {\r\n        return await getGamesAmerica(options, offset + (limit as number), accumulatedGames);\r\n      }\r\n\r\n      return accumulatedGames;\r\n    }\r\n    /**\r\n     * Using a workaround to get all the games.\r\n     * Basically, fetch all the games from the different categories one by one,\r\n     * if one category has > 1000 games, fetch all the games in each price range one by one.\r\n     *\r\n     * Get the counts of all the games in the different categories.\r\n     */\r\n    const countGamesBody = {\r\n      body: JSON.stringify({\r\n        requests: [{\r\n          indexName: 'noa_aem_game_en_us',\r\n          params: stringify({\r\n            facetFilters: [\r\n              [US_GET_GAMES_OPTIONS.system],\r\n              shopFilters\r\n            ],\r\n            facets: [\r\n              'categories'\r\n            ],\r\n            hitsPerPage: 0,\r\n          }),\r\n        }],\r\n      }),\r\n      headers: { 'Content-Type': 'application/json' },\r\n      method: 'post',\r\n    };\r\n\r\n    const gamesToCount = await fetch(`${US_GET_GAMES_URL}?${stringify({\r\n      'x-algolia-api-key': US_ALGOLIA_KEY,\r\n      'x-algolia-application-id': US_ALGOLIA_ID,\r\n    })}`, countGamesBody);\r\n    if (!gamesToCount.ok) throw new Error('US_games_request_failed');\r\n\r\n    const response: AlgoliaResponse = await gamesToCount.json();\r\n    const categoryCount = response.results[0].facets.categories;\r\n\r\n    // Loop through all the categories and fetch the games.\r\n    const allGamesPromises = Object.entries(categoryCount).map(async ([category, count]) => {\r\n      const normalRequest = [{\r\n        indexName: 'noa_aem_game_en_us',\r\n        params: stringify({\r\n          facetFilters: JSON.stringify([\r\n            [US_GET_GAMES_OPTIONS.system],\r\n            [`categories:${category}`],\r\n            shopFilters\r\n          ]),\r\n          hitsPerPage: 1000,\r\n        }),\r\n      }];\r\n\r\n      const manyPriceRangeRequests = US_PRICE_RANGES.map(priceRange => ({\r\n        indexName: 'noa_aem_game_en_us',\r\n        params: stringify({\r\n          facetFilters: JSON.stringify([\r\n            [US_GET_GAMES_OPTIONS.system],\r\n            [`categories:${category}`],\r\n            [`priceRange:${priceRange}`],\r\n            shopFilters\r\n          ]),\r\n          facets: [\r\n            'platform',\r\n            'categories'\r\n          ],\r\n          hitsPerPage: 1000,\r\n        }),\r\n      }));\r\n\r\n      const finalGamesBody = {\r\n        body: JSON.stringify({ requests: count > 1000 ? manyPriceRangeRequests : normalRequest }),\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n      };\r\n\r\n      const allGamesResponse = await fetch(`${US_GET_GAMES_URL}?${stringify({\r\n        'x-algolia-api-key': US_ALGOLIA_KEY,\r\n        'x-algolia-application-id': US_ALGOLIA_ID,\r\n      })}`, finalGamesBody);\r\n\r\n      if (!allGamesResponse.ok) throw new Error('US_games_request_failed');\r\n\r\n      const gamesResponse: AlgoliaResponse = await allGamesResponse.json();\r\n\r\n      return count > 1000\r\n        ? gamesResponse.results\r\n          .map(result => result.hits)\r\n          .reduce((a, b) => a.concat(b, []))\r\n        : gamesResponse.results[0].hits;\r\n    });\r\n\r\n    // Finally fetch all the games and remove duplicates\r\n    let allGames = (await Promise.all(allGamesPromises)).reduce((a, b) => a.concat(b, []));\r\n    allGames = arrayRemoveDuplicates(allGames, 'slug');\r\n\r\n    return allGames;\r\n  } catch (err) {\r\n    if (/(?:US_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of US Games failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches all games on japanese eShops\r\n * @returns {Promise<GameJP[]>} Promise containing all the games\r\n * @method\r\n * @name getGamesJapan\r\n */\r\nexport const getGamesJapan = async (): Promise<GameJP[]> => {\r\n  try {\r\n    const currentGamesJP = await fetch(JP_GET_GAMES_CURRENT);\r\n    const comingGamesJP = await fetch(JP_GET_GAMES_COMING);\r\n    if (!currentGamesJP.ok) throw new Error('JP_current_games_US_games_request_failed');\r\n    if (!comingGamesJP.ok) throw new Error('JP_coming_games_US_games_request_failed');\r\n\r\n    const parsedCurrentGames = xml2json(await currentGamesJP.text());\r\n    const parsedComingGames = xml2json(await comingGamesJP.text());\r\n    const currentGames: GameJP[] = parsedCurrentGames.TitleInfoList.TitleInfo;\r\n    const comingGames: GameJP[] = parsedComingGames.TitleInfoList.TitleInfo;\r\n\r\n    return currentGames.concat(comingGames);\r\n  } catch (err) {\r\n    if (/(?:JP_current_games_US_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of Current JP Games failed');\r\n    if (/(?:JP_coming_games_US_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of Upcoming JP Games failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches all games on european eShops\r\n * @param {EURequestOptions} [options] (Optional) Options for the request\r\n * @returns {Promise<GameUS[]>} Promise containing all the games\r\n * @method\r\n * @name getGamesEurope\r\n */\r\nexport const getGamesEurope = async (options: EURequestOptions = { limit: EU_GAME_LIST_LIMIT, locale: EU_DEFAULT_LOCALE }): Promise<GameEU[]> => {\r\n  if (!options.limit) options.limit = EU_GAME_LIST_LIMIT;\r\n  if (!options.locale) options.locale = EU_DEFAULT_LOCALE;\r\n\r\n  try {\r\n    const gamesEU = await fetch(`${EU_GET_GAMES_URL.replace('{locale}', options.locale)}?${stringify({\r\n      rows: options.limit,\r\n      ...EU_GET_GAMES_OPTIONS,\r\n    })}`);\r\n\r\n    if (!gamesEU.ok) throw new Error('EU_games_request_failed');\r\n\r\n    const gamesData = await gamesEU.json();\r\n\r\n    return gamesData.response.docs as GameEU[];\r\n  } catch (err) {\r\n    if (/(?:EU_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of EU Games failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Get pricing information for the requested games. Paginates every 50 games.\r\n * @param {string} country A two digit country code. (ISO 3166-1 alpha-2 country code)\r\n * @param {string[] | string} gameIds One or more NSUID of the corresponding games.\r\n * @param {number} [offset] (Optional) The offset to start at\r\n * @param {TitleData[]} [prices] (Optional) An array of {@link TitleData}\r\n * @return {Promise<PriceResponse>} A promise containing the pricing information.\r\n * @method\r\n * @name getPrices\r\n */\r\nexport const getPrices = async (country: string, gameIds: string[] | string, offset: number = 0, prices: TitleData[] = []): Promise<PriceResponse> => {\r\n  try {\r\n    const filteredIds = gameIds.slice(offset, offset + PRICE_LIST_LIMIT);\r\n    const priceData = await fetch(`${PRICE_GET_URL}?${stringify({\r\n      country,\r\n      ids: filteredIds,\r\n      limit: PRICE_LIST_LIMIT,\r\n      ...PRICE_GET_OPTIONS,\r\n    })}`);\r\n\r\n    if (priceData.status === 403) throw new Error('PRICE_Rate_Limit');\r\n    if (!priceData.ok) throw new Error('PRICE_get_request_failed');\r\n    const response: PriceResponse = await priceData.json();\r\n\r\n    if (response.prices && response.prices.length + offset < gameIds.length) {\r\n      const accumulatedPrices = prices.concat(response.prices);\r\n\r\n      return await getPrices(country, gameIds, offset + PRICE_LIST_LIMIT, accumulatedPrices);\r\n    } else if (response.prices) {\r\n      response.prices = response.prices.concat(prices);\r\n\r\n      return response;\r\n    }\r\n\r\n    return response;\r\n  } catch (err) {\r\n    if (/(?:PRICE_Rate_Limit)/i.test(err.toString())) throw new EshopError('Looks like you ran into a rate limit while getting price data, please do not spam the Nintendo servers.');\r\n    if (/(?:PRICE_get_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of eShop prices failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Gets all active eShops given a list of countries.\r\n * @param {string[]} countryCodes A list of 2 digit country codes for every country eShop to lookup. (ISO 3166-1 alpha-2 country codes)\r\n * @param {string} gameCode A 14 digits game NSUID from the desired region.\r\n * @param {Region} region A region id that will be appended in the final shop object for filtering purposes.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsByCountryCodes\r\n */\r\nexport const getShopsByCountryCodes = async (countryCodes: string[], gameCode: string, region: Region): Promise<EShop[]> => {\r\n  try {\r\n    const countryList: Country[] = countryCodes.map((code: string) => countries.all.filter((country: Country) => country.alpha2 === code)[0]);\r\n    const shops: PriceResponse[] = [];\r\n\r\n    for (const country of countryList) {\r\n      try {\r\n        const response = await getPrices(country.alpha2, gameCode);\r\n        response.country = country;\r\n        shops.push(response);\r\n      } catch (err) {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    const activeShops = shops.filter((shop: PriceResponse) => shop && shop.prices && shop.prices.length && shop.prices[0].regular_price);\r\n    const eShops = activeShops.map((shop: PriceResponse) => (\r\n      {\r\n        code: shop.country.alpha2,\r\n        country: shop.country.name,\r\n        currency: shop.prices[0].regular_price.currency,\r\n        region,\r\n      }\r\n    )\r\n    );\r\n\r\n    if (!eShops.length) throw new Error('ACTIVE_SHOPS_Rate_Limit');\r\n\r\n    return eShops;\r\n  } catch (err) {\r\n    if (/(?:ACTIVE_SHOPS_Rate_Limit)/i.test(err.toString())) throw new EshopError('Looks like you ran into a rate limit while getting price data, please do not spam the Nintendo servers.');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Gets all active eShops on American countries.\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsAmerica\r\n */\r\nexport const getShopsAmerica = async (): Promise<EShop[]> => {\r\n  return getShopsByCountryCodes(\r\n    regions.southAmerica.countries.concat(\r\n      regions.centralAfrica.countries, regions.northernAmerica.countries\r\n    ),\r\n    US_GAME_CHECK_CODE,\r\n    Region.AMERICAS\r\n  );\r\n};\r\n\r\n/**\r\n * Gets all active eShops on European countries.\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsEurope\r\n */\r\nexport const getShopsEurope = async (): Promise<EShop[]> => {\r\n  return getShopsByCountryCodes(\r\n    regions.northernEurope.countries.concat(\r\n      regions.southernEurope.countries, regions.easternEurope.countries,\r\n      regions.westernEurope.countries, regions.australia.countries,\r\n      regions.southernAfrica.countries\r\n    ),\r\n    EU_GAME_CHECK_CODE,\r\n    Region.EUROPE\r\n  );\r\n};\r\n\r\n/**\r\n * Gets all active eShops on Asian countries\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsAsia\r\n */\r\nexport const getShopsAsia = async (): Promise<EShop[]> => {\r\n  return getShopsByCountryCodes(\r\n    regions.southernAsia.countries.concat(\r\n      regions.southernAsia.countries, regions.southeastAsia.countries,\r\n      regions.eastAsia.countries, regions.westernAsia.countries\r\n    ),\r\n    JP_GAME_CHECK_CODE,\r\n    Region.ASIA\r\n  );\r\n};\r\n\r\n/**\r\n * Gets all active eShops.\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getActiveShops\r\n */\r\nexport const getActiveShops = async (): Promise<EShop[]> => {\r\n  const shopsAmerica = await getShopsAmerica();\r\n  const shopsAsia = await getShopsAsia();\r\n  const shopsEurope = await getShopsEurope();\r\n\r\n  return shopsAmerica.concat(shopsAsia, shopsEurope);\r\n};\r\n\r\n/**\r\n * Parses the game code to extract the cross-region protion.\r\n * @param {GameUS | GameEU | GameJP} game The game object returned from one of the other methods.\r\n * @param {Region} region Region code\r\n * @returns {string | null} The 4-digit resulting game code\r\n * @method\r\n * @name parseGameCode\r\n */\r\nexport const parseGameCode = (game: GameUS | GameEU | GameJP, region: Region): string | null => {\r\n  let codeParse: RegExpExecArray | null;\r\n\r\n  switch (region) {\r\n    case Region.EUROPE:\r\n      codeParse = EU_GAME_CODE_REGEX.exec((game as GameEU).product_code_txt[0]);\r\n      break;\r\n    case Region.ASIA:\r\n      codeParse = JP_GAME_CODE_REGEX.exec((game as GameJP).ScreenshotImgURL[0]);\r\n      break;\r\n    default:\r\n    case Region.AMERICAS:\r\n      codeParse = US_GAME_CODE_REGEX.exec((game as GameUS).game_code);\r\n      break;\r\n  }\r\n\r\n  return (codeParse && codeParse.length > 1) ? codeParse[1] : null;\r\n};\r\n\r\n/**\r\n * Extracts NSUID information from the game object.\r\n * @param {GameUS | GameEU | GameJP} game The game object returned from one of the other methods.\r\n * @param {Region} region Region code\r\n * @returns {string | null} The 14-digits NSUID\r\n * @method\r\n * @name parseNSUID\r\n */\r\nexport const parseNSUID = (game: GameUS | GameEU | GameJP, region: Region): string | null => {\r\n  switch (region) {\r\n    case Region.EUROPE:\r\n      return (game as GameEU).nsuid_txt ? (game as GameEU).nsuid_txt[0] : null;\r\n    case Region.ASIA:\r\n      const nsuidParse = JP_NSUID_REGEX.exec((game as GameJP).LinkURL[0]);\r\n\r\n      return (nsuidParse && nsuidParse.length > 0) ? nsuidParse[0] : null;\r\n    default:\r\n    case Region.AMERICAS:\r\n      return (game as GameUS).nsuid;\r\n  }\r\n};"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","e","__assign","assign","t","s","i","n","arguments","length","prototype","call","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","Parse","Stringify","isFinite","toString","o","separator","equals","includeQuestion","keys","Error","sort","map","r","encodeURIComponent","isArray","join","filter","Boolean","test","err","root","previousUnderscore","breaker","ArrayProto","ObjProto","FuncProto","Function","slice","concat","nativeForEach","forEach","nativeMap","nativeReduce","reduce","nativeReduceRight","reduceRight","nativeFilter","nativeEvery","every","nativeSome","some","nativeIndexOf","indexOf","nativeLastIndexOf","lastIndexOf","nativeIsArray","nativeKeys","nativeBind","bind","obj","_wrapped","module","exports","VERSION","each","context","collect","results","index","list","reduceError","foldl","inject","memo","initial","foldr","find","detect","predicate","any","select","all","identity","contains","include","target","invoke","method","args","isFunc","isFunction","pluck","key","property","where","attrs","matches","findWhere","max","Math","Infinity","lastComputed","computed","min","shuffle","rand","shuffled","random","sample","guard","values","lookupIterator","sortBy","criteria","left","right","a","group","behavior","groupBy","has","indexBy","countBy","sortedIndex","array","low","high","mid","toArray","size","first","head","take","last","rest","tail","drop","compact","flatten","input","shallow","output","isArguments","without","difference","partition","pass","fail","elem","uniq","unique","isSorted","seen","union","intersection","item","other","zip","object","from","hasIndex","range","start","stop","ceil","idx","ctor","func","bound","self","partial","boundArgs","position","bindAll","funcs","memoize","hasher","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","remaining","clearTimeout","trailing","debounce","immediate","timestamp","callNow","once","ran","wrap","wrapper","compose","after","times","isObject","pairs","invert","functions","methods","names","extend","source","prop","pick","copy","omit","defaults","clone","tap","interceptor","eq","aStack","bStack","className","String","global","multiline","ignoreCase","aCtor","constructor","bCtor","isEqual","isEmpty","isString","isElement","nodeType","name","isNaN","parseFloat","isNumber","isBoolean","isNull","isUndefined","noConflict","constant","accum","floor","Date","getTime","entityMap","escape","&","<",">","\"","'","unescape","entityRegexes","RegExp","string","replace","match","mixin","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n","\t"," "," ","escaper","template","text","data","settings","render","matcher","offset","variable","chain","_chain","regions","centralAsia","countries","southernAsia","southeastAsia","eastAsia","westernAsia","centralAfrica","northAfrica","southernAfrica","eastAfrica","westAfrica","centralAmerica","northernAmerica","caribbean","southAmerica","antartica","northernEurope","southernEurope","easternEurope","westernEurope","australia","melanesia","micronesia","polynesia","continents","asia","africa","northAmerica","europe","oceania","search","currencies","languages","query","q","ALL","AFN","ARS","AWG","AUD","AZN","BSD","BBD","BYR","BZD","BMD","BOB","BAM","BWP","BGN","BRL","BND","KHR","CAD","KYD","CLP","CNY","COP","CRC","HRK","CUP","CZK","DKK","DOP","XCD","EGP","SVC","EEK","EUR","FKP","FJD","GHC","GIP","GTQ","GGP","GYD","HNL","HKD","HUF","ISK","INR","IDR","IRR","IMP","ILS","JMD","JPY","JEP","KES","KZT","KPW","KRW","KGS","LAK","LVL","LBP","LRD","LTL","MKD","MYR","MUR","MXN","MNT","MZN","NAD","NPR","ANG","NZD","NIO","NGN","NOK","OMR","PKR","PAB","PYG","PEN","PHP","PLN","QAR","RON","RUB","SHP","SAR","RSD","SCR","SGD","SBD","SOS","ZAR","LKR","SEK","CHF","SRD","SYP","TZS","TWD","THB","TTD","TRY","TRL","TVD","UGX","UAH","GBP","USD","UYU","UZS","VEF","VND","YER","ZWD","currencyCode","countriesAll","country","exportedAlpha2","alpha2","status","exportedAlpha3","alpha3","currenciesAll","currency","symbol","getSymbol","code","languagesAll","language","bibliographic","lookup","callingCountries","callingCodesAll","codes","countryCallingCodes","parse","str","parseInt","splitA","split","splitB","undefined","doesMatch","regex","exec","len","isExist","defaultOptions","props","newOptions","allmatches","convertToJson","node","jObj","child","util","isEmptyObject","attrsMap","val","cdataPositionChar","textNodeName","merge","tagname","tag","parent","addChild","buildOptions","TagType","OPENING","CLOSING","SELF","CDATA","regx","Number","window","attributeNamePrefix","attrNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","localeRange","tagValueProcessor","attrValueProcessor","stopNodes","processTagValue","trim","parseValue","parseTrueNumberOnly","resolveNameSpace","tags","charAt","shouldParse","parsed","attrsRegx","buildAttributesMap","attrStr","getAllMatches","attrName","attrCollection","xmlData","xmlObj","xmlNode","currentNode","tagsRegx","nextTag","tagType","getValue","includes","substr","startIndex","childNode","char","fromCharCode","chars","nilChar","missingChar","nilPremitive","missingPremitive","emptyChar","emptyValue","boundryChar","objStart","arrStart","arrayEnd","charsArr","_e","e_schema","hasValidData","itemSchema","arr_len","arr_i","processValue","isAppChar","ch","require$$0","x2j","_cToJsonStr","level","indentBy","readPI","msg","readCommentAndCDATA","angleBracketsCount","doubleQuote","singleQuote","readAttributeStr","startChar","validAttrStrRegxp","validateAttributeString","regxAttrName","attrNames","validateAttrName","validateTagName","regxTagName","doesNotMatch","tagFound","closingTag","tagName","substring","isValid","otg","JSON","stringify","format","supressEmptyNode","Parser","isAttribute","attrPrefixLen","isCDATA","replaceCDATAstr","replaceCDATAarr","indentate","tagEndChar","newLine","buildTextNode","buildEmptyTextNode","buildObjNode","buildEmptyObjNode","buildTextValNode","buildObjectNode","cdata","repeat","startsWith","j2x","attr","arrLen","j","Ks","L","x2xmlnode","xmlToNodeobj","nodeToJson","getTraversalObj","require$$1","convert2nimn","require$$2","convertToJsonString","require$$3","require$$4","schema","convertTonimn","freeExports","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","overflow","not-basic","invalid-input","baseMinusTMin","stringFromCharCode","error","type","RangeError","fn","mapDomain","parts","ucs2decode","extra","counter","charCodeAt","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","out","basic","oldi","w","baseMinusT","codePoint","inputLength","bias","splice","encode","handledCPCount","basicLength","m","currentValue","handledCPCountPlusOne","qMinusT","version","ucs2","toASCII","toUnicode","toLowerCase","arg","isNullOrUndefined","qs","sep","regexp","maxKeys","kstr","vstr","x","decodeURIComponent","stringifyPrimitive","ks","urlParse","relative","resolveObject","Url","protocol","slashes","auth","host","port","hostname","hash","pathname","path","href","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","url","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","simplePath","querystring","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","l","part","newpart","validParts","notHost","bit","unshift","h","ae","esc","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","hasTrailingSlash","up","isAbsolute","Readable","Stream","BUFFER","TYPE","Blob","[object Object]","blobParts","buffers","element","buffer","Buffer","ArrayBuffer","isView","byteOffset","byteLength","buf","ab","readable","_read","end","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","message","systemError","errno","captureStackTrace","convert","defineProperties","enumerable","defineProperty","toStringTag","writable","configurable","create","require","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","isBuffer","disturbed","on","consumeBody","_this4","alloc","stream","accumBytes","abort","resTimeout","chunk","append","delete","get","getAll","set","arrayBuffer","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","headers","_this2","_this3","res","charset","convertBody","json","mixIn","getOwnPropertyNames","desc","getOwnPropertyDescriptor","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","Headers","init","rawHeaders","raw","headerNames","headerName","pair","callback","getHeaders","_pairs$i","createHeadersIterator","kind","entries","INTERNAL","HeadersIteratorPrototype","getPrototypeOf","_INTERNAL","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","opts","contentType","statusText","ok","redirected","INTERNALS$2","parse_url","format_url","streamDestructionSupported","isRequest","Request","parsedURL","toUpperCase","inputBody","signal","isAbortSignal","redirect","follow","compress","agent","AbortError","PassThrough$1","resolve_url","fetch","request","contentLengthValue","totalBytes","getNodeRequestOptions","send","response","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","socket","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","zlib","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","dest","write","writeToStream","Region","US_GET_GAMES_OPTIONS","system","direction","US_ALGOLIA_ID","US_ALGOLIA_KEY","US_GET_GAMES_URL","US_GAME_CHECK_CODE","US_GAME_CODE_REGEX","US_GAME_LIST_LIMIT","US_PRICE_RANGES","EU_GET_GAMES_OPTIONS","fq","wt","EU_GET_GAMES_URL","EU_GAME_CHECK_CODE","EU_GAME_CODE_REGEX","EU_DEFAULT_LOCALE","EU_GAME_LIST_LIMIT","JP_GET_GAMES_CURRENT","JP_GET_GAMES_COMING","JP_GAME_CHECK_CODE","JP_GAME_CODE_REGEX","JP_NSUID_REGEX","PRICE_GET_URL","PRICE_GET_OPTIONS","lang","PRICE_LIST_LIMIT","_super","stack","__","tslib_1.__extends","arrayRemoveDuplicates","hasProp","getGamesAmerica","games","limit","shopProp","shop","page","shopMapper","shopType","shopFilters","sortingOptions","requests","indexName","params","facetFilters","hitsPerPage","Content-Type","x-algolia-api-key","x-algolia-application-id","gamesUS","_a","filteredResponse","accumulatedGames","hits","nbHits","countGamesBody","facets","gamesToCount","categoryCount","categories","allGamesPromises","category","count","normalRequest","manyPriceRangeRequests","priceRange","finalGamesBody","allGamesResponse","_b","gamesResponse","allGames","err_1","EshopError","getGamesJapan","currentGamesJP","_c","comingGamesJP","xml2json","parsedCurrentGames","parsedComingGames","currentGames","TitleInfoList","TitleInfo","comingGames","err_2","getGamesEurope","locale","rows","gamesEU","docs","err_3","getPrices","gameIds","prices","filteredIds","ids","priceData","accumulatedPrices","err_4","getShopsByCountryCodes","countryCodes","gameCode","region","countryList","shops","countryList_1","_i","activeShops","regular_price","eShops","err_6","getShopsAmerica","AMERICAS","getShopsEurope","EUROPE","getShopsAsia","ASIA","getActiveShops","shopsAmerica","shopsAsia","shopsEurope","parseGameCode","game","codeParse","product_code_txt","ScreenshotImgURL","game_code","parseNSUID","nsuid_txt","nsuidParse","LinkURL","nsuid"],"mappings":"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,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJS,WAAqB,CACnBhE,KAAM,cACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJU,eAAyB,CACvBjE,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,OAIJW,gBAA0B,CACxBlE,KAAM,mBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,OAIJY,UAAoB,CAClBnE,KAAM,YACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJa,aAAuB,CACrBpE,KAAM,gBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJc,UAAoB,CAClBrE,KAAM,YACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,OAIJe,eAAyB,CACvBtE,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJgB,eAAyB,CACvBvE,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJiB,cAAwB,CACtBxE,KAAM,iBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJkB,cAAwB,CACtBzE,KAAM,iBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJmB,UAAoB,CAClB1E,KAAM,YACNuD,UAAW,CAET,KACA,KACA,OAIJoB,UAAoB,CAClB3E,KAAM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"}