{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@favware/querystring/dist/index.es.js","../node_modules/underscore/underscore.js","../node_modules/country-data/data/regions.js","../node_modules/country-data/data/continents.js","../node_modules/country-data/lookup.js","../node_modules/currency-symbol-map/map.js","../node_modules/currency-symbol-map/currency-symbol-map.js","../node_modules/country-data/index.js","../node_modules/fast-xml-parser/src/util.js","../node_modules/fast-xml-parser/src/node2json.js","../node_modules/fast-xml-parser/src/xmlNode.js","../node_modules/fast-xml-parser/src/xmlstr2xmlnode.js","../node_modules/fast-xml-parser/src/nimndata.js","../node_modules/fast-xml-parser/src/node2json_str.js","../node_modules/fast-xml-parser/src/validator.js","../node_modules/fast-xml-parser/src/json2xml.js","../node_modules/fast-xml-parser/src/parser.js","../../node_modules/url/node_modules/punycode/punycode.js","../../node_modules/url/util.js","../../node_modules/querystring/decode.js","../../node_modules/querystring/encode.js","../../node_modules/querystring/index.js","../../node_modules/url/url.js","../node_modules/node-fetch/lib/index.mjs","../src/constants.ts","../src/interfaces.ts","../src/nintendo-switch-eshop.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","var e;!function(e){e.Parse=\"parse\",e.Stringify=\"stringify\"}(e||(e={}));var t=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e.toString():\"\";default:return\"\"}},r=function(t,r){switch(r){case e.Parse:return{err:t};case e.Stringify:default:return t}},n=function(n,o){void 0===o&&(o={separator:\"&\",equals:\"=\",includeQuestion:!1});try{if(!n||Object.keys(n).length<=0)throw new Error(\"object_is_empty\");if(\"object\"!=typeof n)throw new Error(\"input_not_object\");o.separator||(o.separator=\"&\"),o.equals||(o.equals=\"=\"),o.includeQuestion||(o.includeQuestion=!1);var i=Object.keys(n).sort().map(function(e){var r=encodeURIComponent(t(e))+o.equals;return void 0===n[e]?\"\":null===n[e]?encodeURIComponent(e):Array.isArray(n[e])?n[e].map(function(e){return r+encodeURIComponent(t(e))}).join(o.separator):r+encodeURIComponent(t(n[e]))}).filter(Boolean);return o.includeQuestion&&(i[0]=\"?\"+i[0]),i.join(o.separator)}catch(i){return/object_is_empty/i.test(i.toString())?(o.includeQuestion?\"?\":\"\")+encodeURIComponent(t(n)):/input_not_object/i.test(i.toString())?r(\"@Favware/Querystring: Your input was not an object. Please supply an object when using Stringify\",e.Stringify):i}},o=function(t,n){void 0===t&&(t=\"\"),void 0===n&&(n={separator:\"&\",equals:\"=\"});try{if(\"string\"!=typeof t)throw new Error(\"input_not_string\");if(\"\"===t)return{};/^https?:\\/\\//.test(t)&&(t=t.split(\"?\")[1]),n.separator||(n.separator=\"&\"),n.equals||(n.equals=\"=\"),t.startsWith(\"?\")&&(t=t.slice(1));var o={},i=/\\+/g,s=t.split(n.separator),a=s.length;a>1e3&&(a=1e3);for(var u=0,p=s;u<p.length;u++){var c=p[u].replace(i,\"%20\"),l=c.indexOf(n.equals),f=void 0,d=void 0;l>=0?(f=c.substr(0,l),d=c.substr(l+1)):(f=c,d=\"\");var g=decodeURIComponent(f),y=decodeURIComponent(d);o.hasOwnProperty(g)?Array.isArray(o[g])?o[g].push(y):o[g]=[o[g],y]:o[g]=y}return o}catch(t){return/input_not_string/i.test(t.toString())?r(\"@Favware/Querystring: Your input was not an string. Please supply a string when using Parse\",e.Parse):t}};export default n;export{o as parse,n as stringify};\n//# sourceMappingURL=index.es.js.map\n","//     Underscore.js 1.6.0\n//     http://underscorejs.org\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    concat           = ArrayProto.concat,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeForEach      = ArrayProto.forEach,\n    nativeMap          = ArrayProto.map,\n    nativeReduce       = ArrayProto.reduce,\n    nativeReduceRight  = ArrayProto.reduceRight,\n    nativeFilter       = ArrayProto.filter,\n    nativeEvery        = ArrayProto.every,\n    nativeSome         = ArrayProto.some,\n    nativeIndexOf      = ArrayProto.indexOf,\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.6.0';\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function(obj, iterator, context) {\n    if (obj == null) return obj;\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, length = obj.length; i < length; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (var i = 0, length = keys.length; i < length; i++) {\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n    each(obj, function(value, index, list) {\n      results.push(iterator.call(context, value, index, list));\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function(value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function(value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var result;\n    any(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(predicate, context);\n    each(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, function(value, index, list) {\n      return !predicate.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = true;\n    if (obj == null) return result;\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(predicate, context);\n    each(obj, function(value, index, list) {\n      if (!(result = result && predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = false;\n    if (obj == null) return result;\n    if (nativeSome && obj.some === nativeSome) return obj.some(predicate, context);\n    each(obj, function(value, index, list) {\n      if (result || (result = predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function(obj, target) {\n    if (obj == null) return false;\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n    return any(obj, function(value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matches(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matches(attrs));\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n  _.max = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    var result = -Infinity, lastComputed = -Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed > lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    var result = Infinity, lastComputed = Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed < lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Shuffle an array, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function(value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (obj.length !== +obj.length) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function(value) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return value;\n    return _.property(value);\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function(obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iterator.call(context, value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iterator, context) {\n      var result = {};\n      iterator = lookupIterator(iterator);\n      each(obj, function(value, index) {\n        var key = iterator.call(context, value, index, obj);\n        behavior(result, key, value);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, key, value) {\n    _.has(result, key) ? result[key].push(value) : result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, key, value) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, key) {\n    _.has(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = (low + high) >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[0];\n    if (n < 0) return [];\n    return slice.call(array, 0, n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[array.length - 1];\n    return slice.call(array, Math.max(array.length - n, 0));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, (n == null) || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, output) {\n    if (shallow && _.every(input, _.isArray)) {\n      return concat.apply(output, input);\n    }\n    each(input, function(value) {\n      if (_.isArray(value) || _.isArguments(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Split an array into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(array, predicate) {\n    var pass = [], fail = [];\n    each(array, function(elem) {\n      (predicate(elem) ? pass : fail).push(elem);\n    });\n    return [pass, fail];\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function(value, index) {\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(_.flatten(arguments, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function(item) {\n      return _.every(rest, function(other) {\n        return _.contains(other, item);\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    var length = _.max(_.pluck(arguments, 'length').concat(0));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(arguments, '' + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    if (list == null) return {};\n    var result = {};\n    for (var i = 0, length = list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, length = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function(array, item, from) {\n    if (array == null) return -1;\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = (hasIndex ? from : array.length);\n    while (i--) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(length);\n\n    while(idx < length) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Reusable constructor function for prototype setting.\n  var ctor = function(){};\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError;\n    args = slice.call(arguments, 2);\n    return bound = function() {\n      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\n      ctor.prototype = func.prototype;\n      var self = new ctor;\n      ctor.prototype = null;\n      var result = func.apply(self, args.concat(slice.call(arguments)));\n      if (Object(result) === result) return result;\n      return self;\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    return function() {\n      var position = 0;\n      var args = boundArgs.slice();\n      for (var i = 0, length = args.length; i < length; i++) {\n        if (args[i] === _) args[i] = arguments[position++];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return func.apply(this, args);\n    };\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) throw new Error('bindAll must be passed function names');\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function() {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function(func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    options || (options = {});\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n      if (last < wait) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function(func) {\n    var ran = false, memo;\n    return function() {\n      if (ran) return memo;\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = new Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = new Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function(key) {\n      if (key in obj) copy[key] = obj[key];\n    });\n    return copy;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) copy[key] = obj[key];\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] === void 0) obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source &&\n               a.global == b.global &&\n               a.multiline == b.multiline &&\n               a.ignoreCase == b.ignoreCase;\n    }\n    if (typeof a != 'object' || typeof b != 'object') return false;\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) return bStack[length] == b;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\n                             _.isFunction(bCtor) && (bCtor instanceof bCtor))\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0, result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\n        }\n      }\n    } else {\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !(size--)) break;\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n    for (var key in obj) if (_.has(obj, key)) return false;\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (typeof (/./) !== 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function(value) {\n    return value;\n  };\n\n  _.constant = function(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  _.property = function(key) {\n    return function(obj) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of `key:value` pairs.\n  _.matches = function(attrs) {\n    return function(obj) {\n      if (obj === attrs) return true; //avoid comparing an object to itself.\n      for (var key in attrs) {\n        if (attrs[key] !== obj[key])\n          return false;\n      }\n      return true;\n    }\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iterator, context) {\n    var accum = Array(Math.max(0, n));\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() { return new Date().getTime(); };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function(method) {\n    _[method] = function(string) {\n      if (string == null) return '';\n      return ('' + string).replace(entityRegexes[method], function(match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property) {\n    if (object == null) return void 0;\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\t':     't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function(text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset)\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      }\n      if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      }\n      if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + \"return __p;\\n\";\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, _);\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function(obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n\n    // Start chaining a wrapped Underscore object.\n    chain: function() {\n      this._chain = true;\n      return this;\n    },\n\n    // Extracts the result from a wrapped and chained object.\n    value: function() {\n      return this._wrapped;\n    }\n\n  });\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}).call(this);\n","'use strict';\n\nvar regions = {};\n\nregions.centralAsia = {\n  name: 'Central Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Central_Asia\n    'KZ', // Kazakhstan\n    'KG', // Kyrgyzstan\n    'TJ', // Tajikistan\n    'TM', // Turkmenistan\n    'UZ', // Uzbekistan\n  ]\n}\n\nregions.southernAsia = {\n  name: 'Southern Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/South_Asia\n    'AF', // Afghanistan\n    'BD', // Bangladesh\n    'BT', // Bhutan\n    'IO', // British Indian Ocean Territory\n    'IN', // India\n    'IR', // Iran\n    'MV', // Maldives\n    'NP', // Nepal\n    'PK', // Pakistan\n    'LK', // Sri Lanka\n  ]\n}\n\nregions.southeastAsia = {\n  name: 'Southeast Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Southeast_Asia\n    'BN', // Brunei\n    'KH', // Cambodia\n    'CX', // Christmas Island\n    'CC', // Cocos (Keeling) Islands\n    'TL', // East Timor\n    'ID', // Indonesia\n    'LA', // Laos\n    'MY', // Malaysia\n    'MM', // Myanmar (Burma)\n    'PH', // Philippines\n    'SG', // Singapore\n    'TH', // Thailand\n    'VN', // Vietnam\n  ]\n}\n\nregions.eastAsia = {\n  name: 'East Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/East_Asia\n    'CN', // China\n    'HK', // Hong Kong\n    'JP', // Japan\n    'KP', // North Korea\n    'KR', // South Korea\n    'MO', // Macao\n    'MN', // Mongolia\n    'TW', // Taiwan\n  ]\n}\n\nregions.westernAsia = {\n  name: 'Western Asia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Western_Asia\n    'AM', // Armenia\n    'AZ', // Azerbaijan\n    'BH', // Bahrain\n    'IQ', // Iraq\n    'IL', // Israel\n    'JO', // Jordan\n    'KW', // Kuwait\n    'LB', // Lebanon\n    'OM', // Oman\n    'PS', // Palestinian territories\n    'QA', // Qatar\n    'SA', // Saudi Arabia\n    'SY', // Syria\n    'TR', // Turkey\n    'AE', // United Arab Emirates\n    'YE', // Yemen\n  ]\n}\n\nregions.centralAfrica = {\n  name: 'Central Aftrica',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Central_Africa\n    'AO', // Angola\n    'CM', // Cameroon\n    'CF', // Central African Republic\n    'TD', // Chad\n    'CG', // Republic of the Congo\n    'CD', // Democratic Republic of the Congo\n    'GQ', // Equatorial Guinea\n    'GA', // Gabon\n    'ST', // São Tomé and Príncipe\n  ]\n};\n\nregions.northAfrica = {\n  name: 'North Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/North_Africa\n    'DZ', // Algeria\n    'EG', // Egypt\n    'LY', // Libya\n    'MA', // Morocco\n    'SD', // Sudan\n    'TN', // Tunisia\n    'EH', // Western Sahara\n  ]\n};\n\nregions.southernAfrica = {\n  name: 'Southern Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Southern_Africa\n    'BW', // Botswana\n    'LS', // Lesotho\n    'NA', // Namibia\n    'ZA', // South Africa\n    'SZ', // Swaziland\n  ]\n};\n\nregions.eastAfrica = {\n  name: 'East Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/East_Africa\n    'BI', // Burundi\n    'KM', // Comoros\n    'DJ', // Djibouti\n    'ER', // Eritrea\n    'ET', // Ethiopia\n    'KE', // Kenya\n    'MG', // Madagascar\n    'MW', // Malawi\n    'MU', // Mauritius\n    'YT', // Mayotte (France)\n    'MZ', // Mozambique\n    'RE', // Réunion (France)\n    'RW', // Rwanda\n    'SC', // Seychelles\n    'SO', // Somalia\n    'SS', // South Sudan\n    'TZ', // Tanzania\n    'UG', // Uganda\n    'ZM', // Zambia\n    'ZW', // Zimbabwe\n  ]\n};\n\nregions.westAfrica = {\n  name: 'West Africa',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/West_Africa\n    'BJ', // Benin\n    'BF', // Burkina Faso\n    'CV', // Cabo Verde\n    'CI', // Côte d'Ivoire\n    'GM', // Gambia\n    'GH', // Ghana\n    'GN', // Guinea\n    'GW', // Guinea-Bissau\n    'LR', // Liberia\n    'ML', // Mali\n    'MR', // Mauritania\n    'NE', // Niger\n    'NG', // Nigeria\n    'SH', // Saint Helena, Ascension and Tristan da Cunha (United Kingdom)\n    'SN', // Senegal\n    'SL', // Sierra Leone\n    'TG', // Togo\n  ]\n};\n\nregions.centralAmerica = {\n  name: 'Central America',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Central_America\n    'BZ', // Belize\n    'CR', // Costa Rica\n    'SV', // El Salvador\n    'GT', // Guatemala\n    'HN', // Honduras\n    'NI', // Nicaragua\n    'PA', // Panama\n  ]\n}\n\nregions.northernAmerica = {\n  name: 'Northern America',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Northern_America\n    'BM', // Bermuda\n    'CA', // Canada\n    'GL', // Greenland\n    'MX', // Mexico\n    'PM', // Saint Pierre and Miquelon\n    'US', // United States\n  ]\n}\n\nregions.caribbean = {\n  name: 'Caribbean',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Caribbean\n    'AI', // Anguilla\n    'AG', // Antigua and Barbuda\n    'AW', // Aruba\n    'BS', // Bahamas\n    'BB', // Barbados\n    'BQ', // Bonaire, Sint Eustatius & Saba\n    'VG', // British Virgin Islands\n    'KY', // Cayman Islands\n    'CU', // Cuba\n    'CW', // Curaçao\n    'DM', // Dominica\n    'DO', // Dominican Republic\n    'GD', // Grenada\n    'GP', // Guadeloupe\n    'HT', // Haiti\n    'JM', // Jamaica\n    'MQ', // Martinique\n    'MS', // Montserrat\n    'PR', // Puerto Rico\n    'BL', // Saint Barthélemy\n    'KN', // St. Kitts & Nevis\n    'LC', // Saint Lucia\n    'MF', // Saint Martin\n    'VC', // Saint Vincent and the Grenadines\n    'SX', // Sint Maarten\n    'TT', // Trinidad and Tobago\n    'TC', // Turks & Caicos\n    'VI', // United States Virgin Islands\n  ]\n}\n\nregions.southAmerica = {\n  name: 'South America',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/South_America\n    'AR', // Argentina\n    'BO', // Bolivia\n    'BR', // Brazil\n    'CL', // Chile\n    'CO', // Colombia\n    'EC', // Ecuador\n    'FK', // Falkland Islands\n    'GF', // French Guiana\n    'GY', // Guyana\n    'PY', // Paraguay\n    'PE', // Peru\n    'SR', // Suriname\n    'UY', // Uruguay\n    'VE', // Venezuela\n  ]\n}\n\nregions.antartica = {\n  name: 'Antartica',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Antarctica\n    'AQ', // Antarctica\n    'BV', // Bouvet Island\n    'TF', // French Southern Territories\n    'HM', // Heard Island and McDonald Islands\n    'GS', // South Georgia and the South Sandwich Islands\n  ]\n}\n\nregions.northernEurope = {\n  name: 'Northern Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Northern_Europe\n    'AX', // Åland\n    'DK', // Denmark\n    'EE', // Estonia\n    'FO', // Faroe Islands\n    'FI', // Finland\n    'GG', // Guernsey\n    'IS', // Iceland\n    'IE', // Republic of Ireland\n    'JE', // Jersey (UK)\n    'IM', // Isle of Man\n    'LV', // Latvia\n    'LT', // Lithuania\n    'NO', // Norway\n    'SJ', // Svalbard and Jan Mayen\n    'SE', // Sweden\n    'GB', // United Kingdom\n  ]\n}\n\nregions.southernEurope = {\n  name: 'Southern Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Southern_Europe\n    'AL', // Albania\n    'AD', // Andorra\n    'BA', // Bosnia and Herzegovina\n    'HR', // Croatia\n    'CY', // Cyprus\n    'GI', // Gibraltar\n    'GR', // Greece\n    'IT', // Italy\n    'MK', // Republic of Macedonia\n    'VA', // Vatican City\n    'MT', // Malta\n    'ME', // Montenegro\n    'PT', // Portugal\n    'SM', // San Marino\n    'RS', // Serbia\n    'SI', // Slovenia\n    'ES', // Spain\n  ]\n}\n\nregions.easternEurope = {\n  name: 'Eastern Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Eastern_Europe\n    'BY', // Belarus\n    'BG', // Bulgaria\n    'CZ', // Czech Republic\n    'GE', // Georgia\n    'HU', // Hungary\n    'MD', // Moldova\n    'PL', // Poland\n    'RO', // Romania\n    'RU', // Russia\n    'SK', // Slovakia\n    'UA', // Ukraine\n  ]\n}\n\nregions.westernEurope = {\n  name: 'Western Europe',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Western_Europe\n    'AT', // Austria\n    'BE', // Belgium\n    'FR', // France\n    'DE', // Germany\n    'LI', // Liechtenstein\n    'LU', // Luxembourg\n    'MC', // Monaco\n    'NL', // Netherlands\n    'CH', // Switzerland\n  ],\n};\n \nregions.australia = {\n  name: 'Australia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'AU', // Australia\n    'NF', // Norfolk Island\n    'NZ', // New Zealand\n  ]\n};\n\nregions.melanesia = {\n  name: 'Melanesia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'FJ', // Fiji\n    'NC', //  New Caledonia\n    'PG', // Papua New Guinea\n    'SB', // Solomon Islands\n    'VU', // Vanuatu\n  ]\n};    \n\nregions.micronesia = {\n  name: 'Micronesia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'GU', // Guam\n    'KI', // Kiribati\n    'MH', // Marshall Islands\n    'FM', // Micronesia, Fed. Sts.\n    'NR', // Nauru\n    'MP', // Northern Mariana Islands\n    'PW', // Palau\n    'UM', // United States Minor Outlying Islands\n  ]\n};    \n\nregions.polynesia = {\n  name: 'Polynesia',\n  countries: [\n    // source is http://en.wikipedia.org/wiki/Oceania\n    'AS', // American Samoa\n    'CK', // Cook Islands\n    'PF', // French Polynesia\n    'NU', // Niue\n    'PN', // Pitcairn Islands\n    'WS', // Samoa\n    'TK', // Tokelau\n    'TO', // Tonga\n    'TV', // Tuvalu\n    'WF', // Wallis and Futuna\n  ]\n};\n\nmodule.exports = regions;\n","'use strict';\n\nvar _ = require('underscore');\nvar regions = require('./regions.js');\nvar continents = {};\n\ncontinents.asia = {\n  name: 'Asia',\n  regions: ['centralAsia', 'southernAsia', 'southeastAsia', 'eastAsia', 'westernAsia'],\n  countries: _.flatten([\n    regions.centralAsia.countries,\n    regions.southernAsia.countries,\n    regions.southeastAsia.countries,\n    regions.eastAsia.countries,\n    regions.westernAsia.countries\n  ])\n  .sort()\n};\n\ncontinents.africa = {\n  name: 'Africa',\n  regions: ['centralAfrica', 'northAfrica', 'southernAfrica', 'eastAfrica', 'westAfrica'],\n  countries: _.flatten([\n      regions.centralAfrica.countries,\n      regions.northAfrica.countries,\n      regions.southernAfrica.countries,\n      regions.eastAfrica.countries,\n      regions.westAfrica.countries\n  ])\n  .sort()\n};\n\ncontinents.northAmerica = {\n  name: 'North America',\n  regions: ['centralAmerica', 'northernAmerica', 'caribbean'],\n  countries: _.flatten([\n    regions.centralAmerica.countries,\n    regions.northernAmerica.countries,\n    regions.caribbean.countries\n  ])\n  .sort()\n};\n\ncontinents.southAmerica = {\n  name: 'South America',\n  regions: ['southAmerica'],\n  countries: _.flatten([\n    regions.southAmerica.countries\n  ])\n  .sort()\n}\n\ncontinents.antartica = {\n  name: 'Antartica',\n  regions: ['antartica'],\n  countries: _.flatten([\n    regions.antartica.countries\n  ])\n  .sort()\n}\n\ncontinents.europe = {\n  name: 'Europe',\n  regions: ['northernEurope', 'southernEurope', 'easternEurope', 'westernEurope'],\n  countries: _.flatten([\n    regions.northernEurope.countries,\n    regions.southernEurope.countries,\n    regions.easternEurope.countries,\n    regions.westernEurope.countries\n  ])\n  .sort()\n}\n\ncontinents.oceania = {\n  name: 'Oceania',\n  regions: ['australia', 'melanesia', 'micronesia', 'polynesia'],\n  countries: _.flatten([\n    regions.australia.countries,\n    regions.melanesia.countries,\n    regions.micronesia.countries,\n    regions.polynesia.countries\n  ])\n  .sort()\n};\n\nmodule.exports = continents;\n","var _ = require('underscore');\n\nmodule.exports = init;\n\nfunction init(o) {\n  return {\n    countries: search.bind(null, o.countries),\n    currencies: search.bind(null, o.currencies),\n    languages: search.bind(null, o.languages)\n  };\n}\n\nfunction search(data, query) {\n  var q = _.pairs(query);\n\n  return data.filter(function(d) {\n    return q.filter(function(v) {\n      var prop = d[v[0]];\n\n      if(_.isArray(prop)) return prop.indexOf(v[1]) >= 0;\n\n      return prop == v[1];\n    }).length == q.length;\n  });\n}","module.exports =\n{ \"ALL\": \"L\"\n, \"AFN\": \"؋\"\n, \"ARS\": \"$\"\n, \"AWG\": \"ƒ\"\n, \"AUD\": \"$\"\n, \"AZN\": \"₼\"\n, \"BSD\": \"$\"\n, \"BBD\": \"$\"\n, \"BYR\": \"p.\"\n, \"BZD\": \"BZ$\"\n, \"BMD\": \"$\"\n, \"BOB\": \"Bs.\"\n, \"BAM\": \"KM\"\n, \"BWP\": \"P\"\n, \"BGN\": \"лв\"\n, \"BRL\": \"R$\"\n, \"BND\": \"$\"\n, \"KHR\": \"៛\"\n, \"CAD\": \"$\"\n, \"KYD\": \"$\"\n, \"CLP\": \"$\"\n, \"CNY\": \"¥\"\n, \"COP\": \"$\"\n, \"CRC\": \"₡\"\n, \"HRK\": \"kn\"\n, \"CUP\": \"₱\"\n, \"CZK\": \"Kč\"\n, \"DKK\": \"kr\"\n, \"DOP\": \"RD$\"\n, \"XCD\": \"$\"\n, \"EGP\": \"£\"\n, \"SVC\": \"$\"\n, \"EEK\": \"kr\"\n, \"EUR\": \"€\"\n, \"FKP\": \"£\"\n, \"FJD\": \"$\"\n, \"GHC\": \"¢\"\n, \"GIP\": \"£\"\n, \"GTQ\": \"Q\"\n, \"GGP\": \"£\"\n, \"GYD\": \"$\"\n, \"HNL\": \"L\"\n, \"HKD\": \"$\"\n, \"HUF\": \"Ft\"\n, \"ISK\": \"kr\"\n, \"INR\": \"₹\"\n, \"IDR\": \"Rp\"\n, \"IRR\": \"﷼\"\n, \"IMP\": \"£\"\n, \"ILS\": \"₪\"\n, \"JMD\": \"J$\"\n, \"JPY\": \"¥\"\n, \"JEP\": \"£\"\n, \"KES\": \"KSh\"\n, \"KZT\": \"лв\"\n, \"KPW\": \"₩\"\n, \"KRW\": \"₩\"\n, \"KGS\": \"лв\"\n, \"LAK\": \"₭\"\n, \"LVL\": \"Ls\"\n, \"LBP\": \"£\"\n, \"LRD\": \"$\"\n, \"LTL\": \"Lt\"\n, \"MKD\": \"ден\"\n, \"MYR\": \"RM\"\n, \"MUR\": \"₨\"\n, \"MXN\": \"$\"\n, \"MNT\": \"₮\"\n, \"MZN\": \"MT\"\n, \"NAD\": \"$\"\n, \"NPR\": \"₨\"\n, \"ANG\": \"ƒ\"\n, \"NZD\": \"$\"\n, \"NIO\": \"C$\"\n, \"NGN\": \"₦\"\n, \"NOK\": \"kr\"\n, \"OMR\": \"﷼\"\n, \"PKR\": \"₨\"\n, \"PAB\": \"B/.\"\n, \"PYG\": \"Gs\"\n, \"PEN\": \"S/.\"\n, \"PHP\": \"₱\"\n, \"PLN\": \"zł\"\n, \"QAR\": \"﷼\"\n, \"RON\": \"lei\"\n, \"RUB\": \"₽\"\n, \"SHP\": \"£\"\n, \"SAR\": \"﷼\"\n, \"RSD\": \"Дин.\"\n, \"SCR\": \"₨\"\n, \"SGD\": \"$\"\n, \"SBD\": \"$\"\n, \"SOS\": \"S\"\n, \"ZAR\": \"R\"\n, \"LKR\": \"₨\"\n, \"SEK\": \"kr\"\n, \"CHF\": \"CHF\"\n, \"SRD\": \"$\"\n, \"SYP\": \"£\"\n, \"TZS\": \"TSh\"\n, \"TWD\": \"NT$\"\n, \"THB\": \"฿\"\n, \"TTD\": \"TT$\"\n, \"TRY\": \"\"\n, \"TRL\": \"₤\"\n, \"TVD\": \"$\"\n, \"UGX\": \"USh\"\n, \"UAH\": \"₴\"\n, \"GBP\": \"£\"\n, \"USD\": \"$\"\n, \"UYU\": \"$U\"\n, \"UZS\": \"лв\"\n, \"VEF\": \"Bs\"\n, \"VND\": \"₫\"\n, \"YER\": \"﷼\"\n, \"ZWD\": \"Z$\"\n}\n","module.exports = mapSymbol\n\nvar map = require('./map')\n\nfunction mapSymbol(currencyCode) {\n  if (map.hasOwnProperty(currencyCode)) {\n    return map[currencyCode]\n  } else {\n    return '?'\n  }\n}","'use strict';\n\nvar _ = require('underscore');\nvar continents = require('./data/continents');\nvar regions = require('./data/regions');\nvar countriesAll = require('./data/countries.json');\nvar currenciesAll = require('./data/currencies.json');\nvar languagesAll = require('./data/languages.json');\nvar lookup = require('./lookup');\n\nvar getSymbol = require('currency-symbol-map')\n\nexports.continents = continents;\nexports.regions = regions;\n\nexports.countries = {\n  all: countriesAll,\n};\n\n_.each(countriesAll, function (country) {\n  // prefer assigned country codes over inactive ones\n  var exportedAlpha2 = exports.countries[country.alpha2];\n  if (!exportedAlpha2 || exportedAlpha2.status === 'deleted') {\n    exports.countries[country.alpha2] = country;\n  }\n\n  var exportedAlpha3 = exports.countries[country.alpha3];\n  if (!exportedAlpha3 || exportedAlpha3.status === 'deleted') {\n    exports.countries[country.alpha3] = country;\n  }\n});\n\nexports.currencies = {\n  all: currenciesAll,\n};\n\n_.each(currenciesAll, function (currency) {\n  //If the symbol isn't available, default to the currency code\n  var symbol = getSymbol(currency.code);\n  if (symbol == '?') {\n    symbol = currency.code;\n  }\n\n  currency.symbol = symbol;\n  exports.currencies[currency.code] = currency;\n});\n\nexports.languages = {\n  all: languagesAll,\n};\n\n// Note that for the languages there are several entries with the same alpha3 -\n// eg Dutch and Flemish. Not sure how to best deal with that - here whichever\n// comes last wins.\n_.each(languagesAll, function (language) {\n  exports.languages[language.alpha2] = language;\n  exports.languages[language.bibliographic] = language;\n  exports.languages[language.alpha3] = language;\n});\n\nexports.lookup = lookup({\n    countries: countriesAll,\n    currencies: currenciesAll,\n    languages: languagesAll\n});\n\nvar callingCountries = {all: []};\n\nvar callingCodesAll = _.reduce(countriesAll, function (codes, country) {\n  if (country.countryCallingCodes && country.countryCallingCodes.length) {\n    callingCountries.all.push(country);\n\n    callingCountries[country.alpha2] = country;\n    callingCountries[country.alpha3] = country;\n\n    _.each(country.countryCallingCodes, function (code) {\n      if (codes.indexOf(code) == -1) {\n        codes.push(code);\n      }\n    });\n  }\n  return codes;\n}, []);\n\ndelete callingCountries['']; // remove empty alpha3s\nexports.callingCountries = callingCountries;\n\ncallingCodesAll.sort(function (a, b) {\n  var parse = function (str) { return parseInt(str) };\n  var splitA = _.map(a.split(' '), parse);\n  var splitB = _.map(b.split(' '), parse);\n\n  if (splitA[0] < splitB[0]) {\n    return -1;\n  } else if (splitA[0] > splitB[0]) {\n    return 1;\n  } else {\n    // Same - check split[1]\n    if (splitA[1] === undefined && splitB[1] !== undefined) {\n      return -1;\n    } else if (splitA[1] !== undefined && splitB[1] === undefined) {\n      return 1;\n    } else if (splitA[1] < splitB[1]) {\n      return -1;\n    } else if (splitA[1] > splitB[1]) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n});\n\nexports.callingCodes = {\n  all: callingCodesAll\n};\n","'use strict';\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst doesMatch = function(string, regex) {\n  const match = regex.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nconst doesNotMatch = function(string, regex) {\n  return !doesMatch(string, regex);\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      target[keys[i]] = a[keys[i]];\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.buildOptions = function(options, defaultOptions, props) {\n  var newOptions = {};\n  if (!options) {\n    return defaultOptions; //if there are not options\n  }\n\n  for (let i = 0; i < props.length; i++) {\n    if (options[props[i]] !== undefined) {\n      newOptions[props[i]] = options[props[i]];\n    } else {\n      newOptions[props[i]] = defaultOptions[props[i]];\n    }\n  }\n  return newOptions;\n};\n\nexports.doesMatch = doesMatch;\nexports.doesNotMatch = doesNotMatch;\nexports.getAllMatches = getAllMatches;\n","'use strict';\n\nconst util = require('./util');\n\nconst convertToJson = function(node, options) {\n  const jObj = {};\n\n  //when no child node or attr is present\n  if ((!node.child || util.isEmptyObject(node.child)) && (!node.attrsMap || util.isEmptyObject(node.attrsMap))) {\n    return util.isExist(node.val) ? node.val : '';\n  } else {\n    //otherwise create a textnode if node has some text\n    if (util.isExist(node.val)) {\n      if (!(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n        jObj[options.textNodeName] = node.val;\n      }\n    }\n  }\n\n  util.merge(jObj, node.attrsMap);\n\n  const keys = Object.keys(node.child);\n  for (let index = 0; index < keys.length; index++) {\n    var tagname = keys[index];\n    if (node.child[tagname] && node.child[tagname].length > 1) {\n      jObj[tagname] = [];\n      for (var tag in node.child[tagname]) {\n        jObj[tagname].push(convertToJson(node.child[tagname][tag], options));\n      }\n    } else {\n      jObj[tagname] = convertToJson(node.child[tagname][0], options);\n    }\n  }\n\n  //add value\n  return jObj;\n};\n\nexports.convertToJson = convertToJson;\n","'use strict';\n\nmodule.exports = function(tagname, parent, val) {\n  this.tagname = tagname;\n  this.parent = parent;\n  this.child = {}; //child tags\n  this.attrsMap = {}; //attributes map\n  this.val = val; //text only\n  this.addChild = function(child) {\n    if (Array.isArray(this.child[child.tagname])) {\n      //already presents\n      this.child[child.tagname].push(child);\n    } else {\n      this.child[child.tagname] = [child];\n    }\n  };\n};\n","'use strict';\n\nconst util = require('./util');\nconst buildOptions = require('./util').buildOptions;\nconst xmlNode = require('./xmlNode');\nconst TagType = {OPENING: 1, CLOSING: 2, SELF: 3, CDATA: 4};\nconst attrstr_regex = '((\\\\s*[\\\\w\\\\-._:]+(=((\\'([^\\']*)\\')|(\"([^\"]*)\")))?)*)\\\\s*';\nlet regx = '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))'+attrstr_regex+'(\\\\/)?>|((\\\\/)(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))\\\\s*>))([^<]*)';\n  //'<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))([^>]*)>|((\\\\/)(([\\\\w:\\\\-._]*:)?([\\\\w:\\\\-._]+))\\\\s*>))([^<]*)';\n  \n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n  Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n  Number.parseFloat = window.parseFloat;\n}\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attrNodeName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  ignoreNameSpace: false,\n  allowBooleanAttributes: false, //a tag can have attributes without any value\n  //ignoreRootElement : false,\n  parseNodeValue: true,\n  parseAttributeValue: false,\n  arrayMode: false,\n  trimValues: true, //Trim string values of tag and attributes\n  cdataTagName: false,\n  cdataPositionChar: '\\\\c',\n  localeRange: '',\n  tagValueProcessor: function(a) {\n    return a;\n  },\n  attrValueProcessor: function(a) {\n    return a;\n  },\n  stopNodes: []\n  //decodeStrict: false,\n};\n\nexports.defaultOptions = defaultOptions;\n\nconst props = [\n  'attributeNamePrefix',\n  'attrNodeName',\n  'textNodeName',\n  'ignoreAttributes',\n  'ignoreNameSpace',\n  'allowBooleanAttributes',\n  'parseNodeValue',\n  'parseAttributeValue',\n  'arrayMode',\n  'trimValues',\n  'cdataTagName',\n  'cdataPositionChar',\n  'localeRange',\n  'tagValueProcessor',\n  'attrValueProcessor',\n  'parseTrueNumberOnly',\n  'stopNodes'\n];\nexports.props = props;\n\nconst getTraversalObj = function(xmlData, options) {\n  options = buildOptions(options, defaultOptions, props);\n  //xmlData = xmlData.replace(/\\r?\\n/g, \" \");//make it single line\n  xmlData = xmlData.replace(/<!--[\\s\\S]*?-->/g, ''); //Remove  comments\n\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n\n  regx = regx.replace(/\\[\\\\w/g, '[' + options.localeRange + '\\\\w');\n  const tagsRegx = new RegExp(regx, 'g');\n  let tag = tagsRegx.exec(xmlData);\n  let nextTag = tagsRegx.exec(xmlData);\n  while (tag) {\n    //console.log(tag)\n    const tagType = checkForTagType(tag);\n    //console.log(tagType)\n\n    if (tagType === TagType.CLOSING) {\n      //add parsed data to parent node\n      if (currentNode.parent && tag[22]) {\n        currentNode.parent.val = util.getValue(currentNode.parent.val) + '' + processTagValue(tag[22], options);\n      }\n      if (options.stopNodes.length && options.stopNodes.includes(currentNode.tagname)) {\n        currentNode.child = []\n        if (currentNode.attrsMap == undefined) { currentNode.attrsMap = {}}\n        currentNode.val = xmlData.substr(currentNode.startIndex + 1, tag.index - currentNode.startIndex - 1)\n      }\n      currentNode = currentNode.parent;\n    } else if (tagType === TagType.CDATA) {\n      if (options.cdataTagName) {\n        //add cdata node\n        const childNode = new xmlNode(options.cdataTagName, currentNode, tag[3]);\n        childNode.attrsMap = buildAttributesMap(tag[8], options);\n        currentNode.addChild(childNode);\n        //for backtracking\n        currentNode.val = util.getValue(currentNode.val) + options.cdataPositionChar;\n        //add rest value to parent node\n        if (tag[22]) {\n          currentNode.val += processTagValue(tag[22], options);\n        }\n      } else {\n        currentNode.val = (currentNode.val || '') + (tag[3] || '') + processTagValue(tag[22], options);\n      }\n    } else if (tagType === TagType.SELF) {\n      if (currentNode && tag[22]) {\n        currentNode.val = util.getValue(currentNode.val) + '' + processTagValue(tag[22], options);\n      }\n\n      const childNode = new xmlNode(options.ignoreNameSpace ? tag[7] : tag[5], currentNode, '');\n      /* if (tag[8] && tag[8].length > 0) {\n        tag[8] = tag[8].substr(0, tag[8].length - 1);\n      } */\n      childNode.attrsMap = buildAttributesMap(tag[8], options);\n      currentNode.addChild(childNode);\n    } else {\n      //TagType.OPENING\n      const childNode = new xmlNode(\n        options.ignoreNameSpace ? tag[7] : tag[5],\n        currentNode,\n        processTagValue(tag[22], options)\n      );\n      if (options.stopNodes.length && options.stopNodes.includes(childNode.tagname)) {\n        childNode.startIndex=tag.index + tag[1].length\n      }\n      childNode.attrsMap = buildAttributesMap(tag[8], options);\n      currentNode.addChild(childNode);\n      currentNode = childNode;\n    }\n\n    tag = nextTag;\n    nextTag = tagsRegx.exec(xmlData);\n  }\n\n  return xmlObj;\n};\n\nfunction processTagValue(val, options) {\n  if (val) {\n    if (options.trimValues) {\n      val = val.trim();\n    }\n    val = options.tagValueProcessor(val);\n    val = parseValue(val, options.parseNodeValue, options.parseTrueNumberOnly);\n  }\n\n  return val;\n}\n\nfunction checkForTagType(match) {\n  if (match[4] === ']]>') {\n    return TagType.CDATA;\n  } else if (match[18] === '/') {\n    return TagType.CLOSING;\n  } else if (match[16] === '/') {\n    return TagType.SELF;\n  } else {\n    return TagType.OPENING;\n  }\n}\n\nfunction resolveNameSpace(tagname, options) {\n  if (options.ignoreNameSpace) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\nfunction parseValue(val, shouldParse, parseTrueNumberOnly) {\n  if (shouldParse && typeof val === 'string') {\n    let parsed;\n    if (val.trim() === '' || isNaN(val)) {\n      parsed = val === 'true' ? true : val === 'false' ? false : val;\n    } else {\n      if (val.indexOf('0x') !== -1) {\n        //support hexa decimal\n        parsed = Number.parseInt(val, 16);\n      } else if (val.indexOf('.') !== -1) {\n        parsed = Number.parseFloat(val);\n      } else {\n        parsed = Number.parseInt(val, 10);\n      }\n      if (parseTrueNumberOnly) {\n        parsed = String(parsed) === val ? parsed : val;\n      }\n    }\n    return parsed;\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])(.*?)\\\\3)?', 'g');\n\nfunction buildAttributesMap(attrStr, options) {\n  if (!options.ignoreAttributes && typeof attrStr === 'string') {\n    attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = resolveNameSpace(matches[i][1], options);\n      if (attrName.length) {\n        if (matches[i][4] !== undefined) {\n          if (options.trimValues) {\n            matches[i][4] = matches[i][4].trim();\n          }\n          matches[i][4] = options.attrValueProcessor(matches[i][4]);\n          attrs[options.attributeNamePrefix + attrName] = parseValue(\n            matches[i][4],\n            options.parseAttributeValue,\n            options.parseTrueNumberOnly\n          );\n        } else if (options.allowBooleanAttributes) {\n          attrs[options.attributeNamePrefix + attrName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (options.attrNodeName) {\n      const attrCollection = {};\n      attrCollection[options.attrNodeName] = attrs;\n      return attrCollection;\n    }\n    return attrs;\n  }\n}\n\nexports.getTraversalObj = getTraversalObj;\n","'use strict';\nconst char = function(a) {\n  return String.fromCharCode(a);\n};\n\nconst chars = {\n  nilChar: char(176),\n  missingChar: char(201),\n  nilPremitive: char(175),\n  missingPremitive: char(200),\n\n  emptyChar: char(178),\n  emptyValue: char(177), //empty Premitive\n\n  boundryChar: char(179),\n\n  objStart: char(198),\n  arrStart: char(204),\n  arrayEnd: char(185),\n};\n\nconst charsArr = [\n  chars.nilChar,\n  chars.nilPremitive,\n  chars.missingChar,\n  chars.missingPremitive,\n  chars.boundryChar,\n  chars.emptyChar,\n  chars.emptyValue,\n  chars.arrayEnd,\n  chars.objStart,\n  chars.arrStart,\n];\n\nconst _e = function(node, e_schema, options) {\n  if (typeof e_schema === 'string') {\n    //premitive\n    if (node && node[0] && node[0].val !== undefined) {\n      return getValue(node[0].val, e_schema);\n    } else {\n      return getValue(node, e_schema);\n    }\n  } else {\n    const hasValidData = hasData(node);\n    if (hasValidData === true) {\n      let str = '';\n      if (Array.isArray(e_schema)) {\n        //attributes can't be repeated. hence check in children tags only\n        str += chars.arrStart;\n        const itemSchema = e_schema[0];\n        //var itemSchemaType = itemSchema;\n        const arr_len = node.length;\n\n        if (typeof itemSchema === 'string') {\n          for (let arr_i = 0; arr_i < arr_len; arr_i++) {\n            const r = getValue(node[arr_i].val, itemSchema);\n            str = processValue(str, r);\n          }\n        } else {\n          for (let arr_i = 0; arr_i < arr_len; arr_i++) {\n            const r = _e(node[arr_i], itemSchema, options);\n            str = processValue(str, r);\n          }\n        }\n        str += chars.arrayEnd; //indicates that next item is not array item\n      } else {\n        //object\n        str += chars.objStart;\n        const keys = Object.keys(e_schema);\n        if (Array.isArray(node)) {\n          node = node[0];\n        }\n        for (let i in keys) {\n          const key = keys[i];\n          //a property defined in schema can be present either in attrsMap or children tags\n          //options.textNodeName will not present in both maps, take it's value from val\n          //options.attrNodeName will be present in attrsMap\n          let r;\n          if (!options.ignoreAttributes && node.attrsMap && node.attrsMap[key]) {\n            r = _e(node.attrsMap[key], e_schema[key], options);\n          } else if (key === options.textNodeName) {\n            r = _e(node.val, e_schema[key], options);\n          } else {\n            r = _e(node.child[key], e_schema[key], options);\n          }\n          str = processValue(str, r);\n        }\n      }\n      return str;\n    } else {\n      return hasValidData;\n    }\n  }\n};\n\nconst getValue = function(a /*, type*/) {\n  switch (a) {\n    case undefined:\n      return chars.missingPremitive;\n    case null:\n      return chars.nilPremitive;\n    case '':\n      return chars.emptyValue;\n    default:\n      return a;\n  }\n};\n\nconst processValue = function(str, r) {\n  if (!isAppChar(r[0]) && !isAppChar(str[str.length - 1])) {\n    str += chars.boundryChar;\n  }\n  return str + r;\n};\n\nconst isAppChar = function(ch) {\n  return charsArr.indexOf(ch) !== -1;\n};\n\nfunction hasData(jObj) {\n  if (jObj === undefined) {\n    return chars.missingChar;\n  } else if (jObj === null) {\n    return chars.nilChar;\n  } else if (\n    jObj.child &&\n    Object.keys(jObj.child).length === 0 &&\n    (!jObj.attrsMap || Object.keys(jObj.attrsMap).length === 0)\n  ) {\n    return chars.emptyChar;\n  } else {\n    return true;\n  }\n}\n\nconst x2j = require('./xmlstr2xmlnode');\nconst buildOptions = require('./util').buildOptions;\n\nconst convert2nimn = function(node, e_schema, options) {\n  options = buildOptions(options, x2j.defaultOptions, x2j.props);\n  return _e(node, e_schema, options);\n};\n\nexports.convert2nimn = convert2nimn;\n","'use strict';\n\nconst util = require('./util');\nconst buildOptions = require('./util').buildOptions;\nconst x2j = require('./xmlstr2xmlnode');\n\n//TODO: do it later\nconst convertToJsonString = function(node, options) {\n  options = buildOptions(options, x2j.defaultOptions, x2j.props);\n\n  options.indentBy = options.indentBy || '';\n  return _cToJsonStr(node, options, 0);\n};\n\nconst _cToJsonStr = function(node, options, level) {\n  let jObj = '{';\n\n  //traver through all the children\n  const keys = Object.keys(node.child);\n\n  for (let index = 0; index < keys.length; index++) {\n    var tagname = keys[index];\n    if (node.child[tagname] && node.child[tagname].length > 1) {\n      jObj += '\"' + tagname + '\" : [ ';\n      for (var tag in node.child[tagname]) {\n        jObj += _cToJsonStr(node.child[tagname][tag], options) + ' , ';\n      }\n      jObj = jObj.substr(0, jObj.length - 1) + ' ] '; //remove extra comma in last\n    } else {\n      jObj += '\"' + tagname + '\" : ' + _cToJsonStr(node.child[tagname][0], options) + ' ,';\n    }\n  }\n  util.merge(jObj, node.attrsMap);\n  //add attrsMap as new children\n  if (util.isEmptyObject(jObj)) {\n    return util.isExist(node.val) ? node.val : '';\n  } else {\n    if (util.isExist(node.val)) {\n      if (!(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n        jObj += '\"' + options.textNodeName + '\" : ' + stringval(node.val);\n      }\n    }\n  }\n  //add value\n  if (jObj[jObj.length - 1] === ',') {\n    jObj = jObj.substr(0, jObj.length - 2);\n  }\n  return jObj + '}';\n};\n\nfunction stringval(v) {\n  if (v === true || v === false || !isNaN(v)) {\n    return v;\n  } else {\n    return '\"' + v + '\"';\n  }\n}\n\nfunction indentate(options, level) {\n  return options.indentBy.repeat(level);\n}\n\nexports.convertToJsonString = convertToJsonString;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  localeRange: 'a-zA-Z',\n};\n\nconst props = ['allowBooleanAttributes', 'localeRange'];\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function(xmlData, options) {\n  options = util.buildOptions(options, defaultOptions, props);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n\n  const tags = [];\n  let tagFound = false;\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  const regxAttrName = new RegExp('^[_w][\\\\w\\\\-.:]*$'.replace('_w', '_' + options.localeRange));\n  const regxTagName = new RegExp('^([w]|_)[\\\\w.\\\\-_:]*'.replace('([w', '([' + options.localeRange));\n  for (let i = 0; i < xmlData.length; i++) {\n    if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n\n      i++;\n      if (xmlData[i] === '?') {\n        i = readPI(xmlData, ++i);\n        if (i.err) {\n          return i;\n        }\n      } else if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (\n          ;\n          i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r';\n          i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          continue;\n        }\n        if (!validateTagName(tagName, regxTagName)) {\n          return {err: {code: 'InvalidTag', msg: 'Tag ' + tagName + ' is an invalid name.'}};\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return {err: {code: 'InvalidAttr', msg: 'Attributes for ' + tagName + ' have open quote'}};\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options, regxAttrName);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            return isValid;\n          }\n        } else if (closingTag) {\n          if (attrStr.trim().length > 0) {\n            return {\n              err: {code: 'InvalidTag', msg: 'closing tag ' + tagName + \" can't have attributes or invalid starting.\"},\n            };\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg) {\n              return {\n                err: {code: 'InvalidTag', msg: 'closing tag ' + otg + ' is expected inplace of ' + tagName + '.'},\n              };\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options, regxAttrName);\n          if (isValid !== true) {\n            return isValid;\n          }\n          tags.push(tagName);\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else {\n              break;\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if (xmlData[i] === ' ' || xmlData[i] === '\\t' || xmlData[i] === '\\n' || xmlData[i] === '\\r') {\n        continue;\n      }\n      return {err: {code: 'InvalidChar', msg: 'char ' + xmlData[i] + ' is not expected .'}};\n    }\n  }\n\n  if (!tagFound) {\n    return {err: {code: 'InvalidXml', msg: 'Start tag expected.'}};\n  } else if (tags.length > 0) {\n    return {\n      err: {code: 'InvalidXml', msg: 'Invalid ' + JSON.stringify(tags, null, 4).replace(/\\r?\\n/g, '') + ' found.'},\n    };\n  }\n\n  return true;\n};\n\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  var start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      var tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return {err: {code: 'InvalidXml', msg: 'XML declaration allowed only at the start of the document.'}};\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nvar doubleQuote = '\"';\nvar singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n        continue;\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {value: attrStr, index: i};\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options, regxAttrName) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    //console.log(matches[i]);\n\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return {err: {code: 'InvalidAttr', msg: 'attribute ' + matches[i][2] + ' has no space in starting.'}};\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return {err: {code: 'InvalidAttr', msg: 'boolean attribute ' + matches[i][2] + ' is not allowed.'}};\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName, regxAttrName)) {\n      return {err: {code: 'InvalidAttr', msg: 'attribute ' + attrName + ' is an invalid name.'}};\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return {err: {code: 'InvalidAttr', msg: 'attribute ' + attrName + ' is repeated.'}};\n    }\n  }\n\n  return true;\n}\n\n// const validAttrRegxp = /^[_a-zA-Z][\\w\\-.:]*$/;\n\nfunction validateAttrName(attrName, regxAttrName) {\n  // const validAttrRegxp = new RegExp(regxAttrName);\n  return util.doesMatch(attrName, regxAttrName);\n}\n\n//const startsWithXML = new RegExp(\"^[Xx][Mm][Ll]\");\n//  startsWith = /^([a-zA-Z]|_)[\\w.\\-_:]*/;\n\nfunction validateTagName(tagname, regxTagName) {\n  /*if(util.doesMatch(tagname,startsWithXML)) return false;\n    else*/\n  return !util.doesNotMatch(tagname, regxTagName);\n}\n","'use strict';\n//parse Empty Node as self closing node\nconst buildOptions = require('./util').buildOptions;\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attrNodeName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataTagName: false,\n  cdataPositionChar: '\\\\c',\n  format: false,\n  indentBy: '  ',\n  supressEmptyNode: false,\n  tagValueProcessor: function(a) {\n    return a;\n  },\n  attrValueProcessor: function(a) {\n    return a;\n  },\n};\n\nconst props = [\n  'attributeNamePrefix',\n  'attrNodeName',\n  'textNodeName',\n  'ignoreAttributes',\n  'cdataTagName',\n  'cdataPositionChar',\n  'format',\n  'indentBy',\n  'supressEmptyNode',\n  'tagValueProcessor',\n  'attrValueProcessor',\n];\n\nfunction Parser(options) {\n  this.options = buildOptions(options, defaultOptions, props);\n  if (this.options.ignoreAttributes || this.options.attrNodeName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n  if (this.options.cdataTagName) {\n    this.isCDATA = isCDATA;\n  } else {\n    this.isCDATA = function(/*a*/) {\n      return false;\n    };\n  }\n  this.replaceCDATAstr = replaceCDATAstr;\n  this.replaceCDATAarr = replaceCDATAarr;\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n\n  if (this.options.supressEmptyNode) {\n    this.buildTextNode = buildEmptyTextNode;\n    this.buildObjNode = buildEmptyObjNode;\n  } else {\n    this.buildTextNode = buildTextValNode;\n    this.buildObjNode = buildObjectNode;\n  }\n\n  this.buildTextValNode = buildTextValNode;\n  this.buildObjectNode = buildObjectNode;\n}\n\nParser.prototype.parse = function(jObj) {\n  return this.j2x(jObj, 0).val;\n};\n\nParser.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  const keys = Object.keys(jObj);\n  const len = keys.length;\n  for (let i = 0; i < len; i++) {\n    const key = keys[i];\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += ' ' + attr + '=\"' + this.options.attrValueProcessor('' + jObj[key]) + '\"';\n      } else if (this.isCDATA(key)) {\n        if (jObj[this.options.textNodeName]) {\n          val += this.replaceCDATAstr(jObj[this.options.textNodeName], jObj[key]);\n        } else {\n          val += this.replaceCDATAstr('', jObj[key]);\n        }\n      } else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          if (jObj[this.options.cdataTagName]) {\n            //value will added while processing cdata\n          } else {\n            val += this.options.tagValueProcessor('' + jObj[key]);\n          }\n        } else {\n          val += this.buildTextNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      if (this.isCDATA(key)) {\n        val += this.indentate(level);\n        if (jObj[this.options.textNodeName]) {\n          val += this.replaceCDATAarr(jObj[this.options.textNodeName], jObj[key]);\n        } else {\n          val += this.replaceCDATAarr('', jObj[key]);\n        }\n      } else {\n        //nested nodes\n        const arrLen = jObj[key].length;\n        for (let j = 0; j < arrLen; j++) {\n          const item = jObj[key][j];\n          if (typeof item === 'undefined') {\n            // supress undefined node\n          } else if (item === null) {\n            val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          } else if (typeof item === 'object') {\n            const result = this.j2x(item, level + 1);\n            val += this.buildObjNode(result.val, key, result.attrStr, level);\n          } else {\n            val += this.buildTextNode(item, key, '', level);\n          }\n        }\n      }\n    } else {\n      //nested node\n      if (this.options.attrNodeName && key === this.options.attrNodeName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += ' ' + Ks[j] + '=\"' + this.options.attrValueProcessor('' + jObj[key][Ks[j]]) + '\"';\n        }\n      } else {\n        const result = this.j2x(jObj[key], level + 1);\n        val += this.buildObjNode(result.val, key, result.attrStr, level);\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nfunction replaceCDATAstr(str, cdata) {\n  str = this.options.tagValueProcessor('' + str);\n  if (this.options.cdataPositionChar === '' || str === '') {\n    return str + '<![CDATA[' + cdata + ']]' + this.tagEndChar;\n  } else {\n    return str.replace(this.options.cdataPositionChar, '<![CDATA[' + cdata + ']]' + this.tagEndChar);\n  }\n}\n\nfunction replaceCDATAarr(str, cdata) {\n  str = this.options.tagValueProcessor('' + str);\n  if (this.options.cdataPositionChar === '' || str === '') {\n    return str + '<![CDATA[' + cdata.join(']]><![CDATA[') + ']]' + this.tagEndChar;\n  } else {\n    for (let v in cdata) {\n      str = str.replace(this.options.cdataPositionChar, '<![CDATA[' + cdata[v] + ']]>');\n    }\n    return str + this.newLine;\n  }\n}\n\nfunction buildObjectNode(val, key, attrStr, level) {\n  if (attrStr && !val.includes('<')) {\n    return (\n      this.indentate(level) +\n      '<' +\n      key +\n      attrStr +\n      '>' +\n      val +\n      //+ this.newLine\n      // + this.indentate(level)\n      '</' +\n      key +\n      this.tagEndChar\n    );\n  } else {\n    return (\n      this.indentate(level) +\n      '<' +\n      key +\n      attrStr +\n      this.tagEndChar +\n      val +\n      //+ this.newLine\n      this.indentate(level) +\n      '</' +\n      key +\n      this.tagEndChar\n    );\n  }\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    return this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n    //+ this.newLine\n  }\n}\n\nfunction buildTextValNode(val, key, attrStr, level) {\n  return (\n    this.indentate(level) +\n    '<' +\n    key +\n    attrStr +\n    '>' +\n    this.options.tagValueProcessor(val) +\n    '</' +\n    key +\n    this.tagEndChar\n  );\n}\n\nfunction buildEmptyTextNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildTextValNode(val, key, attrStr, level);\n  } else {\n    return this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n  }\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nfunction isCDATA(name) {\n  return name === this.options.cdataTagName;\n}\n\n//formatting\n//indentation\n//\\n after each closing or self closing tag\n\nmodule.exports = Parser;\n","'use strict';\n\nconst nodeToJson = require('./node2json');\nconst xmlToNodeobj = require('./xmlstr2xmlnode');\nconst x2xmlnode = require('./xmlstr2xmlnode');\nconst buildOptions = require('./util').buildOptions;\n\nexports.parse = function(xmlData, options) {\n  options = buildOptions(options, x2xmlnode.defaultOptions, x2xmlnode.props);\n  return nodeToJson.convertToJson(xmlToNodeobj.getTraversalObj(xmlData, options), options);\n};\nexports.convertTonimn = require('../src/nimndata').convert2nimn;\nexports.getTraversalObj = xmlToNodeobj.getTraversalObj;\nexports.convertToJson = nodeToJson.convertToJson;\nexports.convertToJsonString = require('./node2json_str').convertToJsonString;\nexports.validate = require('./validator').validate;\nexports.j2xParser = require('./json2xml');\nexports.parseToNimn = function(xmlData, schema, options) {\n  return exports.convertTonimn(exports.getTraversalObj(xmlData, options), schema, options);\n};\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","\n\n/** Options used for getting US gmaes  */\nexport const US_GET_GAMES_OPTIONS = { system: 'platform:Nintendo Switch', sort: 'title', direction: 'asc' };\n\n/** Algolia ID for getting US games */\nexport const US_ALGOLIA_ID = 'U3B6GR4UA3';\n\n/** Algolia Key for getting US games */\nexport const US_ALGOLIA_KEY = '9a20c93440cf63cf1a7008d75f7438bf';\n\n/** URL for getting US Games */\nexport const US_GET_GAMES_URL = `https://${US_ALGOLIA_ID}-dsn.algolia.net/1/indexes/*/queries`;\n\n/** Sample game code for US store */\nexport const US_GAME_CHECK_CODE = '70010000000185';\n\n/** Regex for US game codes */\nexport const US_GAME_CODE_REGEX = /HAC\\w(\\w{4})/;\n\n/** Default limit for getting US games - Defaults to 200  */\nexport const US_GAME_LIST_LIMIT = 200;\n\n/** Price ranges for US games */\nexport const US_PRICE_RANGES = [\n  'Free to start',\n  '$0 - $4.99',\n  '$5 - $9.99',\n  '$10 - $19.99',\n  '$20 - $39.99',\n  '$40+'\n];\n\n/** Options used for getting EU gmaes  */\nexport const EU_GET_GAMES_OPTIONS = {\n  fq: 'type:GAME AND system_type:nintendoswitch* AND product_code_txt:*',\n  q: '*',\n  sort: 'sorting_title asc',\n  start: '0',\n  wt: 'json',\n};\n\n/** URL for getting EU Games */\nexport const EU_GET_GAMES_URL = 'http://search.nintendo-europe.com/{locale}/select';\n\n/** Sample game code for EU store */\nexport const EU_GAME_CHECK_CODE = '70010000000184';\n\n/** Regex for EU game codes */\nexport const EU_GAME_CODE_REGEX = /HAC\\w(\\w{4})/;\n\n/** Default locale when getting EU games - defaults to `en` */\nexport const EU_DEFAULT_LOCALE = 'en';\n\n/** Default limit used when getting EU games - defaults to `9999` */\nexport const EU_GAME_LIST_LIMIT = 9999;\n\n/** URL for getting currently released JP Games */\nexport const JP_GET_GAMES_CURRENT = 'https://www.nintendo.co.jp/data/software/xml-system/switch-onsale.xml';\n\n/** URL for getting upcoming JP Games */\nexport const JP_GET_GAMES_COMING = 'https://www.nintendo.co.jp/data/software/xml-system/switch-coming.xml';\n\n/** Sample game code for JP store */\nexport const JP_GAME_CHECK_CODE = '70010000000039';\n\n/** Regex for JP game codes */\nexport const JP_GAME_CODE_REGEX = /\\/HAC(\\w{4})/;\n\n/** Regex for JP NSUID */\nexport const JP_NSUID_REGEX = /\\d{14}/;\n\n/** URL for getting game prices */\nexport const PRICE_GET_URL = 'https://api.ec.nintendo.com/v1/price';\n\n/** Options for getting Price data */\nexport const PRICE_GET_OPTIONS = { lang: 'en' };\n\n/** Default limit used when getting price data - defaults to `50` */\nexport const PRICE_LIST_LIMIT = 50;\n\n/** Class representing an error in the nintendo-switch-eshop library */\nexport class EshopError extends Error {\n  /**\n   * Create an EshopError\n   * @param {string} message The message the error should show\n   */\n  public constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = 'EshopError';\n    this.stack = '';\n  }\n}","import { Country } from 'country-data';\n\n/**\n * @typedef {Category} Category\n * @property {string[]} category\n */\nexport type Category = {\n  category: string[];\n};\n\n/**\n * @typedef {GameEU} GameEU\n * @property {string} age_rating_type\n * @property {string} age_rating_value\n * @property {string} copyright_s\n * @property {string} developer\n * @property {string} excerpt\n * @property {string} fs_id\n * @property {string} game_series_t\n * @property {string} gift_finder_carousel_image_url_s\n * @property {string} gift_finder_description_s\n * @property {string} gift_finder_detail_page_image_url_s\n * @property {string} gift_finder_detail_page_store_link_s\n * @property {string} gift_finder_wishlist_image_url_s\n * @property {string} image_url\n * @property {string} image_url_h2x1_s\n * @property {string} image_url_sq_s\n * @property {string} image_url_tm_s\n * @property {string} originally_for_t\n * @property {string} pretty_agerating_s\n * @property {string} pretty_date_s\n * @property {string} publisher\n * @property {string} sorting_title\n * @property {string} title\n * @property {string} type\n * @property {string} url\n * @property {boolean} add_on_content_b\n * @property {boolean} club_nintendo\n * @property {boolean} near_field_comm_b\n * @property {boolean} physical_version_b\n * @property {boolean} play_mode_handheld_mode_b\n * @property {boolean} play_mode_tabletop_mode_b\n * @property {boolean} play_mode_tv_mode_b\n * @property {Date} change_date\n * @property {Date} date_from\n * @property {Date} priority\n * @property {number} age_rating_sorting_i\n * @property {number} players_from\n * @property {number} players_to\n * @property {string[]} compatible_controller\n * @property {string[]} game_categories_txt\n * @property {string[]} game_category\n * @property {string[]} language_availability\n * @property {string[]} nsuid_txt Array containing the 14-digit game unique identifier\n * @property {string[]} playable_on_txt\n * @property {string[]} product_code_txt Array containing the product code\n * @property {string[]} system_names_txt\n * @property {string[]} system_type\n * @property {string[]} title_extras_txt\n */\nexport type GameEU = {\n  age_rating_type: string;\n  age_rating_value: string;\n  copyright_s: string;\n  developer: string;\n  excerpt: string;\n  fs_id: string;\n  game_series_t: string;\n  gift_finder_carousel_image_url_s: string;\n  gift_finder_description_s: string;\n  gift_finder_detail_page_image_url_s: string;\n  gift_finder_detail_page_store_link_s: string;\n  gift_finder_wishlist_image_url_s: string;\n  image_url: string;\n  image_url_h2x1_s: string;\n  image_url_sq_s: string;\n  image_url_tm_s: string;\n  originally_for_t: string;\n  pretty_agerating_s: string;\n  pretty_date_s: string;\n  publisher: string;\n  sorting_title: string;\n  title: string;\n  type: string;\n  url: string;\n  add_on_content_b: boolean;\n  club_nintendo: boolean;\n  near_field_comm_b: boolean;\n  physical_version_b: boolean;\n  play_mode_handheld_mode_b: boolean;\n  play_mode_tabletop_mode_b: boolean;\n  play_mode_tv_mode_b: boolean;\n  change_date: Date;\n  date_from: Date;\n  priority: Date;\n  age_rating_sorting_i: number;\n  players_from: number;\n  players_to: number;\n  compatible_controller: string[];\n  game_categories_txt: string[];\n  game_category: string[];\n  language_availability: string[];\n  nsuid_txt: string[];\n  playable_on_txt: string[];\n  product_code_txt: string[];\n  system_names_txt: string[];\n  system_type: string[];\n  title_extras_txt: string[];\n};\n\n/**\n * @typedef {GameUS} GameUS\n * @property {string} game_code Product code. Can be parsed for a region wide code.\n * @property {boolean} buyonline\n * @property {string} front_box_art\n * @property {number} eshop_price USA eShop price (in dollars)\n * @property {string} nsuid 14-digit game unique identifier\n * @property {string} video_link\n * @property {string} number_of_players\n * @property {number} ca_price Canada eShop price (in canadian dollars)\n * @property {string} id\n * @property {string} title\n * @property {string} system Gaming platform\n * @property {boolean} free_to_start\n * @property {boolean} digitaldownload\n * @property {string} release_date\n * @property {Category} categories\n * @property {string} slug Game URL name\n * @property {boolean} buyitnow\n */\nexport type GameUS = {\n  game_code: string;\n  buyonline: boolean;\n  front_box_art: string;\n  eshop_price: number;\n  nsuid: string;\n  video_link: string;\n  number_of_players: string;\n  ca_price: number;\n  id: string;\n  title: string;\n  system: string;\n  free_to_start: boolean;\n  digitaldownload: boolean;\n  release_date: string;\n  categories: Category;\n  slug: string;\n  buyitnow: boolean;\n};\n\n/**\n * @typedef {AlgoliaResults} AlgoliaResults\n * @property {GameUS[]} hits The games found\n * @property {number} nbHits Total number of hits with current query\n * @property {number} hitsPerPage Number of hits per page\n * @property {number} processingTimeMS\n * @property {Object.<Object>} facets\n * @property {Array.<string[]>} facetFilters Filters for the search query\n * @property {boolean} exhaustiveFacetsCount\n * @property {boolean} exhaustiveNbHits\n * @property {string} query\n * @property {string} params\n * @property {string} index\n */\nexport type AlgoliaResults = {\n  hits: GameUS[];\n  nbHits: number;\n  page: number;\n  nbPages: number;\n  hitsPerPage: number;\n  processingTimeMS: number;\n  facets: {\n    [key: string]: {\n      [key: string]: number;\n    };\n  };\n  facetFilters: string[][];\n  exhaustiveFacetsCount: boolean;\n  exhaustiveNbHits: boolean;\n  query: string;\n  params: string;\n  index: string;\n};\n\n/**\n * @typedef {AlgoliaResponse} AlgoliaResponse\n * @property {AlgoliaResponse[]} results\n */\nexport type AlgoliaResponse = {\n  results: AlgoliaResults[];\n};\n\n/**\n * @typedef {GameJP} GameJP\n * @property {string[]} LinkURL A single item array containing the game url\n * @property {string[]} LinkTarget\n * @property {string[]} ScreenshotImgURL A single item array containing the game thumbnail url\n * @property {string[]} ScreenshotImgURLComing\n * @property {string[]} TitleName A single item array containing the game title\n * @property {string[]} TitleNameRuby\n * @property {string[]} SoftType\n * @property {string[]} SalesDate\n * @property {string[]} SalesDateStr\n * @property {string[]} MakerName\n * @property {string[]} Hard\n * @property {string[]} Memo\n */\nexport type GameJP = {\n  LinkURL: string[];\n  LinkTarget: string[];\n  ScreenshotImgURL: string[];\n  ScreenshotImgURLComing: string[];\n  TitleName: string[];\n  TitleNameRuby: string[];\n  SoftType: string[];\n  SalesDate: string[];\n  SalesDateStr: string[];\n  MakerName: string[];\n  Hard: string[];\n  Memo: string[];\n};\n\n/**\n * @typedef {EShop} EShop\n * @property {string} code\n * @property {string} country\n * @property {string} currency\n * @property {Region} region\n */\nexport type EShop = {\n  code: string;\n  country: string;\n  currency: string;\n  region: Region;\n};\n\n/**\n * @typedef {PriceResponse} PriceResponse\n * @property {PriceError} error\n * @property {boolean} personalized\n * @property {string} country\n * @property {TitleData[]} prices\n */\nexport type PriceResponse = {\n  error: PriceError;\n  personalized: boolean;\n  country: Country;\n  prices: TitleData[];\n};\n\n/**\n * @typedef {TitleData} TitleData\n * @property {number} title_id\n * @property {string} sales_status\n * @property {PriceData} regular_price\n * @property {PriceData} [discount_price]\n */\nexport type TitleData = {\n  title_id: number;\n  sales_status: string;\n  regular_price: PriceData;\n  discount_price?: PriceData;\n};\n\n/**\n * @typedef {PriceError} PriceError\n * @property {string} code\n * @property {string} message\n */\nexport type PriceError = {\n  code: string;\n  message: string;\n};\n\n/**\n * @typedef {PriceData} PriceData\n * @property {string} amount\n * @property {string} currency\n * @property {string} raw_value\n * @property {string} [start_datetime]\n * @property {string} [end_datetime]\n */\nexport type PriceData = {\n  amount: string;\n  currency: string;\n  raw_value: string;\n  start_datetime?: string;\n  end_datetime?: string;\n};\n\n/**\n * @typedef {RequestOptions} RequestOptions\n * @property {number} limit Game count limit (Can only be lower than default page size). On the US eshop, the max limit is 1000. Leave empty to get all the games.\n */\ntype RequestOptions = {\n  limit?: number;\n};\n\n/**\n * @typedef {USRequestOptions} USRequestOptions\n * @property {'retail' | 'ncom' | 'all'} shop Either `'retail' / 'ncom' / 'all'`. Defaults to `'ncom'`.\n * @extends RequestOptions\n */\nexport type USRequestOptions = {\n  shop?: 'retail' | 'ncom' | 'all' | 'unfiltered';\n} & RequestOptions;\n\n/**\n * @typedef {EURequestOptions} EURequestOptions\n * @property {string} locale Game information locale. (EU Only)\n * @extends RequestOptions\n */\nexport type EURequestOptions = {\n  locale?: string;\n} & RequestOptions;\n\n/**\n * Predefined options for the unit system\n * @enum {Region} Region\n * @property {Region.AMERICAS} 1\n * @property {Region.EUROPE} 2\n * @property {Region.ASIA} 3\n */\nexport enum Region {\n  AMERICAS = 1,\n  EUROPE = 2,\n  ASIA = 3,\n}","import { stringify } from '@favware/querystring';\nimport { countries, Country, regions } from 'country-data';\nimport { parse as xml2json } from 'fast-xml-parser';\nimport fetch from 'node-fetch';\nimport {\n  EshopError,\n  EU_DEFAULT_LOCALE,\n  EU_GAME_CHECK_CODE,\n  EU_GAME_CODE_REGEX,\n  EU_GAME_LIST_LIMIT,\n  EU_GET_GAMES_OPTIONS,\n  EU_GET_GAMES_URL,\n  JP_GAME_CHECK_CODE,\n  JP_GAME_CODE_REGEX,\n  JP_GET_GAMES_COMING,\n  JP_GET_GAMES_CURRENT,\n  JP_NSUID_REGEX,\n  PRICE_GET_OPTIONS,\n  PRICE_GET_URL,\n  PRICE_LIST_LIMIT,\n  US_ALGOLIA_ID,\n  US_ALGOLIA_KEY,\n  US_GAME_CHECK_CODE,\n  US_GAME_CODE_REGEX,\n  US_GAME_LIST_LIMIT,\n  US_GET_GAMES_OPTIONS,\n  US_GET_GAMES_URL,\n  US_PRICE_RANGES\n} from './constants';\nimport {\n  AlgoliaResponse,\n  EShop,\n  EURequestOptions,\n  GameEU,\n  GameJP,\n  GameUS,\n  PriceResponse,\n  Region,\n  TitleData,\n  USRequestOptions\n} from './interfaces';\n\n/**\n * Removed duplicates from an array\n * @param {any[]} array The input array\n * @param {string} property The property to check\n * @method\n * @private\n */\nconst arrayRemoveDuplicates = (array: any[], property: string) => {\n  const index: any[] = [];\n\n  return array.filter(item => {\n    const key = property ? item[property] : item;\n\n    return index.includes(key) ? false : index.push(key);\n  });\n};\n\n/**\n * Checks if object has a certain property\n * @param {object} obj Object to traverse\n * @param {string} prop Property to find\n * @method\n * @private\n */\nconst hasProp = (obj: object, prop: string) => obj && prop in obj;\n\n/**\n * Checks if the variable is an array of strings\n * @param {string | string[]} array Array to check\n * @returns boolean\n * @private\n */\nconst isStringArray = (array: string | string[]): array is string[] => {\n  return Array.isArray(array);\n};\n\n/**\n * Fetches all games on american eshops\n *\n * Paginates every 200 games, _(maximum item count per request)_\n * @param {USRequestOptions} [options] (Optional) Options for the request\n * @param {number} [offset] (Optional) Offset to start searching at\n * @param {string[]} [games] (Optional) Array of games to filter by\n * @returns {Promise<GameUS[]>} Promise containing all the games\n * @method\n */\nexport const getGamesAmerica = async (options: USRequestOptions = {}, offset: number = 0, games: GameUS[] = []): Promise<any> => {\n  /* eslint-disable */\r\n  const limit = hasProp(options, 'limit') ? options.limit : US_GAME_LIST_LIMIT;\r\n  const shopProp = hasProp(options, 'shop') ? options.shop : 'ncom';\r\n  let shop = shopProp === 'all' ? ['ncom', 'retail'] : shopProp;\r\n  shop = shop === 'unfiltered' ? undefined : shop;\r\n\r\n  const page = Math.floor(offset / (limit as number));\r\n\r\n  const shopMapper = (shopType: 'ncom' | 'retail' | string) => {\r\n    switch (shopType) {\r\n      case 'ncom':\r\n        return 'filterShops:On Nintendo.com';\r\n      case 'retail':\r\n        return 'filterShops:On retail';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  let shopFilters: ReturnType<typeof shopMapper> | (ReturnType<typeof shopMapper>)[] = [''];\r\n\r\n  if (shop) {\r\n    shopFilters = isStringArray(shop) ? shop.map(value => shopMapper(value)) : shopMapper(shop);\r\n  }\r\n\r\n\r\n  const sortingOptions = {\r\n    direction: US_GET_GAMES_OPTIONS.direction,\r\n    sortBy: US_GET_GAMES_OPTIONS.sort,\r\n  };\r\n\r\n  const body = {\r\n    body: JSON.stringify({\r\n      requests: [\r\n        {\r\n          indexName: `noa_aem_game_en_us${(sortingOptions.sortBy && sortingOptions.direction\r\n            ? `_${sortingOptions.sortBy}_${sortingOptions.direction}` : '')}`,\r\n          params: stringify({\r\n            facetFilters: [\r\n              [US_GET_GAMES_OPTIONS.system],\r\n              shopFilters\r\n            ],\r\n            hitsPerPage: limit,\r\n            page,\r\n          }),\r\n        }\r\n      ],\r\n    }),\r\n    headers: { 'Content-Type': 'application/json' },\r\n    method: 'post',\r\n  };\r\n\r\n  try {\r\n    if (hasProp(options, 'limit')) {\r\n      const gamesUS = await fetch(`${US_GET_GAMES_URL}?${stringify({\r\n        'x-algolia-api-key': US_ALGOLIA_KEY,\r\n        'x-algolia-application-id': US_ALGOLIA_ID,\r\n      })}`, body);\r\n\r\n      if (!gamesUS.ok) throw new Error('US_games_request_failed');\r\n\r\n      const filteredResponse: AlgoliaResponse = await gamesUS.json();\r\n      const accumulatedGames: GameUS[] = arrayRemoveDuplicates(games.concat(filteredResponse.results[0].hits), 'slug');\r\n\r\n      if (!hasProp(options, 'limit') && filteredResponse.results[0].hits.length + offset < filteredResponse.results[0].nbHits) {\r\n        return await getGamesAmerica(options, offset + (limit as number), accumulatedGames);\r\n      }\r\n\r\n      return accumulatedGames;\r\n    }\r\n    /**\r\n     * Using a workaround to get all the games.\r\n     * Basically, fetch all the games from the different categories one by one,\r\n     * if one category has > 1000 games, fetch all the games in each price range one by one.\r\n     *\r\n     * Get the counts of all the games in the different categories.\r\n     */\r\n    const countGamesBody = {\r\n      body: JSON.stringify({\r\n        requests: [{\r\n          indexName: 'noa_aem_game_en_us',\r\n          params: stringify({\r\n            facetFilters: [\r\n              [US_GET_GAMES_OPTIONS.system],\r\n              shopFilters\r\n            ],\r\n            facets: [\r\n              'categories'\r\n            ],\r\n            hitsPerPage: 0,\r\n          }),\r\n        }],\r\n      }),\r\n      headers: { 'Content-Type': 'application/json' },\r\n      method: 'post',\r\n    };\r\n\r\n    const gamesToCount = await fetch(`${US_GET_GAMES_URL}?${stringify({\r\n      'x-algolia-api-key': US_ALGOLIA_KEY,\r\n      'x-algolia-application-id': US_ALGOLIA_ID,\r\n    })}`, countGamesBody);\r\n    if (!gamesToCount.ok) throw new Error('US_games_request_failed');\r\n\r\n    const response: AlgoliaResponse = await gamesToCount.json();\r\n    const categoryCount = response.results[0].facets.categories;\r\n\r\n    // Loop through all the categories and fetch the games.\r\n    const allGamesPromises = Object.entries(categoryCount).map(async ([category, count]) => {\r\n      const normalRequest = [{\r\n        indexName: 'noa_aem_game_en_us',\r\n        params: stringify({\r\n          facetFilters: JSON.stringify([\r\n            [US_GET_GAMES_OPTIONS.system],\r\n            [`categories:${category}`],\r\n            shopFilters\r\n          ]),\r\n          hitsPerPage: 1000,\r\n        }),\r\n      }];\r\n\r\n      const manyPriceRangeRequests = US_PRICE_RANGES.map(priceRange => ({\r\n        indexName: 'noa_aem_game_en_us',\r\n        params: stringify({\r\n          facetFilters: JSON.stringify([\r\n            [US_GET_GAMES_OPTIONS.system],\r\n            [`categories:${category}`],\r\n            [`priceRange:${priceRange}`],\r\n            shopFilters\r\n          ]),\r\n          facets: [\r\n            'platform',\r\n            'categories'\r\n          ],\r\n          hitsPerPage: 1000,\r\n        }),\r\n      }));\r\n\r\n      const finalGamesBody = {\r\n        body: JSON.stringify({ requests: count > 1000 ? manyPriceRangeRequests : normalRequest }),\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n      };\r\n\r\n      const allGamesResponse = await fetch(`${US_GET_GAMES_URL}?${stringify({\r\n        'x-algolia-api-key': US_ALGOLIA_KEY,\r\n        'x-algolia-application-id': US_ALGOLIA_ID,\r\n      })}`, finalGamesBody);\r\n\r\n      if (!allGamesResponse.ok) throw new Error('US_games_request_failed');\r\n\r\n      const gamesResponse: AlgoliaResponse = await allGamesResponse.json();\r\n\r\n      return count > 1000\r\n        ? gamesResponse.results\r\n          .map(result => result.hits)\r\n          .reduce((a, b) => a.concat(b, []))\r\n        : gamesResponse.results[0].hits;\r\n    });\r\n\r\n    // Finally fetch all the games and remove duplicates\r\n    let allGames = (await Promise.all(allGamesPromises)).reduce((a, b) => a.concat(b, []));\r\n    allGames = arrayRemoveDuplicates(allGames, 'slug');\r\n\r\n    return allGames;\r\n  } catch (err) {\r\n    if (/(?:US_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of US Games failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches all games on japanese eShops\r\n * @returns {Promise<GameJP[]>} Promise containing all the games\r\n * @method\r\n * @name getGamesJapan\r\n */\r\nexport const getGamesJapan = async (): Promise<GameJP[]> => {\r\n  try {\r\n    const currentGamesJP = await fetch(JP_GET_GAMES_CURRENT);\r\n    const comingGamesJP = await fetch(JP_GET_GAMES_COMING);\r\n    if (!currentGamesJP.ok) throw new Error('JP_current_games_US_games_request_failed');\r\n    if (!comingGamesJP.ok) throw new Error('JP_coming_games_US_games_request_failed');\r\n\r\n    const parsedCurrentGames = xml2json(await currentGamesJP.text());\r\n    const parsedComingGames = xml2json(await comingGamesJP.text());\r\n    const currentGames: GameJP[] = parsedCurrentGames.TitleInfoList.TitleInfo;\r\n    const comingGames: GameJP[] = parsedComingGames.TitleInfoList.TitleInfo;\r\n\r\n    return currentGames.concat(comingGames);\r\n  } catch (err) {\r\n    if (/(?:JP_current_games_US_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of Current JP Games failed');\r\n    if (/(?:JP_coming_games_US_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of Upcoming JP Games failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches all games on european eShops\r\n * @param {EURequestOptions} [options] (Optional) Options for the request\r\n * @returns {Promise<GameUS[]>} Promise containing all the games\r\n * @method\r\n * @name getGamesEurope\r\n */\r\nexport const getGamesEurope = async (options: EURequestOptions = { limit: EU_GAME_LIST_LIMIT, locale: EU_DEFAULT_LOCALE }): Promise<GameEU[]> => {\r\n  if (!options.limit) options.limit = EU_GAME_LIST_LIMIT;\r\n  if (!options.locale) options.locale = EU_DEFAULT_LOCALE;\r\n\r\n  try {\r\n    const gamesEU = await fetch(`${EU_GET_GAMES_URL.replace('{locale}', options.locale)}?${stringify({\r\n      rows: options.limit,\r\n      ...EU_GET_GAMES_OPTIONS,\r\n    })}`);\r\n\r\n    if (!gamesEU.ok) throw new Error('EU_games_request_failed');\r\n\r\n    const gamesData = await gamesEU.json();\r\n\r\n    return gamesData.response.docs as GameEU[];\r\n  } catch (err) {\r\n    if (/(?:EU_games_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of EU Games failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Get pricing information for the requested games. Paginates every 50 games.\r\n * @param {string} country A two digit country code. (ISO 3166-1 alpha-2 country code)\r\n * @param {string[] | string} gameIds One or more NSUID of the corresponding games.\r\n * @param {number} [offset] (Optional) The offset to start at\r\n * @param {TitleData[]} [prices] (Optional) An array of {@link TitleData}\r\n * @return {Promise<PriceResponse>} A promise containing the pricing information.\r\n * @method\r\n * @name getPrices\r\n */\r\nexport const getPrices = async (country: string, gameIds: string[] | string, offset: number = 0, prices: TitleData[] = []): Promise<PriceResponse> => {\r\n  try {\r\n    const filteredIds = gameIds.slice(offset, offset + PRICE_LIST_LIMIT);\r\n    const priceData = await fetch(`${PRICE_GET_URL}?${stringify({\r\n      country,\r\n      ids: filteredIds,\r\n      limit: PRICE_LIST_LIMIT,\r\n      ...PRICE_GET_OPTIONS,\r\n    })}`);\r\n\r\n    if (priceData.status === 403) throw new Error('PRICE_Rate_Limit');\r\n    if (!priceData.ok) throw new Error('PRICE_get_request_failed');\r\n    const response: PriceResponse = await priceData.json();\r\n\r\n    if (response.prices && response.prices.length + offset < gameIds.length) {\r\n      const accumulatedPrices = prices.concat(response.prices);\r\n\r\n      return await getPrices(country, gameIds, offset + PRICE_LIST_LIMIT, accumulatedPrices);\r\n    } else if (response.prices) {\r\n      response.prices = response.prices.concat(prices);\r\n\r\n      return response;\r\n    }\r\n\r\n    return response;\r\n  } catch (err) {\r\n    if (/(?:PRICE_Rate_Limit)/i.test(err.toString())) throw new EshopError('Looks like you ran into a rate limit while getting price data, please do not spam the Nintendo servers.');\r\n    if (/(?:PRICE_get_request_failed)/i.test(err.toString())) throw new EshopError('Fetching of eShop prices failed');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Gets all active eShops given a list of countries.\r\n * @param {string[]} countryCodes A list of 2 digit country codes for every country eShop to lookup. (ISO 3166-1 alpha-2 country codes)\r\n * @param {string} gameCode A 14 digits game NSUID from the desired region.\r\n * @param {Region} region A region id that will be appended in the final shop object for filtering purposes.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsByCountryCodes\r\n */\r\nexport const getShopsByCountryCodes = async (countryCodes: string[], gameCode: string, region: Region): Promise<EShop[]> => {\r\n  try {\r\n    const countryList: Country[] = countryCodes.map((code: string) => countries.all.filter((country: Country) => country.alpha2 === code)[0]);\r\n    const shops: PriceResponse[] = [];\r\n\r\n    for (const country of countryList) {\r\n      try {\r\n        const response = await getPrices(country.alpha2, gameCode);\r\n        response.country = country;\r\n        shops.push(response);\r\n      } catch (err) {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    const activeShops = shops.filter((shop: PriceResponse) => shop && shop.prices && shop.prices.length && shop.prices[0].regular_price);\r\n    const eShops = activeShops.map((shop: PriceResponse) => (\r\n      {\r\n        code: shop.country.alpha2,\r\n        country: shop.country.name,\r\n        currency: shop.prices[0].regular_price.currency,\r\n        region,\r\n      }\r\n    )\r\n    );\r\n\r\n    if (!eShops.length) throw new Error('ACTIVE_SHOPS_Rate_Limit');\r\n\r\n    return eShops;\r\n  } catch (err) {\r\n    if (/(?:ACTIVE_SHOPS_Rate_Limit)/i.test(err.toString())) throw new EshopError('Looks like you ran into a rate limit while getting price data, please do not spam the Nintendo servers.');\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Gets all active eShops on American countries.\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsAmerica\r\n */\r\nexport const getShopsAmerica = async (): Promise<EShop[]> => {\r\n  return getShopsByCountryCodes(\r\n    regions.southAmerica.countries.concat(\r\n      regions.centralAfrica.countries, regions.northernAmerica.countries\r\n    ),\r\n    US_GAME_CHECK_CODE,\r\n    Region.AMERICAS\r\n  );\r\n};\r\n\r\n/**\r\n * Gets all active eShops on European countries.\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsEurope\r\n */\r\nexport const getShopsEurope = async (): Promise<EShop[]> => {\r\n  return getShopsByCountryCodes(\r\n    regions.northernEurope.countries.concat(\r\n      regions.southernEurope.countries, regions.easternEurope.countries,\r\n      regions.westernEurope.countries, regions.australia.countries,\r\n      regions.southernAfrica.countries\r\n    ),\r\n    EU_GAME_CHECK_CODE,\r\n    Region.EUROPE\r\n  );\r\n};\r\n\r\n/**\r\n * Gets all active eShops on Asian countries\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getShopsAsia\r\n */\r\nexport const getShopsAsia = async (): Promise<EShop[]> => {\r\n  return getShopsByCountryCodes(\r\n    regions.southernAsia.countries.concat(\r\n      regions.southernAsia.countries, regions.southeastAsia.countries,\r\n      regions.eastAsia.countries, regions.westernAsia.countries\r\n    ),\r\n    JP_GAME_CHECK_CODE,\r\n    Region.ASIA\r\n  );\r\n};\r\n\r\n/**\r\n * Gets all active eShops.\r\n * This method will launch several requests at nintendo web services, so don't abuse it.\r\n * @returns {Promise<EShop[]>} A list of shop objects with country code, name and default currency.\r\n * @method\r\n * @name getActiveShops\r\n */\r\nexport const getActiveShops = async (): Promise<EShop[]> => {\r\n  const shopsAmerica = await getShopsAmerica();\r\n  const shopsAsia = await getShopsAsia();\r\n  const shopsEurope = await getShopsEurope();\r\n\r\n  return shopsAmerica.concat(shopsAsia, shopsEurope);\r\n};\r\n\r\n/**\r\n * Parses the game code to extract the cross-region protion.\r\n * @param {GameUS | GameEU | GameJP} game The game object returned from one of the other methods.\r\n * @param {Region} region Region code\r\n * @returns {string | null} The 4-digit resulting game code\r\n * @method\r\n * @name parseGameCode\r\n */\r\nexport const parseGameCode = (game: GameUS | GameEU | GameJP, region: Region): string | null => {\r\n  let codeParse: RegExpExecArray | null;\r\n\r\n  switch (region) {\r\n    case Region.EUROPE:\r\n      codeParse = EU_GAME_CODE_REGEX.exec((game as GameEU).product_code_txt[0]);\r\n      break;\r\n    case Region.ASIA:\r\n      codeParse = JP_GAME_CODE_REGEX.exec((game as GameJP).ScreenshotImgURL[0]);\r\n      break;\r\n    default:\r\n    case Region.AMERICAS:\r\n      codeParse = US_GAME_CODE_REGEX.exec((game as GameUS).game_code);\r\n      break;\r\n  }\r\n\r\n  return (codeParse && codeParse.length > 1) ? codeParse[1] : null;\r\n};\r\n\r\n/**\r\n * Extracts NSUID information from the game object.\r\n * @param {GameUS | GameEU | GameJP} game The game object returned from one of the other methods.\r\n * @param {Region} region Region code\r\n * @returns {string | null} The 14-digits NSUID\r\n * @method\r\n * @name parseNSUID\r\n */\r\nexport const parseNSUID = (game: GameUS | GameEU | GameJP, region: Region): string | null => {\r\n  switch (region) {\r\n    case Region.EUROPE:\r\n      return (game as GameEU).nsuid_txt ? (game as GameEU).nsuid_txt[0] : null;\r\n    case Region.ASIA:\r\n      const nsuidParse = JP_NSUID_REGEX.exec((game as GameJP).LinkURL[0]);\r\n\r\n      return (nsuidParse && nsuidParse.length > 0) ? nsuidParse[0] : null;\r\n    default:\r\n    case Region.AMERICAS:\r\n      return (game as GameUS).nsuid;\r\n  }\r\n};"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","e","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","Parse","Stringify","isFinite","toString","r","err","o","separator","equals","includeQuestion","keys","Error","sort","map","encodeURIComponent","isArray","join","filter","Boolean","test","root","previousUnderscore","breaker","ArrayProto","ObjProto","FuncProto","Function","slice","concat","nativeForEach","forEach","nativeMap","nativeReduce","reduce","nativeReduceRight","reduceRight","nativeFilter","nativeEvery","every","nativeSome","some","nativeIndexOf","indexOf","nativeLastIndexOf","lastIndexOf","nativeIsArray","nativeKeys","nativeBind","bind","obj","_wrapped","module","exports","VERSION","each","context","collect","results","index","list","reduceError","foldl","inject","memo","initial","foldr","find","detect","predicate","any","select","all","identity","contains","include","target","invoke","method","args","isFunc","isFunction","pluck","key","property","where","attrs","matches","findWhere","max","Math","Infinity","lastComputed","computed","min","shuffle","rand","shuffled","random","sample","guard","values","lookupIterator","sortBy","criteria","left","right","a","group","behavior","groupBy","has","indexBy","countBy","sortedIndex","array","low","high","mid","toArray","size","first","head","take","last","rest","tail","drop","compact","flatten","input","shallow","output","isArguments","without","difference","partition","pass","fail","elem","uniq","unique","isSorted","seen","union","intersection","item","other","zip","object","from","hasIndex","range","start","stop","ceil","idx","ctor","func","bound","self","partial","boundArgs","position","bindAll","funcs","memoize","hasher","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","remaining","clearTimeout","trailing","debounce","immediate","timestamp","callNow","once","ran","wrap","wrapper","compose","after","times","isObject","pairs","invert","functions","methods","names","extend","source","prop","pick","copy","omit","defaults","clone","tap","interceptor","eq","aStack","bStack","className","String","global","multiline","ignoreCase","aCtor","bCtor","isEqual","isEmpty","isString","isElement","nodeType","name","isNaN","parseFloat","isNumber","isBoolean","isNull","isUndefined","noConflict","constant","accum","floor","Date","getTime","entityMap","escape","&","<",">","\"","'","unescape","entityRegexes","RegExp","string","replace","match","mixin","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n","\t"," "," ","escaper","template","text","data","settings","render","matcher","offset","variable","chain","_chain","regions","centralAsia","countries","southernAsia","southeastAsia","eastAsia","westernAsia","centralAfrica","northAfrica","southernAfrica","eastAfrica","westAfrica","centralAmerica","northernAmerica","caribbean","southAmerica","antartica","northernEurope","southernEurope","easternEurope","westernEurope","australia","melanesia","micronesia","polynesia","continents","asia","africa","northAmerica","europe","oceania","init","search","currencies","languages","query","q","ALL","AFN","ARS","AWG","AUD","AZN","BSD","BBD","BYR","BZD","BMD","BOB","BAM","BWP","BGN","BRL","BND","KHR","CAD","KYD","CLP","CNY","COP","CRC","HRK","CUP","CZK","DKK","DOP","XCD","EGP","SVC","EEK","EUR","FKP","FJD","GHC","GIP","GTQ","GGP","GYD","HNL","HKD","HUF","ISK","INR","IDR","IRR","IMP","ILS","JMD","JPY","JEP","KES","KZT","KPW","KRW","KGS","LAK","LVL","LBP","LRD","LTL","MKD","MYR","MUR","MXN","MNT","MZN","NAD","NPR","ANG","NZD","NIO","NGN","NOK","OMR","PKR","PAB","PYG","PEN","PHP","PLN","QAR","RON","RUB","SHP","SAR","RSD","SCR","SGD","SBD","SOS","ZAR","LKR","SEK","CHF","SRD","SYP","TZS","TWD","THB","TTD","TRY","TRL","TVD","UGX","UAH","GBP","USD","UYU","UZS","VEF","VND","YER","ZWD","mapSymbol","currencyCode","countriesAll","country","exportedAlpha2","alpha2","status","exportedAlpha3","alpha3","currenciesAll","currency","symbol","getSymbol","code","languagesAll","language","bibliographic","lookup","callingCountries","callingCodesAll","codes","countryCallingCodes","parse","str","parseInt","splitA","split","splitB","undefined","doesMatch","regex","exec","len","isExist","defaultOptions","props","newOptions","allmatches","convertToJson","node","jObj","child","util","isEmptyObject","attrsMap","val","cdataPositionChar","textNodeName","merge","tagname","tag","parent","addChild","buildOptions","TagType","OPENING","CLOSING","SELF","CDATA","attrstr_regex","regx","Number","window","attributeNamePrefix","attrNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","localeRange","tagValueProcessor","attrValueProcessor","stopNodes","getTraversalObj","xmlData","xmlObj","xmlNode","currentNode","tagsRegx","nextTag","tagType","checkForTagType","getValue","processTagValue","includes","substr","startIndex","childNode","buildAttributesMap","trim","parseValue","parseTrueNumberOnly","resolveNameSpace","tags","charAt","shouldParse","parsed","attrsRegx","attrStr","getAllMatches","attrName","attrCollection","char","fromCharCode","chars","nilChar","missingChar","nilPremitive","missingPremitive","emptyChar","emptyValue","boundryChar","objStart","arrStart","arrayEnd","charsArr","_e","e_schema","hasValidData","hasData","itemSchema","arr_len","arr_i","processValue","isAppChar","ch","require$$0","convert2nimn","x2j","convertToJsonString","indentBy","_cToJsonStr","level","stringval","tagFound","regxAttrName","regxTagName","msg","readPI","readCommentAndCDATA","closingTag","tagName","substring","validateTagName","readAttributeStr","isValid","validateAttributeString","otg","JSON","stringify","angleBracketsCount","doubleQuote","singleQuote","startChar","validAttrStrRegxp","attrNames","validateAttrName","doesNotMatch","format","supressEmptyNode","Parser","isAttribute","attrPrefixLen","isCDATA","replaceCDATAstr","replaceCDATAarr","indentate","tagEndChar","newLine","buildTextNode","buildEmptyTextNode","buildObjNode","buildEmptyObjNode","buildTextValNode","buildObjectNode","cdata","repeat","startsWith","j2x","attr","arrLen","j","Ks","L","x2xmlnode","xmlToNodeobj","nodeToJson","require$$1","require$$2","require$$3","validate","require$$4","schema","convertTonimn","freeExports","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","overflow","not-basic","invalid-input","baseMinusTMin","stringFromCharCode","error","type","RangeError","fn","mapDomain","parts","ucs2decode","extra","counter","charCodeAt","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","out","basic","oldi","w","baseMinusT","codePoint","inputLength","bias","splice","encode","handledCPCount","basicLength","m","currentValue","handledCPCountPlusOne","qMinusT","version","ucs2","toASCII","toUnicode","toLowerCase","arg","isNullOrUndefined","qs","sep","regexp","maxKeys","kstr","vstr","x","decodeURIComponent","stringifyPrimitive","ks","urlParse","urlResolve","urlResolveObject","urlFormat","Url","protocol","slashes","auth","host","port","hostname","hash","pathname","path","href","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","url","parseQueryString","slashesDenoteHost","u","relative","resolveObject","queryIndex","splitter","uSplit","simplePath","querystring","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","l","part","newpart","validParts","notHost","bit","unshift","h","ae","esc","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","hasTrailingSlash","up","isAbsolute","Readable","Stream","BUFFER","TYPE","Blob","[object Object]","blobParts","buffers","element","buffer","Buffer","ArrayBuffer","isView","byteOffset","byteLength","buf","ab","readable","_read","end","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","message","systemError","errno","captureStackTrace","convert","defineProperties","enumerable","defineProperty","toStringTag","writable","configurable","require","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","isBuffer","disturbed","on","consumeBody","_this4","alloc","stream","accumBytes","abort","resTimeout","chunk","convertBody","headers","ct","get","res","charset","append","delete","getAll","set","arrayBuffer","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","_this2","_this3","json","mixIn","getOwnPropertyNames","desc","getOwnPropertyDescriptor","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","Headers","rawHeaders","raw","headerNames","headerName","pair","callback","getHeaders","_pairs$i","createHeadersIterator","kind","entries","INTERNAL","HeadersIteratorPrototype","getPrototypeOf","_INTERNAL","exportNodeCompatibleHeaders","hostHeaderKey","createHeadersLenient","INTERNALS$1","STATUS_CODES","Response","opts","contentType","statusText","ok","redirected","INTERNALS$2","parse_url","format_url","streamDestructionSupported","isRequest","isAbortSignal","signal","Request","parsedURL","toUpperCase","inputBody","redirect","follow","compress","agent","getNodeRequestOptions","request","contentLengthValue","totalBytes","AbortError","PassThrough$1","resolve_url","fetch","send","response","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","socket","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","zlib","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","US_GET_GAMES_OPTIONS","system","direction","US_ALGOLIA_ID","US_ALGOLIA_KEY","US_GET_GAMES_URL","US_GAME_CHECK_CODE","US_GAME_CODE_REGEX","US_GAME_LIST_LIMIT","US_PRICE_RANGES","EU_GET_GAMES_OPTIONS","fq","wt","EU_GET_GAMES_URL","EU_GAME_CHECK_CODE","EU_GAME_CODE_REGEX","EU_DEFAULT_LOCALE","EU_GAME_LIST_LIMIT","JP_GET_GAMES_CURRENT","JP_GET_GAMES_COMING","JP_GAME_CHECK_CODE","JP_GAME_CODE_REGEX","JP_NSUID_REGEX","PRICE_GET_URL","PRICE_GET_OPTIONS","lang","PRICE_LIST_LIMIT","_super","stack","tslib_1.__extends","Region","arrayRemoveDuplicates","hasProp","isStringArray","getGamesAmerica","games","limit","shopProp","shop","page","shopMapper","shopType","shopFilters","sortingOptions","requests","indexName","params","facetFilters","hitsPerPage","Content-Type","x-algolia-api-key","x-algolia-application-id","gamesUS","_a","filteredResponse","accumulatedGames","hits","nbHits","countGamesBody","facets","gamesToCount","categoryCount","categories","allGamesPromises","category","count","normalRequest","manyPriceRangeRequests","priceRange","finalGamesBody","allGamesResponse","_b","gamesResponse","allGames","err_1","EshopError","getGamesJapan","currentGamesJP","_c","comingGamesJP","xml2json","parsedCurrentGames","parsedComingGames","currentGames","TitleInfoList","TitleInfo","comingGames","err_2","getGamesEurope","locale","rows","gamesEU","docs","err_3","getPrices","gameIds","prices","filteredIds","ids","priceData","accumulatedPrices","err_4","getShopsByCountryCodes","countryCodes","gameCode","region","countryList","shops","countryList_1","_i","activeShops","regular_price","eShops","err_6","getShopsAmerica","AMERICAS","getShopsEurope","EUROPE","getShopsAsia","ASIA","getActiveShops","shopsAmerica","shopsAsia","shopsEurope","parseGameCode","game","codeParse","product_code_txt","ScreenshotImgURL","game_code","parseNSUID","nsuid_txt","nsuidParse","LinkURL","nsuid"],"mappings":"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eACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,OAIJO,eAAyB,CACvB9D,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,OAIJQ,WAAqB,CACnB/D,KAAM,cACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJS,WAAqB,CACnBhE,KAAM,cACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJU,eAAyB,CACvBjE,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,OAIJW,gBAA0B,CACxBlE,KAAM,mBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,OAIJY,UAAoB,CAClBnE,KAAM,YACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJa,aAAuB,CACrBpE,KAAM,gBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJc,UAAoB,CAClBrE,KAAM,YACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,OAIJe,eAAyB,CACvBtE,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJgB,eAAyB,CACvBvE,KAAM,kBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJiB,cAAwB,CACtBxE,KAAM,iBACNuD,UAAW,CAET,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAIJkB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"}