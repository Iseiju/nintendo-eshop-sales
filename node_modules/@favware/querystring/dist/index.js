"use strict";var FunctionSource;Object.defineProperty(exports,"__esModule",{value:!0}),function(r){r.Parse="parse",r.Stringify="stringify"}(FunctionSource||(FunctionSource={}));var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r.toString():"";default:return""}},handleQuerystringError=function(r,e){switch(e){case FunctionSource.Parse:return{err:r};case FunctionSource.Stringify:default:return r}},stringify=function(r,e){void 0===e&&(e={separator:"&",equals:"=",includeQuestion:!1});try{if(!r||Object.keys(r).length<=0)throw new Error("object_is_empty");if("object"!=typeof r)throw new Error("input_not_object");e.separator||(e.separator="&"),e.equals||(e.equals="="),e.includeQuestion||(e.includeQuestion=!1);var t=Object.keys(r).sort().map(function(t){var n=encodeURIComponent(stringifyPrimitive(t))+e.equals;return void 0===r[t]?"":null===r[t]?encodeURIComponent(t):Array.isArray(r[t])?r[t].map(function(r){return n+encodeURIComponent(stringifyPrimitive(r))}).join(e.separator):n+encodeURIComponent(stringifyPrimitive(r[t]))}).filter(Boolean);return e.includeQuestion&&(t[0]="?"+t[0]),t.join(e.separator)}catch(t){return/object_is_empty/i.test(t.toString())?(e.includeQuestion?"?":"")+encodeURIComponent(stringifyPrimitive(r)):/input_not_object/i.test(t.toString())?handleQuerystringError("@Favware/Querystring: Your input was not an object. Please supply an object when using Stringify",FunctionSource.Stringify):t}},parse=function(r,e){void 0===r&&(r=""),void 0===e&&(e={separator:"&",equals:"="});try{if("string"!=typeof r)throw new Error("input_not_string");if(""===r)return{};/^https?:\/\//.test(r)&&(r=r.split("?")[1]),e.separator||(e.separator="&"),e.equals||(e.equals="="),r.startsWith("?")&&(r=r.slice(1));var t={},n=/\+/g,i=r.split(e.separator),o=i.length;o>1e3&&(o=1e3);for(var s=0,u=i;s<u.length;s++){var a=u[s].replace(n,"%20"),c=a.indexOf(e.equals),p=void 0,l=void 0;c>=0?(p=a.substr(0,c),l=a.substr(c+1)):(p=a,l="");var f=decodeURIComponent(p),y=decodeURIComponent(l);t.hasOwnProperty(f)?Array.isArray(t[f])?t[f].push(y):t[f]=[t[f],y]:t[f]=y}return t}catch(r){return/input_not_string/i.test(r.toString())?handleQuerystringError("@Favware/Querystring: Your input was not an string. Please supply a string when using Parse",FunctionSource.Parse):r}};exports.default=stringify,exports.parse=parse,exports.stringify=stringify;
//# sourceMappingURL=index.js.map
